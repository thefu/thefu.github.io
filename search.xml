<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ADB(androidè°ƒè¯•æ¡¥)</title>
    <url>/2022/10/15/ADB-android%E8%B0%83%E8%AF%95%E6%A1%A5/</url>
    <content><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>androidè°ƒè¯•æ¡¥ï¼ˆadbï¼‰æ˜¯ä¸€ç§åŠŸèƒ½å¤šæ ·çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯è®©æ‚¨ä¸è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚adbå‘½ä»¤å¯ç”¨äºæ‰§è¡Œå„ç§è®¾å¤‡æ“ä½œï¼ˆä¾‹å¦‚å®‰è£…å’Œè°ƒè¯•åº”ç”¨ï¼‰,å¹¶æä¾›å¯¹Unix shellï¼ˆå¯ç”¨æ¥åœ¨è®¾å¤‡å•†è¿è¡Œå„ç§å‘½ä»¤ï¼‰çš„è®¿é—®æƒé™ã€‚å®ƒæ˜¯ä¸€ç§å®¢æˆ·ç«¯-æœåŠ¡å™¨ç¨‹åºï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç»„ä»¶ï¼š<br>å®¢æˆ·ç«¯ï¼šç”¨äºå‘é€å‘½ä»¤ã€‚å®¢æˆ·ç«¯åœ¨å¼€å‘æœºå™¨ä¸Šè¿è¡Œã€‚æ‚¨å¯ä»¥é€šè¿‡å‘å‡ºadbå‘½ä»¤ä»å‘½ä»¤è¡Œç»ˆç«¯è°ƒç”¨å®¢æˆ·ç«¯ã€‚<br>å®ˆæŠ¤ç¨‹åºï¼ˆadbdï¼‰ï¼šç”¨äºåœ¨è®¾å¤‡å•†è¿è¡Œå‘½ä»¤ã€‚å®ˆæŠ¤ç¨‹åºåœ¨æ¯ä¸ªè®¾å¤‡ä¸Šä½œä¸ºåå°è¿›ç¨‹è¿è¡Œã€‚<br>æœåŠ¡å™¨ï¼šç”¨äºç®¡ç†å®¢æˆ·ç«¯ä¸å®ˆæŠ¤ç¨‹åºä¹‹é—´çš„é€šä¿¡ã€‚æœåŠ¡å™¨åœ¨å¼€å‘æœºå™¨ä¸Šä½œä¸ºåå°è¿›ç¨‹è¿è¡Œã€‚</p>
<span id="more"></span>
<h2 id="å¸¸ç”¨çš„å‘½ä»¤ï¼š"><a href="#å¸¸ç”¨çš„å‘½ä»¤ï¼š" class="headerlink" title="å¸¸ç”¨çš„å‘½ä»¤ï¼š"></a>å¸¸ç”¨çš„å‘½ä»¤ï¼š</h2><h3 id="æŸ¥è¯¢è®¾å¤‡"><a href="#æŸ¥è¯¢è®¾å¤‡" class="headerlink" title="æŸ¥è¯¢è®¾å¤‡"></a>æŸ¥è¯¢è®¾å¤‡</h3><p>åœ¨å‘å‡ºadbå‘½ä»¤ä¹‹å‰ï¼Œäº†è§£å“ªäº›è®¾å¤‡å®ä¾‹å·²ç»äº†è§£åˆ°adbæœåŠ¡å™¨ä¼šå¾ˆæœ‰å¸®åŠ©<br>adb devices -l</p>
<h3 id="å°†å‘½ä»¤å‘é€è‡³ç‰¹å®šè®¾å¤‡"><a href="#å°†å‘½ä»¤å‘é€è‡³ç‰¹å®šè®¾å¤‡" class="headerlink" title="å°†å‘½ä»¤å‘é€è‡³ç‰¹å®šè®¾å¤‡"></a>å°†å‘½ä»¤å‘é€è‡³ç‰¹å®šè®¾å¤‡</h3><p>å¦‚æœæœ‰å¤šä¸ªå‘½ä»¤æ­£åœ¨è¿è¡Œï¼Œå‘å‡ºadbå‘½ä»¤æ—¶å¿…é¡»æŒ‡å®šç›®æ ‡è®¾å¤‡ã€‚ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨deviceså‘½ä»¤è·å–ç›®æ ‡è®¾å¤‡çš„åºåˆ—å·ã€‚è·å¾—åºåˆ—å·æ—¶ï¼Œè¯·ç»“åˆ-sé€‰é¡¹å’Œadbå‘½ä»¤æ¥æŒ‡å®šåºåˆ—å·ã€‚<br>adb -s xxxxxxxxx installl helloworld.apk</p>
<h3 id="å®‰è£…åº”ç”¨"><a href="#å®‰è£…åº”ç”¨" class="headerlink" title="å®‰è£…åº”ç”¨"></a>å®‰è£…åº”ç”¨</h3><p>ä½¿ç”¨adbçš„installå‘½ä»¤åœ¨æ¨¡æ‹Ÿå™¨æˆ–é“¾æ¥çš„è®¾å¤‡ä¸Šå®‰è£…APK<br>adb install path_to_apk</p>
<h3 id="è®¾ç½®ç«¯å£è½¬å‘"><a href="#è®¾ç½®ç«¯å£è½¬å‘" class="headerlink" title="è®¾ç½®ç«¯å£è½¬å‘"></a>è®¾ç½®ç«¯å£è½¬å‘</h3><p>å¯ä»¥ä½¿ç”¨forwardå‘½ä»¤è®¾ç½®ä»»æ„ç«¯å£è½¬å‘ï¼Œå°†ç‰¹å®šä¸»æœºç«¯å£ä¸Šçš„è¯·æ±‚è½¬å‘åˆ°è®¾å¤‡ä¸Šå…¶ä»–ç«¯å£ã€‚ä»¥ä¸‹å®ä¾‹è®¾ç½®äº†ä¸»æœºç«¯å£6100åˆ°è®¾å¤‡ç«¯å£7100çš„è½¬å‘ï¼š<br>adb forward tcp:6100 tcp:7100</p>
<h3 id="å°†æ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡-x2F-ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶"><a href="#å°†æ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡-x2F-ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶" class="headerlink" title="å°†æ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡&#x2F;ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶"></a>å°†æ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡&#x2F;ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶</h3><p>å¯ä»¥ä½¿ç”¨pullå’Œpushå‘½ä»¤å°†æ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡æˆ–ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶ã€‚ä¸installå‘½ä»¤ï¼ˆä»…å°†apkæ–‡ä»¶å¤åˆ¶åˆ°ç‰¹å®šä½ç½®ï¼‰ä¸åŒï¼Œä½¿ç”¨pullå’Œpushå‘½ä»¤å¯å°†ä»»æ„ç›®å½•å’Œæ–‡ä»¶å¤åˆ¶åˆ°è®¾å¤‡ä¸­ä»»ä½•ä½ç½®ã€‚<br>ä»è®¾å¤‡ä¸­å¤åˆ¶æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼ˆåŠå…¶å­ç›®å½•ï¼‰,ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br>Adb pull remote local<br>å¦‚éœ€å°†æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•å¤åˆ¶åˆ°è®¾å¤‡ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br>Adb push local remote<br>å°†localå’Œremoteæ›¿æ¢ä¸ºå¼€å‘æœºå™¨ï¼ˆæœ¬åœ°ï¼‰å’Œè®¾å¤‡ï¼ˆè¿œç¨‹ï¼‰ä¸Šçš„ç›®æ ‡æ–‡ä»¶&#x2F;ç›®å½•çš„è·¯å¾„ï¼š<br>Adb push foo.txt &#x2F;sdcard&#x2F;foo.txt</p>
<h3 id="åœæ­¢adbæœåŠ¡å™¨"><a href="#åœæ­¢adbæœåŠ¡å™¨" class="headerlink" title="åœæ­¢adbæœåŠ¡å™¨"></a>åœæ­¢adbæœåŠ¡å™¨</h3><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦ç»ˆæ­¢adbæœåŠ¡å™¨è¿›ç¨‹ï¼Œç„¶åé‡å¯ä»¥è§£å†³é—®é¢˜ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœadbä¸å“åº”å‘½ä»¤ï¼‰ã€‚<br>å¦‚éœ€åœæ­¢adbæœåŠ¡å™¨ï¼Œè¯·ä½¿ç”¨adb kill-serverå‘½ä»¤ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥é€šè¿‡å‘å‡ºå…¶ä»–ä»»ä½•adbå‘½ä»¤æ¥é‡å¯æœåŠ¡å™¨ã€‚</p>
<h3 id="å‘å‡ºadbå‘½ä»¤"><a href="#å‘å‡ºadbå‘½ä»¤" class="headerlink" title="å‘å‡ºadbå‘½ä»¤"></a>å‘å‡ºadbå‘½ä»¤</h3><p>å¯ä»¥ä»å¼€å‘æœºå™¨ä¸Šçš„å‘½ä»¤è¡Œå‘å‡ºadbå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è„šæœ¬å‘å‡ºï¼Œç”¨æ³•å¦‚ä¸‹ï¼š<br>adb [-d | -e | -s  serial_number] command<br>å¦‚æœåªæœ‰ä¸€ä¸ªæ¨¡æ‹Ÿå™¨åœ¨è¿è¡Œæˆ–è€…åªè¿æ¥äº†ä¸€ä¸ªè®¾å¤‡ï¼Œç³»ç»Ÿä¼šé»˜è®¤å°†adbå‘½ä»¤å‘é€åˆ°è¯¥è®¾å¤‡ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¨¡æ‹Ÿå™¨åœ¨è¿è¡Œå¹¶ä¸”&#x2F;æˆ–è€…è¿æ¥äº†å¤šä¸ªè®¾å¤‡ï¼Œæ‚¨éœ€è¦ä½¿ç”¨-dã€-eã€-sé€‰é¡¹æŒ‡å®šåº”å‘å…¶å‘é€å‘½ä»¤çš„ç›®æ ‡è®¾å¤‡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„adbå‘½ä»¤çš„è¯¦ç»†åˆ—è¡¨ï¼š<br>adb â€“help</p>
<h3 id="å‘å‡ºshellå‘½ä»¤"><a href="#å‘å‡ºshellå‘½ä»¤" class="headerlink" title="å‘å‡ºshellå‘½ä»¤"></a>å‘å‡ºshellå‘½ä»¤</h3><p>å¯ä»¥ä½¿ç”¨shellå‘½ä»¤é€šè¿‡adbå‘å‡ºè®¾å¤‡å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å¯äº¤äº’å¼shellã€‚å¦‚éœ€å‘å‡ºå•ä¸ªå‘½ä»¤ï¼Œè¯·ä½¿ç”¨shellå‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>adb shell shell_command<br>è¦åœ¨è®¾å¤‡ä¸Šå¯åŠ¨äº¤äº’å¼shellï¼Œè¯·ä½¿ç”¨shellå‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š<br>adb shell<br>è¦é€€å‡ºäº¤äº’å¼shellï¼ŒæŒ‰åˆcrtl+Dæˆ–è€…è¾“å…¥exit</p>
<h3 id="ä»æ‰‹æœºä¸Šå¯¼å‡ºåº”ç”¨è½¯ä»¶apkæ–‡ä»¶"><a href="#ä»æ‰‹æœºä¸Šå¯¼å‡ºåº”ç”¨è½¯ä»¶apkæ–‡ä»¶" class="headerlink" title="ä»æ‰‹æœºä¸Šå¯¼å‡ºåº”ç”¨è½¯ä»¶apkæ–‡ä»¶"></a>ä»æ‰‹æœºä¸Šå¯¼å‡ºåº”ç”¨è½¯ä»¶apkæ–‡ä»¶</h3><p>ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹appåŒ…å<br>adb shell ammonitor<br>è¿™ä¸ªæ—¶å€™ç‚¹å‡»è¿è¡Œæ‰‹æœºä¸Šè¦çœ‹çš„åŒ…åçš„appï¼Œå°±å¯ä»¥çœ‹åˆ°å¯åŠ¨çš„åŒ…åäº†<br>ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹åŒ…å­˜æ”¾çš„è·¯å¾„<br>adb shell pm path com.eda.abcd<br>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥çœ‹åˆ°è¯¥åº”ç”¨ç¨‹åºçš„åŒ…å­˜æ”¾è·¯å¾„<br>ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨adb pull + åŒ…å­˜æ”¾è·¯å¾„<br>å°†apkå¯¼å‡ºåˆ°ç”µè„‘</p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Android developer å¿…å¤‡çš„å‡ ä¸ªèµ„æº</title>
    <url>/2023/02/22/Android-developer-%E5%BF%85%E5%A4%87%E7%9A%84%E5%87%A0%E4%B8%AA%E8%B5%84%E6%BA%90/</url>
    <content><![CDATA[<p>ä½œä¸ºä¸€ååˆæ ¼çš„ Android Coderï¼Œé™¤äº†è®¤çœŸå·¥ä½œï¼Œå†™å‡ºä¼˜ç§€ä»£ç å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æ—¥æ–°æœˆå¼‚çš„æŠ€æœ¯æ ˆä¸­æ‰¾åˆ°æœ‰ç”¨çš„èµ„æºï¼Œæ¥è£…å¤‡è‡ªå·±ï¼Œå¼€é˜”è§†é‡ã€‚å¸Œæœ›ä»¥ä¸‹çš„èµ„æºå¯¹å¤§å®¶æœ‰ç”¨ã€‚</p>
<span id="more"></span>

<h2 id="1-å®˜æ–¹èµ„æº"><a href="#1-å®˜æ–¹èµ„æº" class="headerlink" title="1.å®˜æ–¹èµ„æº"></a>1.å®˜æ–¹èµ„æº</h2><p>ä¸€æ‰‹ã€æœ€æ–°ã€æœ€å…¨çš„èµ„æ–™ã€‚<br><a href="https://imgse.com/i/p9ZShM8"><img src="https://s1.ax1x.com/2023/04/22/p9ZShM8.png" alt="p9ZShM8.png"></a><br>åŒ…å« Android Platformã€Android Studioã€Jetpackã€Kotlin ç­‰ä¸€åˆ‡è·Ÿ Android å¼€å‘ç›¸å…³çš„æŒ‡å¯¼ã€ä¾‹å­Sample ç­‰ã€‚å¤§éƒ¨åˆ†äººè‚¯å®šéƒ½çŸ¥é“ã€‚<br>å»ºè®®æ¯éš”ä¸€æ®µæ—¶é—´ä¸Šå»çœ‹çœ‹ï¼Œç»å¸¸æ›´æ–°ï¼Œæ¯”å¦‚æœ€è¿‘å¢åŠ äº†æ¨¡å—åŒ–çš„æŒ‡å¯¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–æ¶æ„ç›¸å…³çš„å†…å®¹ï¼Œä¸ç®¡æ˜¯åˆå­¦è€…è¿˜æ˜¯åˆå­¦è€…ï¼Œ<br>éƒ½æœ‰å¾ˆå¤šæŒ‡å¯¼ã€å­¦ä¹ çš„æ„ä¹‰ã€‚</p>
<p>å…¶ä»–å®˜æ–¹èµ„æºï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>Android Developers on Medium <a href="https://medium.com/androiddevelopers">https://medium.com/androiddevelopers</a></li>
<li>Android Developers on YouTube <a href="https://www.youtube.com/@AndroidDevelopers">https://www.youtube.com/@AndroidDevelopers</a></li>
<li>Google Codelabs <a href="https://codelabs.developers.google.com/?product=android">https://codelabs.developers.google.com/?product=android</a></li>
</ul>
<p>ç½‘å€ï¼š<a href="https://developer.android.com/docs">https://developer.android.com/docs</a></p>
<h2 id="2-Android-Weekly"><a href="#2-Android-Weekly" class="headerlink" title="2.Android Weekly"></a>2.Android Weekly</h2><p><a href="https://imgse.com/i/p9ZprlV"><img src="https://s1.ax1x.com/2023/04/22/p9ZprlV.png" alt="p9ZprlV.png"></a><br>èšåˆäº†æœ€è¿‘ã€æœ€æ–°çš„ Android ç›¸å…³çš„æ–‡ç« ã€å¼€æºé¡¹ç›®ã€è§†é¢‘&amp;æ’­å®¢ã€æ–°é—»ç­‰ï¼Œæ¯å‘¨ä¸€æ›´æ–°ï¼Œä¸å®¹é”™è¿‡ã€‚</p>
<p>ç½‘å€ï¼š<a href="https://androidweekly.net/">https://androidweekly.net/</a></p>
<h2 id="3-kotlin-Weekly"><a href="#3-kotlin-Weekly" class="headerlink" title="3.kotlin Weekly"></a>3.kotlin Weekly</h2><p><a href="https://imgse.com/i/p9Zpgw4"><img src="https://s1.ax1x.com/2023/04/22/p9Zpgw4.png" alt="p9Zpgw4.png"></a><br>ç±»ä¼¼äºä¸Šé¢çš„ Android Weeklyï¼Œä¸»è¦æä¾›ä¸€äº› kotlin ç›¸å…³æŠ€æœ¯æ ˆæ›´æ–°ã€æ–‡ç« ã€æ–°ç‰¹æ€§ç­‰ï¼Œä¹ŸåŒ…æ‹¬äº†ä¸€äº› Android ç›¸å…³çš„å†…å®¹ã€‚</p>
<p>ç½‘å€ï¼š<a href="http://www.kotlinweekly.net/">http://www.kotlinweekly.net/</a></p>
<h2 id="4-ProAndroidDev"><a href="#4-ProAndroidDev" class="headerlink" title="4.ProAndroidDev"></a>4.ProAndroidDev</h2><p><a href="https://imgse.com/i/p9Zphf1"><img src="https://s1.ax1x.com/2023/04/22/p9Zphf1.png" alt="p9Zphf1.png"></a><br>Mediumï¼ˆå›½å¤–çš„ç®€ä¹¦ï¼‰ä¸Šçš„ä¸€ä¸ªç»„ç»‡ï¼Œéƒ½æ˜¯ Androidä¸“å®¶å’Œå¤§ç‰›ï¼ˆGoogle Developer Expertsï¼‰å†™çš„ä¸€äº›æ˜“æ‡‚ã€ç®€æ´çš„æ–‡ç« ï¼Œè´¨é‡ä¸é”™ã€‚è€Œä¸”ï¼Œå¦‚æœä½ è¦åœ¨è¯¥ä¸“æ å‘å¸ƒæ–‡ç« çš„è¯ï¼Œéœ€è¦ä¸“å®¶ review æ‰èƒ½å‘å‡ºæ¥ã€‚</p>
<p>ç½‘å€ï¼š<a href="https://proandroiddev.com/">https://proandroiddev.com/</a></p>
<h2 id="5-Github"><a href="#5-Github" class="headerlink" title="5.Github"></a>5.Github</h2><p>è¿™ä¸ªåº”è¯¥éƒ½çŸ¥é“å§ï¼Œæœ€å¤§çš„åŸºå‹äº¤æµç¤¾åŒºï¼Œå…¨ä¸–ç•Œçš„ä»£ç ä»“åº“é›†ä¸­åœ°ã€‚<br>æ¯”å¦‚ Android å®˜æ–¹çš„ä»“åº“ï¼Œ<a href="https://github.com/android%EF%BC%8C%E5%8C%85%E5%90%AB%E5%BE%88%E5%A4%9A%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%8C%E6%AF%94%E5%A6%82">https://github.com/androidï¼ŒåŒ…å«å¾ˆå¤šæœ€ä½³å®è·µï¼Œæ¯”å¦‚</a> Now In Android, architecture-samples,  sunflower ç­‰ã€‚<br>ä¹Ÿå¯ä»¥é€šè¿‡ GitHub Trending page æ¥æŸ¥çœ‹æœ€è¿‘çƒ­é—¨çš„ä»“åº“ï¼Œç±»ä¼¼å¾®åšçƒ­æœğŸ”¥ ï¼ˆç­›é€‰ kotlin è¯­è¨€ï¼Œå‰å‡ ä¸ªå°±æ˜¯ android ç›¸å…³çš„é¡¹ç›®ï¼‰<br>é¡ºä¾¿æ¨èä¸€ä¸ª android-developer-roadmap é¡¹ç›®ï¼ŒåŒ…å«äº†ä¸€äº› Android å¼€å‘çš„èµ„æºï¼š<br><a href="https://imgse.com/i/p9Zpo6K"><img src="https://s1.ax1x.com/2023/04/22/p9Zpo6K.png" alt="p9Zpo6K.png"></a></p>
<h2 id="6-Google-Developer-Library"><a href="#6-Google-Developer-Library" class="headerlink" title="6.Google Developer Library"></a>6.Google Developer Library</h2><p>åˆæ˜¯ä¸€ä¸ªå®è—èµ„æºåº“ï¼<br>è°·æ­Œå®˜æ–¹çš„èµ„æºåº“ï¼ŒåŒ…å«äº† Androidã€Flutterã€Firebase å’Œ Machine Learning ç­‰èµ„æºï¼Œå…‰ Android æ–¹é¢å°±æœ‰ä¸€å¤§å †ï¼Œæ‰“å¼€æ…¢æ…¢çœ‹å§<br><a href="https://imgse.com/i/p9ZpOkd"><img src="https://s1.ax1x.com/2023/04/22/p9ZpOkd.png" alt="p9ZpOkd.png"></a></p>
<h2 id="7-Android-Arsenal"><a href="#7-Android-Arsenal" class="headerlink" title="7.Android Arsenal"></a>7.Android Arsenal</h2><p>å®‰å“å†›ç«åº“ï¼Œèšé›†äº†å¤§é‡çš„å¼€æºåº“ï¼Œå·¥å…·ç­‰ï¼Œæ”¯æŒåˆ†ç±»æŸ¥æ‰¾ã€‚<br>ä¹Ÿå¯ä»¥æäº¤è‡ªå·±çš„å¼€æºåº“ï¼Œé€šè¿‡å®¡æ ¸å°±å¯ä»¥å±•ç¤ºå‡ºæ¥ï¼Œä¾›åˆ«äººä½¿ç”¨ã€‚<br>å…³æ³¨å®ƒçš„æ¨ç‰¹ï¼ŒåŠæ—¶è·å–æœ€æ–°çš„å¼€æºé¡¹ç›®ã€‚</p>
<p>ç½‘å€ï¼š<a href="https://android-arsenal.com/">https://android-arsenal.com/</a></p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>APPæ€§èƒ½ä¼˜åŒ–çš„ä¸€äº›å»ºè®®</title>
    <url>/2022/10/15/APP%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BB%BA%E8%AE%AE/</url>
    <content><![CDATA[<p>é™¤äº†åˆ©ç”¨æ€§èƒ½æµ‹è¯•å·¥å…·åˆ†ææ€§èƒ½åº”ç”¨ï¼Œå¯»æ‰¾ä¼˜åŒ–æ§ä»¶ï¼Œå¼€å‘è€…åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå°±åº”è¯¥æ³¨æ„ä¸€äº›æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå…»æˆè‰¯å¥½çš„å¼€å‘ä¹ æƒ¯ï¼Œå‡è½»æ€§èƒ½ä¼˜åŒ–çš„è´Ÿæ‹…ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¼˜åŒ–å»ºè®®ï¼š</p>
<span id="more"></span>
<p>1.åœ¨LinearLayoutå’ŒRelativeLayoutéƒ½å¯ä»¥å®Œæˆå¸ƒå±€çš„æƒ…å†µä¸‹ä¼˜å…ˆé€‰æ‹©LinearLayoutï¼Œå¯ä»¥å‡å°‘Viewçš„å±‚çº§ï¼Œä½†æ˜¯æ³¨æ„ç›¸åŒç»„ä»¶å¯èƒ½RelativeLayoutç»˜åˆ¶æ—¶é—´é•¿<br>2.onDrawä¸­ä¸è¦åˆ›å»ºæ–°çš„å±€éƒ¨å¯¹è±¡ï¼ŒonDrawæ–¹æ³•ä¸­ä¸è¦åšè€—æ—¶çš„ä»»åŠ¡<br>3.ä¸è¦åœ¨ä¸»çº¿ç¨‹è¿›è¡Œç½‘ç»œè®¿é—®&#x2F;å¤§æ–‡ä»¶çš„IOæ“ä½œ<br>4.ç»˜åˆ¶UIæ—¶ï¼Œå°½é‡å‡å°‘ç»˜åˆ¶UIå±‚æ¬¡ï¼›å‡å°‘ä¸å¿…è¦çš„viewåµŒå¥—<br>5.å½“æˆ‘ä»¬çš„å¸ƒå±€æ˜¯ç”¨çš„FrameLayoutçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¹æˆmergeï¼Œå¯ä»¥é¿å…è‡ªå·±çš„å¸§å¸ƒå±€å’Œç³»ç»Ÿçš„ContentFrameLayoutå¸§å¸ƒå±€é‡å é€ æˆé‡å¤è®¡ç®—ï¼ˆmeasureå’Œlayoutï¼‰<br>6.åœ¨viewå±‚çº§ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨LinearLayoutè€Œä¸æ˜¯RelativeLayoutï¼›å› ä¸ºRelativeLayoutåœ¨æµ‹é‡çš„æ—¶å€™ä¼šæµ‹é‡ä¸¤æ¬¡ï¼Œè€ŒLinearLayoutæµ‹é‡ä¸€æ¬¡<br>7.åˆ é™¤æ§ä»¶ä¸­æ— ç”¨çš„å±æ€§<br>8.å¸ƒå±€å¤ç”¨ï¼Œæ¯”å¦‚listviewå¸ƒå±€å¤ç”¨<br>9.å°½é‡é¿å…è¿‡åº¦ç»˜åˆ¶ï¼ˆoverdrawï¼‰æ¯”å¦‚ï¼šèƒŒæ™¯ç»å¸¸å®¹æ˜“é€ æˆè¿‡åº¦ç»˜åˆ¶ï¼Œç”±äºæˆ‘ä»¬å¸ƒå±€è®¾ç½®äº†èƒŒæ™¯ï¼Œæº¶èš€ç”¨åˆ°MaterialDesignçš„ä¸»é¢˜ä¼šé»˜è®¤ç»™ä¸€ä¸ªèƒŒæ™¯ã€‚è¿™æ—¶åº”è¯¥æŠŠä¸»é¢˜æ·»åŠ çš„èƒŒæ™¯å»æ‰ï¼›è¿˜æœ‰ç§»é™¤XMLä¸­éå¿…é¡»çš„èƒŒæ™¯<br>10.è‡ªå®šä¹‰viewä¼˜åŒ–ï¼Œä½¿ç”¨canvas.clipRect()æ¥å¸®åŠ©ç³»ç»Ÿè¯†åˆ«é‚£äº›å¯è§çš„åŒºåŸŸï¼Œåªæœ‰åœ¨è¿™ä¸ªåŒºåŸŸå†…æ‰ä¼šè¢«ç»˜åˆ¶ã€‚ä¹Ÿæ˜¯é¿å…è¿‡åº¦ç»˜åˆ¶ã€‚<br>11.å¯åŠ¨ä¼˜åŒ–ï¼Œå¯åŠ¨é€Ÿåº¦çš„ç›‘æ§ï¼Œå‘ç°å½±å“å¯åŠ¨é€Ÿåº¦çš„é—®é¢˜æ‰€åœ¨ï¼Œä¼˜åŒ–å¯åŠ¨é€»è¾‘ï¼Œæé«˜åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ã€‚æ¯”å¦‚é—ªå±é¡µé¢ï¼Œåˆç†ä¼˜åŒ–å¸ƒå±€ï¼ŒåŠ è½½é€»è¾‘ä¼˜åŒ–ï¼Œæ•°æ®å‡†å¤‡ã€‚<br>12.åˆç†çš„åˆ·æ–°æœºåˆ¶ï¼Œå°½é‡å‡å°‘åˆ·æ–°æ¬¡æ•°ï¼Œå°½é‡é¿å…åå°æœ‰é«˜çš„CPUçº¿ç¨‹è¿è¡Œï¼Œç¼©å°åˆ·æ–°åŒºåŸŸã€‚</p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidæ–‡ä»¶ç®¡ç†</title>
    <url>/2022/12/07/Android%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h2 id="1-Androidæ–‡ä»¶çš„æ“ä½œæ¨¡å¼"><a href="#1-Androidæ–‡ä»¶çš„æ“ä½œæ¨¡å¼" class="headerlink" title="1.Androidæ–‡ä»¶çš„æ“ä½œæ¨¡å¼"></a>1.Androidæ–‡ä»¶çš„æ“ä½œæ¨¡å¼</h2><p>Androidå’Œå…¶ä»–çš„æ“ä½œç³»ç»Ÿä¸ä¸€æ ·ï¼Œå®ƒæ˜¯åŸºäºLinuxçš„ï¼Œåœ¨è¯»å†™æ–‡ä»¶çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åŠ ä¸Šæ–‡ä»¶çš„æ“ä½œæ¨¡å¼ï¼ŒAndroidä¸­çš„æ“ä½œæ¨¡å¼å¦‚ä¸‹ï¼š</p>
<span id="more"></span>
<p>1ï¼‰MODE_PRIVATE â€”â€”&gt; é»˜è®¤æ“ä½œæ¨¡å¼ï¼Œä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ç§æœ‰æ•°æ®ï¼Œåªèƒ½å¤Ÿè¢«æœ¬åº”ç”¨æœ¬èº«è®¿é—®ï¼Œå†™å…¥çš„å†…å®¹ä¼šè¦†ç›–åŸæ–‡ä»¶çš„å†…å®¹<br>2ï¼‰MODE_APPEND â€”â€”&gt; ä¼šæ£€éªŒæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨çš„è¯å¾€æ–‡ä»¶ä¸­è¿½åŠ å†…å®¹ï¼Œå¦åˆ™å»ºç«‹æ–°æ–‡ä»¶<br>3ï¼‰MODE_WORLD_READABLE â€”â€”&gt; å½“å‰æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–åº”ç”¨è¯»å–<br>4ï¼‰MODE_WORLD_WRITEABLE â€”â€”&gt; å½“å‰æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–åº”ç”¨å†™å…¥<br>åé¢ä¸¤ä¸ªé€‚ç”¨äºæ§åˆ¶å…¶ä»–åº”ç”¨æ˜¯å¦æœ‰è¯»å†™æ–‡ä»¶å¾—æƒé™å¾—<br>å¦‚æœæ–‡ä»¶æ—¢å¯ä»¥å†™ï¼Œåˆå¯ä»¥è¯»çš„è¯ï¼Œå¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ï¼š<br>openFileOutput(â€œjay123.txtâ€, Content.MODE_WORLD_READABLE + Content.MODE_WORLD_WRITEABLE);</p>
<h2 id="2-æ–‡ä»¶æ“ä½œçš„ç›¸å…³æ–¹æ³•"><a href="#2-æ–‡ä»¶æ“ä½œçš„ç›¸å…³æ–¹æ³•" class="headerlink" title="2.æ–‡ä»¶æ“ä½œçš„ç›¸å…³æ–¹æ³•"></a>2.æ–‡ä»¶æ“ä½œçš„ç›¸å…³æ–¹æ³•</h2><p><a href="https://imgse.com/i/zh3Gz4"><img src="https://s1.ax1x.com/2022/12/11/zh3Gz4.png" alt="zh3Gz4.png"></a></p>
<h2 id="3-ç¤ºä¾‹"><a href="#3-ç¤ºä¾‹" class="headerlink" title="3.ç¤ºä¾‹"></a>3.ç¤ºä¾‹</h2><p>é¦–å…ˆæ˜¯å¸ƒå±€æ–‡ä»¶ï¼šmain_activity.xml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    tools:context=&quot;.FileActivity&quot;</span><br><span class="line">    android:orientation=&quot;horizontal&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;@string/nametitle&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=&quot;@+id/editname&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;@string/detailtitle&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=&quot;@+id/editdetail&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:minLines=&quot;2&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:layout_width=&quot;fill_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:orientation=&quot;horizontal&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/btnsave&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:text=&quot;@string/btnwrite&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Button</span><br><span class="line">            android:id=&quot;@+id/btnclean&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:text=&quot;@string/btnclean&quot; /&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=&quot;@+id/btnread&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;@string/btnread&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†å†™ä¸€ä¸ªæ–‡ä»¶ååŠ©ç±»ï¼šFileHelper.java</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.thefu.androidstudyproject;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line"></span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.IOError;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class FileHelper &#123;</span><br><span class="line"></span><br><span class="line">    private Context context;</span><br><span class="line"></span><br><span class="line">    public FileHelper() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public FileHelper(Context context) &#123;</span><br><span class="line">        super();</span><br><span class="line">        this.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿™é‡Œå®šä¹‰çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¿å­˜çš„æ–¹æ³•ï¼Œå†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥æ˜¯è¾“å‡ºæµ</span><br><span class="line">     * @param fileName</span><br><span class="line">     * @param fileContent</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public void save(String fileName, String fileContent) throws Exception &#123;</span><br><span class="line">        //è¿™é‡Œä½¿ç”¨ç§æœ‰æ¨¡å¼ï¼Œåˆ›å»ºå‡ºæ¥çš„æ–‡ä»¶åªèƒ½è¢«æœ¬åº”ç”¨è®¿é—®ï¼Œè¿˜ä¼šè¦†ç›–åŸæ–‡ä»¶</span><br><span class="line">        FileOutputStream output = context.openFileOutput(fileName, Context.MODE_PRIVATE);</span><br><span class="line">        output.write(fileContent.getBytes()); //å°†Stringå­—ç¬¦ä¸²ä»¥å­—èŠ‚çš„å½¢å¼å†™å…¥åˆ°è¾“å‡ºæµä¸­</span><br><span class="line">        output.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿™é‡Œå®šä¹‰çš„æ˜¯æ–‡ä»¶è¯»å–çš„æ–¹æ³•</span><br><span class="line">     * @param fileName</span><br><span class="line">     * @return</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public String read(String fileName) throws IOException &#123;</span><br><span class="line">        //æ‰“å¼€æ–‡ä»¶è¾“å…¥æµ</span><br><span class="line">        FileInputStream input = context.openFileInput(fileName);</span><br><span class="line">        byte[] temp = new byte[1024];</span><br><span class="line">        StringBuilder sb = new StringBuilder(&quot;&quot;);</span><br><span class="line">        int len = 0;</span><br><span class="line">        //è¯»å–æ–‡ä»¶å†…å®¹</span><br><span class="line">        while ((len = input.read(temp)) &gt; 0) &#123;</span><br><span class="line">            sb.append(new String(temp, 0, len));</span><br><span class="line">        &#125;</span><br><span class="line">        //å…³é—­è¾“å…¥æµ</span><br><span class="line">        input.close();</span><br><span class="line">        return sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åæ˜¯Activityï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å®Œæˆç›¸å…³æ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.thefu.androidstudyproject;</span><br><span class="line"></span><br><span class="line">import androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.widget.Button;</span><br><span class="line">import android.widget.EditText;</span><br><span class="line">import android.widget.Toast;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class FileActivity extends AppCompatActivity implements View.OnClickListener&#123;</span><br><span class="line"></span><br><span class="line">    private EditText editname;</span><br><span class="line">    private EditText editdetail;</span><br><span class="line">    private Button btnsave;</span><br><span class="line">    private Button btnclean;</span><br><span class="line">    private Button btnread;</span><br><span class="line">    private Context mContext;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_file);</span><br><span class="line">        mContext = getApplicationContext();</span><br><span class="line">        bindView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void bindView() &#123;</span><br><span class="line">        editdetail = (EditText) findViewById(R.id.editdetail);</span><br><span class="line">        editname = (EditText) findViewById(R.id.editname);</span><br><span class="line">        btnclean = (Button) findViewById(R.id.btnclean);</span><br><span class="line">        btnsave = (Button) findViewById(R.id.btnsave);</span><br><span class="line">        btnread = (Button) findViewById(R.id.btnread);</span><br><span class="line"></span><br><span class="line">        btnclean.setOnClickListener(this);</span><br><span class="line">        btnsave.setOnClickListener(this);</span><br><span class="line">        btnread.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View view) &#123;</span><br><span class="line">        switch (view.getId()) &#123;</span><br><span class="line">            case R.id.btnclean:</span><br><span class="line">                editdetail.setText(&quot;&quot;);</span><br><span class="line">                editname.setText(&quot;&quot;);</span><br><span class="line">                break;</span><br><span class="line">            case R.id.btnsave:</span><br><span class="line">                FileHelper fHelper = new FileHelper(mContext);</span><br><span class="line">                String filename = editname.getText().toString();</span><br><span class="line">                String filedetail = editdetail.getText().toString();</span><br><span class="line">                try &#123;</span><br><span class="line">                    fHelper.save(filename, filedetail);</span><br><span class="line">                    Toast.makeText(getApplicationContext(), &quot;æ•°æ®å†™å…¥æˆåŠŸ&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125; catch (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    Toast.makeText(getApplicationContext(), &quot;æ•°æ®å†™å…¥å¤±è´¥&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case R.id.btnread:</span><br><span class="line">                String detail = &quot;&quot;;</span><br><span class="line">                FileHelper fHelper2 = new FileHelper(getApplicationContext());</span><br><span class="line">                try &#123;</span><br><span class="line">                    String fname = editname.getText().toString();</span><br><span class="line">                    detail = fHelper2.read(fname);</span><br><span class="line">                &#125; catch (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                Toast.makeText(getApplicationContext(), detail, Toast.LENGTH_SHORT).show();</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-è¯»å–SDå¡ä¸Šçš„æ–‡ä»¶"><a href="#4-è¯»å–SDå¡ä¸Šçš„æ–‡ä»¶" class="headerlink" title="4.è¯»å–SDå¡ä¸Šçš„æ–‡ä»¶"></a>4.è¯»å–SDå¡ä¸Šçš„æ–‡ä»¶</h2><p><a href="https://imgse.com/i/zh3BFK"><img src="https://s1.ax1x.com/2022/12/11/zh3BFK.png" alt="zh3BFK.png"></a></p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidæ¨ªç«–å±åˆ‡æ¢ä»¥åŠå¯¹åº”å¸ƒå±€åŠ è½½</title>
    <url>/2022/11/10/Android%E6%A8%AA%E7%AB%96%E5%B1%8F%E5%88%87%E6%8D%A2%E4%BB%A5%E5%8F%8A%E5%AF%B9%E5%BA%94%E5%B8%83%E5%B1%80%E5%8A%A0%E8%BD%BD/</url>
    <content><![CDATA[<p>å¦‚æœè¦è®©è½¯ä»¶åœ¨æ¨ªç«–å±ä¹‹é—´åˆ‡æ¢ï¼Œç”±äºæ¨ªç«–å±çš„å®½é«˜ä¼šå‘ç”Ÿè½¬æ¢ï¼Œæœ‰å¯èƒ½ä¼šè¦æ±‚ä¸åŒçš„å¸ƒå±€ã€‚</p>
<span id="more"></span>
<h1 id="1-æ¨ªç«–å±åˆ‡æ¢è¿å¸¦æ¨ªç«–å±å¸ƒå±€é—®é¢˜ï¼š"><a href="#1-æ¨ªç«–å±åˆ‡æ¢è¿å¸¦æ¨ªç«–å±å¸ƒå±€é—®é¢˜ï¼š" class="headerlink" title="1.æ¨ªç«–å±åˆ‡æ¢è¿å¸¦æ¨ªç«–å±å¸ƒå±€é—®é¢˜ï¼š"></a>1.æ¨ªç«–å±åˆ‡æ¢è¿å¸¦æ¨ªç«–å±å¸ƒå±€é—®é¢˜ï¼š</h1><p>å¦‚æœè¦è®©è½¯ä»¶åœ¨æ¨ªç«–å±ä¹‹é—´åˆ‡æ¢ï¼Œç”±äºæ¨ªç«–å±çš„å®½é«˜ä¼šå‘ç”Ÿè½¬æ¢ï¼Œæœ‰å¯èƒ½ä¼šè¦æ±‚ä¸åŒçš„å¸ƒå±€ã€‚<br>å¯ä»¥é€šè¿‡ä¸€ä¸‹ä¸¤ç§æ–¹æ³•åˆ‡æ¢å¸ƒå±€ï¼š<br>1ï¼‰åœ¨resç›®å½•ä¸‹å»ºç«‹layout-landå’Œlayout-portç›®å½•ï¼Œç›¸åº”çš„layoutæ–‡ä»¶åä¸å˜ï¼Œæ¯”å¦‚ï¼šlayout-landæ˜¯æ¨ªå±çš„ï¼Œlayout-portæ˜¯ç«–å±çš„æ—¶å€™ï¼Œå…¶ä»–çš„ä¸ç”¨ç®¡ï¼Œæ¨ªç«–å±åˆ‡æ¢æ—¶ç¨‹åºè°ƒç”¨Activityçš„onCreateæ–¹æ³•ä¸­çš„setOnContent(xxx)ï¼Œå¹¶è‡ªåŠ¨åŠ è½½ç›¸åº”çš„å¸ƒå±€ã€‚<br>2ï¼‰å‡å¦‚å¸ƒå±€èµ„æºä¸æŒ‰ç…§å¦‚ä¸Šè®¾ç½®ï¼Œåˆ™å¯ä»¥é€šè¿‡Javaä»£ç æ¥åˆ¤æ–­å½“å‰æ˜¯æ¨ªå±è¿˜æ˜¯ç«–å±ç„¶åæ¥åŠ è½½ç›¸åº”çš„xmlå¸ƒå±€æ–‡ä»¶ã€‚å› ä¸ºå½“å±å¹•å˜ä¸ºæ¨ªå±çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šé‡æ–°åŠ è½½å½“å‰Activityçš„onCreateæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼šè¯¥Activityçš„å£°æ˜å‘¨æœŸè¦é‡å¤´å¼€å§‹ï¼‰ï¼Œä½ å¯ä»¥æŠŠä»¥ä¸‹æ–¹æ³•æ”¾åœ¨ä½ çš„onCreateä¸­æ¥æ£€æŸ¥å½“å‰çš„æ–¹æ³•ï¼Œç„¶åå¯ä»¥è®©ä½ çš„setContentVIewæ¥è½½å…¥ä¸åŒçš„layout</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Private int orientation;</span><br><span class="line">Orientation = getResources().getConfiguration().orientation;</span><br></pre></td></tr></table></figure>
<h1 id="2-å¼ºåˆ¶è®¾å®šå±å¹•çš„æ¨ªç«–å±æ–¹å‘"><a href="#2-å¼ºåˆ¶è®¾å®šå±å¹•çš„æ¨ªç«–å±æ–¹å‘" class="headerlink" title="2.å¼ºåˆ¶è®¾å®šå±å¹•çš„æ¨ªç«–å±æ–¹å‘"></a>2.å¼ºåˆ¶è®¾å®šå±å¹•çš„æ¨ªç«–å±æ–¹å‘</h1><p>androidæ¨ªç«–å±åˆ‡æ¢åœ¨æ‰‹æœºå¼€å‘ä¸­æ¯”è¾ƒå¸¸è§ï¼Œå¾ˆå¤šè½¯ä»¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ºäº†é¿å…æ¨ªç«–å±åˆ‡æ¢æ—¶å¼•å‘ä¸å¿…è¦çš„éº»çƒ¦ï¼Œé€šå¸¸è¦å¼ºåˆ¶è®¾ç½®æ¨ªç«–å±çš„æ–¹å‘ï¼Œé€šè¿‡åœ¨androidMainfest.xmlä¸­è®¾ç½®activityä¸­çš„android:screenOrientationå±æ€§å€¼æ¥å®ç°ã€‚<br>æ¯”å¦‚ä¸‹åˆ—è®¾ç½®ï¼š<br>æ¨ªå±æ˜¾ç¤ºè®¾ç½®ï¼Œandroid:screenOrientation&#x3D;â€landscapeâ€<br>ç«–å±æ˜¾ç¤ºè®¾ç½®ï¼Œandroid:screenOrientation&#x3D;â€portraitâ€<br>å½“ç„¶ä¸Šè¿°ä¿®æ”¹ä¹Ÿå¯ä»¥åœ¨Javaä»£ç ä¸­é€šè¿‡ä»£ç å®ç°ï¼šï¼ˆandroidå±å¹•çš„åˆ‡æ¢ä¼šé‡å¯Activityï¼Œæ‰€ä»¥åœ¨Activityé”€æ¯å‰ä¿å­˜å½“å‰æ´»åŠ¨çš„çŠ¶æ€ï¼Œå¹¶åœ¨Activityå†æ¬¡Createçš„æ—¶å€™è½½å…¥é…ç½®ï¼‰<br>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE)</p>
<h1 id="3-æ‹¦æˆªæ¨ªç«–å±åˆ‡æ¢-éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼šonConfigurationChanged"><a href="#3-æ‹¦æˆªæ¨ªç«–å±åˆ‡æ¢-éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼šonConfigurationChanged" class="headerlink" title="3.æ‹¦æˆªæ¨ªç«–å±åˆ‡æ¢ éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼šonConfigurationChanged"></a>3.æ‹¦æˆªæ¨ªç«–å±åˆ‡æ¢ éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼šonConfigurationChanged</h1><p>Activityæ¯æ¬¡æ¨ªç«–å±åˆ‡æ¢éƒ½ä¼šé‡æ–°è°ƒç”¨onPause-&gt;onStop-&gt;onDestory-&gt;onCreate-&gt;onStart-&gt;onResumeï¼ˆä¸ºæ­¤å†…å®¹å’Œæ•°æ®è¦ä¿å­˜å’Œè¯»å–ï¼Œå¦åˆ™è½¬å±ä¹‹å‰å†…å®¹å°†å°±ä¼šæ¶ˆå¤±äº†ï¼‰<br>å¾ˆå¤šæ—¶å€™è¿™æ ·çš„ç»“æœè®©ç¨‹åºç¹çï¼Œä¸ºæ­¤androidæä¾›äº†åœ¨mainfestä¸­è®¾ç½®android:configChangeså±æ€§ï¼Œä»è€Œè®©activityä¸å»¶ç»­ä¸Šè¿°çš„é‡å»ºæµç¨‹ï¼›<br>æ–¹å¼ä¸€ï¼šåœ¨androidå·¥ç¨‹çš„Mainfest.xmlä¸­é…ç½®activityï¼šandroid:configChanges&#x3D;â€keyboardHidden|orientationâ€ï¼Œæ¨ªç«–å±åˆ‡æ¢ä¹‹åå°±ä¸ä¼šå»æ‰§è¡ŒOnCreateå‡½æ•°äº†ï¼Œè€Œæ˜¯ä¼šå»è°ƒç”¨onConfigurationChanged()è¿™æ ·å°±èƒ½æ§åˆ¶æ¨ªç«–å±çš„åˆ‡æ¢äº†ã€‚<br>æ–¹å¼äºŒï¼šç”¨æˆ·å¯ä»¥åœ¨Activityæˆ–Viewçš„ï¼šonConfigurationChanged(configuration config)ï¼Œå‡½æ•°ä¸­è·å–å½“å‰æ¨ªç«–å±å‚æ•°ï¼Œè‡³äºå…¶è°ƒç”¨é¡ºåºè·Ÿtouchæ—¶é—´çš„ä¼ é€’é¡ºåºç›¸ä¼¼ï¼Œä¸è¿‡ä»–æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶çš„æ¦‚å¿µï¼Œä¼šé¡ºæ¬¡è°ƒç”¨åˆ°æ¯ä¸€ä¸ªonConfigurationChangedå‡½æ•°ã€‚<br>éœ€è¦é‡å†™Activityçš„onConfigurationChangedæ–¹æ³•ã€‚å®ç°æ–¹å¼å¦‚ä¸‹ï¼Œä¸éœ€è¦åšå¤ªå¤šçš„å†…å®¹ï¼š<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒonConfigurationChangedå‡½æ•°ä¸­åªèƒ½è·å¾—æ¨ªç«–å±åˆ‡æ¢åçš„å‚æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­è·å–ä¸åˆ°æ–°çš„Layoutå’Œæ§ä»¶å°ºå¯¸ä½ç½®ä¿¡æ¯ï¼Œå¦‚æœè¦å¤„ç†å°ºå¯¸å’Œä½ç½®ä¿¡æ¯ï¼Œå¿…é¡»é€šè¿‡æ¶ˆæ¯å¼‚æ­¥æˆ–è€…å»¶æ—¶è°ƒç”¨ï¼›</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line"></span><br><span class="line">       public void onConfigurationChanged(Configuration newConfig) &#123;</span><br><span class="line"></span><br><span class="line">               super.onConfigurationChanged(newConfig);</span><br><span class="line"></span><br><span class="line">               if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) &#123;</span><br><span class="line"></span><br><span class="line">                       // land do nothing is ok</span><br><span class="line"></span><br><span class="line">               &#125; else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) &#123;</span><br><span class="line"></span><br><span class="line">                       // port do nothing is ok</span><br><span class="line"></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<h1 id="4-è‡ªé€‚åº”åˆ‡æ¢å±å¹•ï¼š"><a href="#4-è‡ªé€‚åº”åˆ‡æ¢å±å¹•ï¼š" class="headerlink" title="4.è‡ªé€‚åº”åˆ‡æ¢å±å¹•ï¼š"></a>4.è‡ªé€‚åº”åˆ‡æ¢å±å¹•ï¼š</h1><p>å¦‚æœæƒ³è®©å®ƒå¯åŠ¨çš„æ—¶å€™æ˜¯æ¨ªå±çš„è¯å°±æ¨ªå±è¡¨ç¤ºï¼Œçºµå±çš„è¯å°±çºµå±è¡¨ç¤ºï¼Œç„¶åæ‰‹æœºåˆ‡æ¢æ¨ªç«–å±å°±ä¸èƒ½ç”¨äº†è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ<br>é¦–å…ˆï¼šåœ¨Mainfest.xmlä¸­è¿½åŠ android:screenOrientation&#x3D;â€sensorâ€<br>android:configurationChanges&#x3D;â€orientation|keyboardHiddenâ€<br>ç„¶åï¼šå–å¾—å±å¹•çš„é•¿å’Œå®½ï¼Œè¿›è¡Œæ¯”è¾ƒè®¾ç½®æ¨ªç«–å±çš„å˜é‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Display display = getWindowManager().getDefaultDisplay();</span><br><span class="line">    int width = display.getWidth();</span><br><span class="line">    int height = display.getHeight();</span><br><span class="line">    if (width &gt; height) &#123;</span><br><span class="line">      orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE; // æ¨ªå±</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      orientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT; // ç«–å±</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">ç„¶åï¼šåœ¨onConfigurationChanged()å‡½æ•°ä¸­è¿½åŠ this.setRequestedOrientation(orientation)</span><br><span class="line">public void onConfigurationChanged(Configuration newConfig) &#123; </span><br><span class="line">         super.onConfigurationChanged(newConfig); </span><br><span class="line">         this.setRequestedOrientation(orientation); </span><br><span class="line">       &#125; </span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™æ ·çš„è¯ä½ åˆ‡åˆ°åˆ«çš„ç”»é¢çš„æ—¶å€™å†å›åˆ°åŸç”»é¢ï¼Œå®ƒå°±ä»ç„¶æ˜¯æ¨ªçš„æˆ–è€…æ˜¯çºµçš„ã€‚æ€ä¹ˆè®©å®ƒä»åˆ«çš„å±å¹•å›æ¥åï¼Œåˆé‡æ–°æ¨ªç«–å±å¸ƒå±€å‘¢ï¼Ÿ<br>åªè¦åœ¨onResume()ä¸­å†è®¾å®šä¸‹å°±è¡Œäº†ï¼Œä½†æ˜¯è¿™ä¸ªä»…ä»…åªæ˜¯æ”¯æŒæ¨ªç«–å±åªæœ‰ä¸€ä¸ªlayoutçš„ï¼›</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">protected void onResume() &#123;</span><br><span class="line">    orientation = ActivityInfo.SCREEN_ORIENTATION_USER;</span><br><span class="line">    this.setRequestedOrientation(orientation);</span><br><span class="line">    Display display = getWindowManager().getDefaultDisplay();</span><br><span class="line">    int width = display.getWidth();</span><br><span class="line">    int height = display.getHeight();</span><br><span class="line">    if (width &gt; height) &#123;</span><br><span class="line">      orientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      orientation = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;</span><br><span class="line">    &#125;</span><br><span class="line">    super.onResume();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸‰ç‚¹æ³¨æ„ï¼š<br>1.ä¸è®¾ç½®activityçš„android:confiChangesæ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡<br>2.è®¾ç½®Activityçš„android:configChanges&#x3D;â€orientationâ€æ—¶ï¼Œåˆ‡å±è¿˜æ˜¯ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªç«–å±æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡<br>3.è®¾ç½®activityçš„android:configChanges&#x3D;â€orientation|keyboardHiddenâ€æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡ŒonConfigurationChangedæ–¹æ³•</p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå·¥ç¨‹é¡¹ç›®ç»“æ„è§£æ</title>
    <url>/2022/11/10/Android%E5%B7%A5%E7%A8%8B%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>androidå·¥ç¨‹çš„é‡ç‚¹ç›®å½•è§£æ</p>
<span id="more"></span>

<p><img src="https://s3.bmp.ovh/imgs/2022/11/10/7b843f31f0a99719.png"></p>
<p>æ¥ä¸‹æ¥å¯¹å…³é”®éƒ¨åˆ†è¿›è¡Œè®²è§£ï¼š<br>Javaï¼Œæˆ‘ä»¬å†™Javaä»£ç çš„åœ°æ–¹ï¼Œä¸šåŠ¡åŠŸèƒ½éƒ½åœ¨è¿™é‡Œå®ç°<br>resï¼Œæˆ‘ä»¬å­˜æ”¾å„ç§èµ„æºæ–‡ä»¶çš„åœ°æ–¹ï¼Œæœ‰å›¾ç‰‡ï¼Œå­—ç¬¦ä¸²ï¼ŒåŠ¨ç”»ï¼ŒéŸ³é¢‘ï¼Œè¿˜æœ‰å„ç§å½¢å¼çš„xmlæ–‡ä»¶</p>
<h1 id="ä¸€ã€resèµ„æºæ–‡ä»¶å¤¹ä»‹ç»ï¼š"><a href="#ä¸€ã€resèµ„æºæ–‡ä»¶å¤¹ä»‹ç»ï¼š" class="headerlink" title="ä¸€ã€resèµ„æºæ–‡ä»¶å¤¹ä»‹ç»ï¼š"></a>ä¸€ã€resèµ„æºæ–‡ä»¶å¤¹ä»‹ç»ï¼š</h1><p>æ³¨ï¼šè¯´é“è¿™ä¸ªresç›®å½•ï¼Œå¦å¤–è¿˜æœ‰ä¸€ä¸ªassetsç›®å½•ï¼Œè™½ç„¶è¿™é‡Œæ²¡æœ‰ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äºæ˜¯å¦å‰è€…ä¸‹æ‰€æœ‰çš„èµ„æºæ–‡ä»¶éƒ½ä¼šåœ¨R.javaæ–‡ä»¶ä¸‹ç”Ÿæˆå¯¹åº”çš„èµ„æºidï¼Œè€Œåè€…å¹¶ä¸ä¼šï¼›å‰è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡èµ„æºidè®¿é—®åˆ°å¯¹åº”çš„èµ„æºï¼›è€Œåè€…åˆ™éœ€è¦æˆ‘ä»¬é€šè¿‡AssetManagerä»¥äºŒè¿›åˆ¶çš„å½¢å¼æ¥è¯»å–äº†ã€‚è¿™ä¸ªRæ–‡ä»¶å¯ä»¥ç†è§£ä¸ºå­—å…¸ï¼Œresä¸‹æ¯ä¸ªèµ„æºéƒ½ä¼šåœ¨è¿™é‡Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„idã€‚<br>åˆ†è¾¨ç‡ä¸åŒçš„ç³»ç»Ÿä¼šæ ¹æ®å±å¹•çš„åˆ†è¾¨ç‡æ¥é€‰æ‹©hdpi,mdpi,xmdpi,xxhdpiä¸‹çš„å¯¹åº”å›¾ç‰‡ï¼Œæ‰€ä»¥ä½ è§£å‹åˆ«äººçš„apkå¯ä»¥çœ‹åˆ°ä¸Šè¿°ç›®å½•ç»Ÿä¸€åç§°çš„å›¾ç‰‡ï¼Œåœ¨å››ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½æœ‰ï¼Œåªæ˜¯å¤§å°å’Œåƒç´ ä¸ä¸€æ ·è€Œå·²ï¼Œå½“ç„¶ï¼Œè¿™ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠæ‰€æœ‰å›¾ç‰‡éƒ½ä¸¢åˆ°hdpiä¸‹çš„è¯ï¼Œæœ¬è¯¥åŠ è½½ldpiæ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡èµ„æºï¼Œä½†æ˜¯ldpiä¸‹æ²¡æœ‰ï¼Œé‚£ä¹ˆåŠ è½½çš„è¿˜ä¼šä½¿hdpiä¸‹çš„å›¾ç‰‡ï¼Œå¦å¤–è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚hdpiï¼Œmdpiç›®å½•ä¸‹æœ‰ldpiä¸‹æ²¡æœ‰ï¼Œé‚£ä¹ˆä¼šåŠ è½½mdpiä¸­çš„èµ„æºï¼åŸåˆ™æ˜¯ä½¿ç”¨æœ€æ¥è¿‘å¯†åº¦çº§åˆ«ï¼Œå¦å¤–å¦‚æœä½ æƒ³ç¦æ­¢androidä¸è·Ÿéšå±å¹•å¯†åº¦åŠ è½½ä¸åŒæ–‡ä»¶å¤¹çš„èµ„æºï¼Œåªéœ€åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­æ·»åŠ android:anyDensity&#x3D;â€falseâ€å­—æ®µå³å¯ã€‚</p>
<h2 id="1-å›¾ç‰‡èµ„æº"><a href="#1-å›¾ç‰‡èµ„æº" class="headerlink" title="1.å›¾ç‰‡èµ„æº"></a>1.å›¾ç‰‡èµ„æº</h2><ul>
<li>drawableï¼šå­˜æ”¾å„ç§ä½å›¾æ–‡ä»¶ï¼Œ(.pngï¼Œ.jpgï¼Œ.9pngï¼Œ.gifç­‰)é™¤æ­¤ä¹‹å¤–å¯èƒ½æ˜¯ä¸€äº›å…¶ä»–çš„drawableç±»å‹çš„XMLæ–‡ä»¶</li>
<li>mipmap-hdpiï¼šé«˜åˆ†è¾¨ç‡ï¼Œä¸€èˆ¬æˆ‘ä»¬æŠŠå›¾ç‰‡ä¸¢è¿™é‡Œ</li>
<li>mipmap-mdpiï¼šä¸­ç­‰åˆ†è¾¨ç‡ï¼Œå¾ˆå°‘ï¼Œé™¤éå…¼å®¹çš„çš„æ‰‹æœºå¾ˆæ—§</li>
<li>mipmap-xhdpiï¼šè¶…é«˜åˆ†è¾¨ç‡ï¼Œæ‰‹æœºå±å¹•æè´¨è¶Šæ¥è¶Šå¥½ï¼Œä»¥åä¼°è®¡ä¼šæ…¢æ…¢å¾€è¿™é‡Œè¿‡æ¸¡</li>
<li>mipmap-xxhdpiï¼šè¶…è¶…é«˜åˆ†è¾¨ç‡ï¼Œè¿™ä¸ªåœ¨é«˜ç«¯æœºä¸Šæœ‰æ‰€ä½“ç°</li>
</ul>
<h2 id="2-å¸ƒå±€èµ„æº"><a href="#2-å¸ƒå±€èµ„æº" class="headerlink" title="2.å¸ƒå±€èµ„æº"></a>2.å¸ƒå±€èµ„æº</h2><ul>
<li>layoutï¼šè¯¥ç›®å½•ä¸‹å­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬çš„å¸ƒå±€æ–‡ä»¶ï¼Œå¦å¤–åœ¨ä¸€äº›ç‰¹å®šçš„æœºå‹ä¸Šï¼Œæˆ‘ä»¬åšå±å¹•é€‚é…ï¼Œæ¯”å¦‚480*320è¿™æ ·çš„æ‰‹æœºï¼Œæˆ‘ä»¬ä¼šå¦å¤–åˆ›å»ºä¸€å¥—å¸ƒå±€ï¼Œå°±è¡Œï¼šlayout-480x320è¿™æ ·çš„æ–‡ä»¶å¤¹ï¼</li>
</ul>
<h2 id="3-èœå•èµ„æº"><a href="#3-èœå•èµ„æº" class="headerlink" title="3.èœå•èµ„æº"></a>3.èœå•èµ„æº</h2><ul>
<li>menuï¼šåœ¨ä»¥å‰æœ‰ç‰©ç†èœå•æŒ‰é’®ï¼Œå³menué”®çš„æ‰‹æœºä¸Šï¼Œç”¨çš„è¾ƒå¤šï¼Œç°åœ¨ç”¨çš„å¹¶ä¸å¤šï¼Œèœå•é¡¹ç›¸å…³çš„èµ„æºxmlå¯åœ¨è¿™é‡Œç¼–å†™ï¼Œä¸çŸ¥é“è°·æ­Œä¼šä¸ä¼šå‡ºæ–°çš„ä¸œè¥¿æ¥æ›¿ä»£èœå•äº†~</li>
</ul>
<h2 id="4-valuesç›®å½•"><a href="#4-valuesç›®å½•" class="headerlink" title="4.valuesç›®å½•"></a>4.valuesç›®å½•</h2><ul>
<li>demens.xmlï¼šå®šä¹‰å°ºå¯¸èµ„æº</li>
<li>string.xmlï¼šå®šä¹‰å­—ç¬¦ä¸²èµ„æº</li>
<li>styles.xmlï¼šå®šä¹‰æ ·å¼èµ„æº</li>
<li>colors.xmlï¼šå®šä¹‰é¢œè‰²èµ„æº</li>
<li>arrays.xmlï¼šå®šä¹‰æ•°ç»„èµ„æº</li>
<li>attrs.xmlï¼šè‡ªå®šä¹‰æ§ä»¶æ—¶ç”¨çš„è¾ƒå¤šï¼Œè‡ªå®šä¹‰æ§ä»¶çš„å±æ€§ï¼</li>
<li>themeä¸»é¢˜æ–‡ä»¶ï¼Œå’Œstyleså¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä¼šå¯¹æ•´ä¸ªåº”ç”¨ä¸­çš„Actvitiyæˆ–æŒ‡å®šActivityèµ·ä½œç”¨ï¼Œä¸€èˆ¬æ˜¯æ”¹å˜çª—å£å¤–è§‚çš„ï¼å¯åœ¨Javaä»£ç ä¸­é€šè¿‡setThemeä½¿ç”¨ï¼Œæˆ–è€…åœ¨Androidmanifest.xmlä¸­ä¸º&lt;applicationâ€¦&gt;æ·»åŠ themeçš„å±æ€§ï¼ PS:ä½ å¯èƒ½çœ‹åˆ°è¿‡è¿™æ ·çš„valuesç›®å½•ï¼švalues-w820dpï¼Œvalues-v11ç­‰ï¼Œå‰è€…wä»£è¡¨å¹³æ¿è®¾å¤‡ï¼Œ820dpä»£è¡¨å±å¹•å®½åº¦ï¼›è€Œv11è¿™æ ·ä»£è¡¨åœ¨API(11)ï¼Œå³android 3.0åæ‰ä¼šç”¨åˆ°çš„ï¼</li>
</ul>
<h2 id="5-rawç›®å½•"><a href="#5-rawç›®å½•" class="headerlink" title="5.rawç›®å½•"></a>5.rawç›®å½•</h2><p>ç”¨äºå­˜æ”¾å„ç§åŸç”Ÿèµ„æºï¼ˆéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œä¸€äº›XMLæ–‡ä»¶ç­‰ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡openRawResource(int id)æ¥è·å¾—èµ„æºçš„äºŒè¿›åˆ¶æµï¼Œå…¶å®å’ŒAssetså·®ä¸å¤šï¼Œä¸è¿‡è¿™é‡Œé¢çš„èµ„æºä¼šåœ¨Ræ–‡ä»¶é‡Œç”Ÿæˆä¸€ä¸ªèµ„æºidè€Œå·²<br>6.æœ€åè¿˜æœ‰åŠ¨ç”»çš„ï¼ŒåŠ¨ç”»æœ‰ä¸¤ç§ï¼šå±æ€§åŠ¨ç”»å’Œè¡¥é—´åŠ¨ç”»</p>
<ul>
<li>animatorï¼šå­˜æ”¾å±æ€§åŠ¨ç”»çš„XMLæ–‡ä»¶</li>
<li>animï¼šå­˜æ”¾è¡¥é—´åŠ¨ç”»çš„XMLæ–‡ä»¶</li>
</ul>
<h1 id="äºŒã€æ·±å…¥äº†è§£ä¸‰ä¸ªæ–‡ä»¶"><a href="#äºŒã€æ·±å…¥äº†è§£ä¸‰ä¸ªæ–‡ä»¶" class="headerlink" title="äºŒã€æ·±å…¥äº†è§£ä¸‰ä¸ªæ–‡ä»¶"></a>äºŒã€æ·±å…¥äº†è§£ä¸‰ä¸ªæ–‡ä»¶</h1><p>å·¥ç¨‹ä¸­ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„æ–‡ä»¶ï¼šMainActivity.javaï¼Œ å¸ƒå±€æ–‡ä»¶ï¼šactivity_main.xmlå’Œé…ç½®æ–‡ä»¶AndroidMainfest.xml<br>ä»£ç åˆ†æï¼š</p>
<p>MainAcitivity.java<br><img src="https://s3.bmp.ovh/imgs/2022/11/10/48c14edb5816ca14.png"><br>activity_main.xmlï¼š<br><img src="https://s3.bmp.ovh/imgs/2022/11/10/e8bfda21011a2f54.png"><br>AndroidMainfest.xmlé…ç½®æ–‡ä»¶ï¼š<br><img src="https://s3.bmp.ovh/imgs/2022/11/10/d4a0c330f888bfbe.png"><br>â‘ å¦‚æœappåŒ…å«å…¶ä»–ç»„ä»¶çš„è¯,éƒ½è¦ä½¿ç”¨ç±»å‹è¯´æ˜è¯­æ³•åœ¨è¯¥æ–‡ä»¶ä¸­è¿›è¡Œå£°æ˜ Server:<br>â‘¡æƒé™çš„å£°æ˜: åœ¨è¯¥æ–‡ä»¶ä¸­æ˜¾å¼åœ°å£°æ˜ç¨‹åºéœ€è¦çš„æƒé™,é˜²æ­¢appé”™è¯¯åœ°ä½¿ç”¨æœåŠ¡, ä¸æ°å½“åœ°è®¿é—® èµ„æº,æœ€ç»ˆæé«˜android appçš„å¥å£®æ€§ android.permission.SEND_SMS æœ‰è¿™å¥è¯è¡¨ç¤ºappéœ€è¦ä½¿ç”¨å‘é€ä¿¡æ¯çš„æƒé™,å®‰è£…çš„æ—¶å€™å°±ä¼šæç¤ºç”¨æˆ·, ç›¸å…³æƒé™å¯ä»¥åœ¨sdkå‚è€ƒæ‰‹å†ŒæŸ¥æ‰¾ï¼</p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Android å¼€å‘è°ƒç”¨C++åº“</title>
    <url>/2023/01/15/Android-%E5%BC%80%E5%8F%91%E8%B0%83%E7%94%A8C++%E5%BA%93/</url>
    <content><![CDATA[<p>èƒŒæ™¯ï¼šå®é™…é¡¹ç›®ä¸­çš„ç®—æ³•åº“å¾ˆå¤šéƒ½æ˜¯C++ä»£ç ç¼–å†™çš„ï¼Œè€ŒAndroidå¼€å‘æ˜¯ä½¿ç”¨kotlinæˆ–è€…javaè¯­è¨€å®ç°çš„ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªAPPéœ€è¦è°ƒç”¨ç®—æ³•åº“ï¼Œ<br>ä¸åŒè¯­è¨€æœ‰ä¸åŒçš„ä¹¦å†™è§„èŒƒï¼Œç›´æ¥å¼•ç”¨å½“ç„¶ä¸å¯èƒ½ç¼–è¯‘æˆåŠŸï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸­é—´å±‚ï¼ˆJNIç¼–ç¨‹ï¼‰æ¥æ­å»ºjavaè¯­è¨€å’ŒC++è¯­è¨€æ²Ÿé€šçš„æ¡¥æ¢ã€‚</p>
<span id="more"></span>

<h2 id="ä¸€ã€æ–°å»ºä½¿ç”¨JNIç¼–ç¨‹çš„å·¥ç¨‹"><a href="#ä¸€ã€æ–°å»ºä½¿ç”¨JNIç¼–ç¨‹çš„å·¥ç¨‹" class="headerlink" title="ä¸€ã€æ–°å»ºä½¿ç”¨JNIç¼–ç¨‹çš„å·¥ç¨‹"></a>ä¸€ã€æ–°å»ºä½¿ç”¨JNIç¼–ç¨‹çš„å·¥ç¨‹</h2><p>åœ¨android studioä¸­ï¼Œæ–°å»ºä¸€ä¸ªnative C++çš„å·¥ç¨‹<br><a href="https://imgse.com/i/p9VvgP0"><img src="https://s1.ax1x.com/2023/04/22/p9VvgP0.png" alt="p9VvgP0.png"></a><br>è®¾ç½®é¡¹ç›®å’ŒåŒ…çš„åç§°ï¼ˆåŒ…çš„åç§°éœ€è¦å’Œä½ è‡ªå·±å®é™…ä½¿ç”¨çš„é¡¹ç›®åŒ…åä¸€è‡´ï¼Œå¦åˆ™å°±åªèƒ½é€šè¿‡æ¨¡å—çš„æ–¹å¼å»è°ƒç”¨ï¼‰<br><a href="https://imgse.com/i/p9VvR2T"><img src="https://s1.ax1x.com/2023/04/22/p9VvR2T.png" alt="p9VvR2T.png"></a></p>
<h2 id="äºŒã€ä¸‹è½½JNIå¼€å‘æ‰€éœ€çš„NKDï¼ŒLLDBï¼ŒCMakeå·¥å…·åŒ…"><a href="#äºŒã€ä¸‹è½½JNIå¼€å‘æ‰€éœ€çš„NKDï¼ŒLLDBï¼ŒCMakeå·¥å…·åŒ…" class="headerlink" title="äºŒã€ä¸‹è½½JNIå¼€å‘æ‰€éœ€çš„NKDï¼ŒLLDBï¼ŒCMakeå·¥å…·åŒ…"></a>äºŒã€ä¸‹è½½JNIå¼€å‘æ‰€éœ€çš„NKDï¼ŒLLDBï¼ŒCMakeå·¥å…·åŒ…</h2><p>æ‰“å¼€Androidstudio -&gt; Preferences -&gt; Android SDK<br><a href="https://imgse.com/i/p9VvhMF"><img src="https://s1.ax1x.com/2023/04/22/p9VvhMF.png" alt="p9VvhMF.png"></a><br>JNIï¼šJava Native Interfaceï¼ˆjavaæœ¬åœ°ç¼–ç¨‹æ¥å£ï¼‰ï¼Œä¸€å¥—ç¼–ç¨‹è§„èŒƒï¼Œå®ƒæä¾›äº†è‹¥å¹²çš„APIï¼Œå®ç°äº†Javaå’Œå…¶ä»–è¯­è¨€çš„é€šä¿¡ï¼ˆä¸»è¦æ˜¯C&#x2F;C++ï¼‰<br>NDKï¼šNative Development Kitï¼ˆæœ¬åœ°å¼€å‘å·¥å…·ï¼‰ï¼Œä¸€ç³»åˆ—å·¥å…·çš„é›†åˆï¼Œè¿™å¥—å·¥å…·å…è®¸ä½ åœ¨Androidå¼€å‘ä¸­ä½¿ç”¨Cå’ŒC++ä»£ç <br>CMakeï¼šè·¨å¹³å°ç¼–è¯‘å·¥å…·<br>LLDBï¼šä¸€ç§è°ƒè¯•ç¨‹åºï¼ŒAndroid Studioä½¿ç”¨å®ƒæ¥è°ƒè¯•åŸç”Ÿä»£ç </p>
<h2 id="ä¸‰ã€åœ¨cppæ–‡ä»¶å¤¹ä¸‹é˜²æ­¢éœ€è¢«æ‰“åŒ…çš„C-x2F-C-æºç ï¼ŒCMakeListsé‡Œæ·»åŠ æ‰€æœ‰C-x2F-C-ä»£ç å’Œnative-lib-cppï¼šå¦‚å›¾ï¼Œincé‡Œæ”¾ç½®å¤´æ–‡ä»¶ï¼Œsrcé‡Œæ”¾ç½®-c-x2F-cppæ–‡ä»¶ï¼ˆæ³¨æ„ä¿®æ”¹å¼•ç”¨è·¯å¾„ï¼‰"><a href="#ä¸‰ã€åœ¨cppæ–‡ä»¶å¤¹ä¸‹é˜²æ­¢éœ€è¢«æ‰“åŒ…çš„C-x2F-C-æºç ï¼ŒCMakeListsé‡Œæ·»åŠ æ‰€æœ‰C-x2F-C-ä»£ç å’Œnative-lib-cppï¼šå¦‚å›¾ï¼Œincé‡Œæ”¾ç½®å¤´æ–‡ä»¶ï¼Œsrcé‡Œæ”¾ç½®-c-x2F-cppæ–‡ä»¶ï¼ˆæ³¨æ„ä¿®æ”¹å¼•ç”¨è·¯å¾„ï¼‰" class="headerlink" title="ä¸‰ã€åœ¨cppæ–‡ä»¶å¤¹ä¸‹é˜²æ­¢éœ€è¢«æ‰“åŒ…çš„C&#x2F;C++æºç ï¼ŒCMakeListsé‡Œæ·»åŠ æ‰€æœ‰C&#x2F;C++ä»£ç å’Œnative-lib.cppï¼šå¦‚å›¾ï¼Œincé‡Œæ”¾ç½®å¤´æ–‡ä»¶ï¼Œsrcé‡Œæ”¾ç½®.c&#x2F;.cppæ–‡ä»¶ï¼ˆæ³¨æ„ä¿®æ”¹å¼•ç”¨è·¯å¾„ï¼‰"></a>ä¸‰ã€åœ¨cppæ–‡ä»¶å¤¹ä¸‹é˜²æ­¢éœ€è¢«æ‰“åŒ…çš„C&#x2F;C++æºç ï¼ŒCMakeListsé‡Œæ·»åŠ æ‰€æœ‰C&#x2F;C++ä»£ç å’Œnative-lib.cppï¼šå¦‚å›¾ï¼Œincé‡Œæ”¾ç½®å¤´æ–‡ä»¶ï¼Œsrcé‡Œæ”¾ç½®.c&#x2F;.cppæ–‡ä»¶ï¼ˆæ³¨æ„ä¿®æ”¹å¼•ç”¨è·¯å¾„ï¼‰</h2><p><a href="https://imgse.com/i/p9VvoZ9"><img src="https://s1.ax1x.com/2023/04/22/p9VvoZ9.png" alt="p9VvoZ9.png"></a></p>
<h2 id="å››ã€æ–°å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œåœ¨ç±»ä¸­å£°æ˜éœ€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚ï¼ˆè¿™ä¸€æ­¥è®¾è®¡ç±»å‹è½¬æ¢C-gt-JNI-gt-JAVAï¼‰"><a href="#å››ã€æ–°å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œåœ¨ç±»ä¸­å£°æ˜éœ€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚ï¼ˆè¿™ä¸€æ­¥è®¾è®¡ç±»å‹è½¬æ¢C-gt-JNI-gt-JAVAï¼‰" class="headerlink" title="å››ã€æ–°å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œåœ¨ç±»ä¸­å£°æ˜éœ€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚ï¼ˆè¿™ä¸€æ­¥è®¾è®¡ç±»å‹è½¬æ¢C++ -&gt; JNI -&gt; JAVAï¼‰"></a>å››ã€æ–°å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œåœ¨ç±»ä¸­å£°æ˜éœ€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚ï¼ˆè¿™ä¸€æ­¥è®¾è®¡ç±»å‹è½¬æ¢C++ -&gt; JNI -&gt; JAVAï¼‰</h2><p><a href="https://imgse.com/i/p9Vv7I1"><img src="https://s1.ax1x.com/2023/04/22/p9Vv7I1.png" alt="p9Vv7I1.png"></a></p>
<h2 id="äº”ã€åœ¨native-lib-cppé‡Œå®ç°æ–¹æ³•ä»C-åˆ°JNIçš„è½¬æ¢"><a href="#äº”ã€åœ¨native-lib-cppé‡Œå®ç°æ–¹æ³•ä»C-åˆ°JNIçš„è½¬æ¢" class="headerlink" title="äº”ã€åœ¨native-lib.cppé‡Œå®ç°æ–¹æ³•ä»C++åˆ°JNIçš„è½¬æ¢"></a>äº”ã€åœ¨native-lib.cppé‡Œå®ç°æ–¹æ³•ä»C++åˆ°JNIçš„è½¬æ¢</h2><p><a href="https://imgse.com/i/p9VxFRf"><img src="https://s1.ax1x.com/2023/04/22/p9VxFRf.png" alt="p9VxFRf.png"></a></p>
<h2 id="å…­ã€æ‰§è¡ŒBuild-gt-Make-Projectï¼Œå¯å¾—åˆ°-soæ–‡ä»¶"><a href="#å…­ã€æ‰§è¡ŒBuild-gt-Make-Projectï¼Œå¯å¾—åˆ°-soæ–‡ä»¶" class="headerlink" title="å…­ã€æ‰§è¡ŒBuild -&gt; Make Projectï¼Œå¯å¾—åˆ°.soæ–‡ä»¶"></a>å…­ã€æ‰§è¡ŒBuild -&gt; Make Projectï¼Œå¯å¾—åˆ°.soæ–‡ä»¶</h2><p><a href="https://imgse.com/i/p9Vxkz8"><img src="https://s1.ax1x.com/2023/04/22/p9Vxkz8.png" alt="p9Vxkz8.png"></a></p>
<h2 id="ä¸ƒã€æŠŠ-soåº“æ”¾å…¥éœ€è¦ç®—æ³•åº“çš„å·¥ç¨‹ä¸‹"><a href="#ä¸ƒã€æŠŠ-soåº“æ”¾å…¥éœ€è¦ç®—æ³•åº“çš„å·¥ç¨‹ä¸‹" class="headerlink" title="ä¸ƒã€æŠŠ.soåº“æ”¾å…¥éœ€è¦ç®—æ³•åº“çš„å·¥ç¨‹ä¸‹"></a>ä¸ƒã€æŠŠ.soåº“æ”¾å…¥éœ€è¦ç®—æ³•åº“çš„å·¥ç¨‹ä¸‹</h2><p><a href="https://imgse.com/i/p9VxmZj"><img src="https://s1.ax1x.com/2023/04/22/p9VxmZj.png" alt="p9VxmZj.png"></a></p>
<h2 id="å…«ã€åœ¨æ–°å·¥ç¨‹ä¸­ï¼ŒåŒä¸€æŠ¥åç›®å½•ä¸‹æ–°å»ºåå­—ç›¸åŒçš„ç±»ï¼Œå¤å†™åŠ è½½å’Œå£°æ˜å‡½æ•°"><a href="#å…«ã€åœ¨æ–°å·¥ç¨‹ä¸­ï¼ŒåŒä¸€æŠ¥åç›®å½•ä¸‹æ–°å»ºåå­—ç›¸åŒçš„ç±»ï¼Œå¤å†™åŠ è½½å’Œå£°æ˜å‡½æ•°" class="headerlink" title="å…«ã€åœ¨æ–°å·¥ç¨‹ä¸­ï¼ŒåŒä¸€æŠ¥åç›®å½•ä¸‹æ–°å»ºåå­—ç›¸åŒçš„ç±»ï¼Œå¤å†™åŠ è½½å’Œå£°æ˜å‡½æ•°"></a>å…«ã€åœ¨æ–°å·¥ç¨‹ä¸­ï¼ŒåŒä¸€æŠ¥åç›®å½•ä¸‹æ–°å»ºåå­—ç›¸åŒçš„ç±»ï¼Œå¤å†™åŠ è½½å’Œå£°æ˜å‡½æ•°</h2><p><a href="https://imgse.com/i/p9Vxo6S"><img src="https://s1.ax1x.com/2023/04/22/p9Vxo6S.png" alt="p9Vxo6S.png"></a></p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidä¹‹ç¢ç‰‡Fragment</title>
    <url>/2022/12/11/Android%E4%B9%8B%E7%A2%8E%E7%89%87Fragment/</url>
    <content><![CDATA[<p>å®‰å“è‡ª3.0å¼€å§‹å¼•å…¥Fragmentçš„æ¦‚å¿µï¼Œä¸»è¦æ˜¯ä¸ºäº†èƒ½åœ¨ä¸åŒåˆ†è¾¨ç‡çš„å±å¹•ä¸Šè¿›è¡Œæ›´ä¸ºåŠ¨æ€å’Œçµæ´»çš„UIè®¾è®¡ï¼Œè®©ç¨‹åºæ›´åŠ åˆç†å’Œå……åˆ†åˆ©ç”¨å¤§å±å¹•ç©ºé—´ã€‚</p>
<span id="more"></span>
<p>æœ¬ç¯‡å°†å­¦ä¹ Fragmentä»¥ä¸‹å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š<br>Fragmentæ¦‚è¦<br>Fragmentç”Ÿå‘½å‘¨æœŸ<br>åŠ è½½Fragmentæ–¹æ³•</p>
<pre><code>é™æ€åŠ è½½
åŠ¨æ€åŠ è½½
</code></pre>
<p>Fragmentä¸Activityä¹‹é—´é€šä¿¡</p>
<h3 id="1-Fragmentæ¦‚è¦"><a href="#1-Fragmentæ¦‚è¦" class="headerlink" title="1.Fragmentæ¦‚è¦"></a>1.Fragmentæ¦‚è¦</h3><p>å­¦ä¹ Fragmentçš„æ—¶å€™å¯ä»¥è”ç³»ä¹‹å‰å­¦ä¹ è¿‡çš„Activityï¼Œå› ä¸ºå®ƒä»¬æœ‰å¾ˆå¤šç›¸ä¼¼ç‚¹ï¼šéƒ½å¯åŒ…å«å¸ƒå±€ï¼Œæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼ŒFragmentå¯çœ‹ä¼¼è¿·ä½ æ´»åŠ¨ã€‚æ­£å¦‚Fragmentçš„åå­—ä¸€æ ·â€“ç¢ç‰‡ï¼Œå®ƒçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³Androidç¢ç‰‡åŒ–ï¼Œå®ƒå¯ä»¥ä½œä¸ºActivityç•Œé¢çš„ç»„æˆéƒ¨åˆ†ï¼Œå¯åœ¨Activityè¿è¡Œä¸­å®ç°åŠ¨æ€åœ°åŠ å…¥ã€ç§»é™¤å’Œäº¤æ¢ã€‚ä¸€ä¸ªActivityä¸­å¯åŒæ—¶å‡ºç°å¤šä¸ªFragmentï¼Œä¸€ä¸ªFragmentä¹Ÿå¯åœ¨å¤šä¸ªActivityä¸­ä½¿ç”¨ã€‚æ´»åŠ¨å’Œç¢ç‰‡åƒæäº†å¤«å¦»ï¼Œè™½ç„¶ç´§å¯†è”ç³»ä½†æ˜¯åˆæœ‰ç‹¬ç«‹ç©ºé—´ï¼Œåœ¨ä¸€èµ·è®©å½¼æ­¤å˜å¾—æ›´å¥½ã€‚<br><a href="https://imgse.com/i/zhthRK"><img src="https://s1.ax1x.com/2022/12/11/zhthRK.jpg" alt="zhthRK.jpg"></a></p>
<h3 id="2-Fragmentç”Ÿå‘½å‘¨æœŸ"><a href="#2-Fragmentç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.Fragmentç”Ÿå‘½å‘¨æœŸ"></a>2.Fragmentç”Ÿå‘½å‘¨æœŸ</h3><p><a href="https://imgse.com/i/zhtose"><img src="https://s1.ax1x.com/2022/12/11/zhtose.jpg" alt="zhtose.jpg"></a><br>æ˜¯ä¸æ˜¯å‘ç°Fragmentå’ŒActivityçš„ç”Ÿå‘½å‘¨æœŸå¤ªç›¸ä¼¼äº†ï¼Œç°åœ¨åªéœ€è¦å†ä»‹ç»å‡ ä¸ªActivityä¸­æ²¡è®²è¿‡çš„å‡ ä¸ªæ–°æ–¹æ³•ï¼š<br>onAttach()ï¼šå½“Fragmentå’ŒActivityå»ºç«‹å…³è”æ—¶è°ƒç”¨<br>onCreateView()ï¼šå½“Fragmentåˆ›å»ºè§†å›¾çš„æ—¶å€™è°ƒç”¨<br>onActivityCreated()ï¼šå½“ä¸Fragmentç›¸å…³è”çš„Activityå®ŒæˆonCreate()ä¹‹åè°ƒç”¨<br>onDestoryView()ï¼šå½“Fragmentä¸­çš„å¸ƒå±€è¢«ç§»é™¤çš„æ—¶å€™è°ƒç”¨<br>onDetach()ï¼šå½“Fragmentå’ŒActivityè§£é™¤å…³è”æ—¶è°ƒç”¨</p>
<p>åœ¨ä¸Šå›¾ä¸­ç”»äº†å‡ æ¡çº¿ï¼Œå¯ä»¥çœ‹åˆ°Fragmentå‘¨æœŸä¸­çš„çŠ¶æ€å‡ ä¹éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæ‰€ä»¥ä¸éš¾ç†è§£ä¸‹å›¾å‡ ç§å˜åŒ–ä¸‹Fragmentç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨é¡ºåºäº†ã€‚<br><a href="https://imgse.com/i/zhNion"><img src="https://s1.ax1x.com/2022/12/11/zhNion.jpg" alt="zhNion.jpg"></a></p>
<p>åŠ è½½åˆ°Activityä¸­Fragmentåœ¨å„ç§å˜åŒ–ä¸‹æ–¹æ³•çš„è°ƒç”¨é¡ºåºæ›´å€¼å¾—æ³¨æ„ã€‚éœ€è¦æä¸€å¥çš„æ˜¯ï¼ŒActivityçš„FragmentManagerè´Ÿè´£è°ƒç”¨é˜Ÿåˆ—ä¸­Fragmentçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåªè¦Fragmentçš„çŠ¶æ€ä¸Activityçš„çŠ¶æ€ä¿æŒäº†åŒæ­¥ï¼Œæ‰˜ç®¡Activityçš„Fragmentä¾¿ä¼šç»§ç»­è°ƒç”¨å…¶ä»–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä»¥ç»§ç»­ä¿æŒFragmentä¸Activityçš„çŠ¶æ€ä¸€è‡´<br><a href="https://imgse.com/i/zhjBs1"><img src="https://s1.ax1x.com/2022/12/12/zhjBs1.jpg" alt="zhjBs1.jpg"></a><br>Fragmentç”Ÿå‘½å‘¨æœŸä¸Activityç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªå…³é”®å°±åœ¨äºï¼ŒFragmentçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ˜¯ç”±æ‰˜ç®¡Activityè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿè°ƒç”¨çš„ã€‚Activityä¸­ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯protectedï¼Œè€ŒFragmentéƒ½æ˜¯publicï¼Œä¹Ÿèƒ½å°è¯è¿™ä¸€ç‚¹ï¼Œå› ä¸ºActivityéœ€è¦è°ƒç”¨Fragmenté‚£äº›æ–¹æ³•å¹¶ç®¡ç†å®ƒ</p>
<h3 id="3-åŠ è½½Fragmentæ–¹æ³•"><a href="#3-åŠ è½½Fragmentæ–¹æ³•" class="headerlink" title="3.åŠ è½½Fragmentæ–¹æ³•"></a>3.åŠ è½½Fragmentæ–¹æ³•</h3><p>ç°åœ¨æ¥å­¦ä¹ å¦‚ä½•åœ¨Activityä¸­åŠ è½½Fragment<br>é™æ€åŠ è½½Fragmentå¤§è‡´è¿‡ç¨‹å¦‚å›¾ï¼Œåˆ†æˆå››æ­¥ï¼š<br><a href="https://imgse.com/i/zhvASJ"><img src="https://s1.ax1x.com/2022/12/12/zhvASJ.jpg" alt="zhvASJ.jpg"></a><br>ä¸‹é¢é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ„Ÿå—Fragmenté™æ€åŠ è½½åˆ°Activityçš„è¿‡ç¨‹ã€‚<br>ç¬¬ä¸€æ­¥ï¼šæ–°å»ºfrag_layout.xmlï¼Œä¸ºFragmentæŒ‡å®šä¸€ä¸ªå¸ƒå±€ï¼Œè¿™é‡Œç®€å•çš„æ”¾ä¸€ä¸ªTextviewå’Œä¸€ä¸ªButtonã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    tools:context=&quot;.MyFragment&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=&quot;@+id/text&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;è¿™æ˜¯ä¸€ä¸ªFragment&quot;</span><br><span class="line">        android:textSize=&quot;20sp&quot;</span><br><span class="line">        android:textColor=&quot;#000000&quot;</span><br><span class="line">        android:gravity=&quot;center&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=&quot;@+id/frg_btn&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;ç‚¹å‡»&quot;</span><br><span class="line">        android:textSize=&quot;20sp&quot; /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ï¼šæ–°å»ºä¸€ä¸ªMyFragmentç±»å¹¶ç»§æ‰¿Fragmentï¼Œè¿™é‡Œå¼•ç”¨Android.appåŒ…ä¸‹çš„å°±å¯ä»¥ï¼Œå¦ä¸€ä¸ªåŒ…ä¸‹ä¸»è¦ç”¨äºå…¼å®¹ä½ç‰ˆæœ¬çš„å®‰å“ç³»ç»Ÿã€‚ç„¶åé‡å†™onCreateView()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé€šè¿‡LayoutInflaterçš„inflate()æ–¹æ³•å°†åˆšåˆšå®šä¹‰çš„frag_layoutå¸ƒå±€åŠ è½½è¿›æ¥å¹¶å¾—åˆ°ä¸€ä¸ªViewï¼Œå†returnè¿™ä¸ªViewã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class MyFragment extends Fragment &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container,</span><br><span class="line">                             Bundle savedInstanceState) &#123;</span><br><span class="line">        /**</span><br><span class="line">         * resourceï¼šfragmentéœ€è¦åŠ è½½çš„å¸ƒå±€æ”¯æŒ</span><br><span class="line">         * rootï¼šåŠ è½½layoutçš„çˆ¶ViewGroup</span><br><span class="line">         * attachGroupï¼šfalseè¡¨ç¤ºä¸åæ‚”çˆ¶ViewGroup</span><br><span class="line">         */</span><br><span class="line">        return inflater.inflate(R.layout.fragment_my, container, false);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼šæ–°å»ºmain.xmlï¼Œä½œä¸ºActivityçš„å¸ƒå±€ï¼Œä½¿ç”¨&lt;fragment&gt;æ ‡ç­¾æ·»åŠ ç¢ç‰‡ï¼Œå¹¶ä¸”ä¸€å®šè¦æœ‰android:nameå±æ€§ä¸”å€¼ä¸ºè¢«åŠ è½½çš„Fragmentç±»çš„åŒ…å.ç±»åå®Œæ•´å½¢å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    tools:context=&quot;.FragmentActivity&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:id=&quot;@+id/layout&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        android:orientation=&quot;horizontal&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--è¿™æ˜¯é™æ€è°ƒç”¨çš„æ–¹å¼--&gt;</span><br><span class="line">        &lt;fragment</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;match_parent&quot;</span><br><span class="line">            android:id=&quot;@+id/fragment&quot;</span><br><span class="line">            android:name=&quot;com.thefu.androidstudyproject.MyFragment&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>ç¬¬å››æ­¥ï¼šå†MainActivityä¸­åŠ è½½mainå¸ƒå±€ï¼Œç°åœ¨MyFragmentå°±å®Œæˆäº†é™æ€åŠ è½½åˆ°MainActivityä¸­ï¼Œè¿™æ—¶ç¢ç‰‡é‡Œçš„æ§ä»¶è‡ªç„¶ä¹Ÿæ˜¯æ´»åŠ¨çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œå¯ç›´æ¥å†æ´»åŠ¨ä¸­è·å–åˆ°Buttonçš„å®ä¾‹ï¼Œæ¥æ³¨å†Œç‚¹å‡»äº‹ä»¶äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">private Button frag_btn;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        //é™æ€åŠ è½½</span><br><span class="line">        setContentView(R.layout.activity_ftagment);</span><br><span class="line">        frag_btn = findViewById(R.id.frg_btn);</span><br><span class="line">        frag_btn.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View view) &#123;</span><br><span class="line">                Toast.makeText(FragmentActivity.this, &quot;æ‚¨ç‚¹å‡»äº†æŒ‰é’®&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="ï¼ˆ2ï¼‰åŠ¨æ€åŠ è½½ï¼šåœ¨æ‰˜ç®¡Activityé€šè¿‡ä»£ç åŠ¨æ€æ·»åŠ "><a href="#ï¼ˆ2ï¼‰åŠ¨æ€åŠ è½½ï¼šåœ¨æ‰˜ç®¡Activityé€šè¿‡ä»£ç åŠ¨æ€æ·»åŠ " class="headerlink" title="ï¼ˆ2ï¼‰åŠ¨æ€åŠ è½½ï¼šåœ¨æ‰˜ç®¡Activityé€šè¿‡ä»£ç åŠ¨æ€æ·»åŠ "></a>ï¼ˆ2ï¼‰åŠ¨æ€åŠ è½½ï¼šåœ¨æ‰˜ç®¡Activityé€šè¿‡ä»£ç åŠ¨æ€æ·»åŠ </h2><p>åŠ¨æ€åŠ è½½çš„ä»£ç ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥çœ‹ä¾‹å­ï¼Œä¿®æ”¹main.xmlï¼Œå°†æ•´ä¸ª&lt;fragment&gt;åˆ æ‰ã€‚ä½†å®³ä¿ç•™ä¸€ä¸ªLinearLayoutçš„ç©ºé—´å¹¶ä¸”è¿˜ç»™äº†idã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    tools:context=&quot;.FragmentActivity&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:id=&quot;@+id/layout&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        android:orientation=&quot;horizontal&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--è¿™æ˜¯é™æ€è°ƒç”¨çš„æ–¹å¼--&gt;</span><br><span class="line">&lt;!--        &lt;fragment--&gt;</span><br><span class="line">&lt;!--            android:layout_width=&quot;match_parent&quot;--&gt;</span><br><span class="line">&lt;!--            android:layout_height=&quot;match_parent&quot;--&gt;</span><br><span class="line">&lt;!--            android:id=&quot;@+id/fragment&quot;--&gt;</span><br><span class="line">&lt;!--            android:name=&quot;com.thefu.androidstudyproject.MyFragment&quot; /&gt;--&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥åœ¨MainActivityä¸­æ·»åŠ ä»£ç ï¼š<br>public class FragmentActivity extends AppCompatActivity {</p>
<pre><code>private Button frag_btn;
private LinearLayout linearLayout;
@Override
protected void onCreate(Bundle savedInstanceState) &#123;
    super.onCreate(savedInstanceState);
    //é™æ€åŠ è½½
    setContentView(R.layout.activity_ftagment);
</code></pre>
<p>&#x2F;&#x2F;        frag_btn &#x3D; findViewById(R.id.frg_btn);<br>&#x2F;&#x2F;        frag_btn.setOnClickListener(new View.OnClickListener() {<br>&#x2F;&#x2F;<br>&#x2F;&#x2F;            @Override<br>&#x2F;&#x2F;            public void onClick(View view) {<br>&#x2F;&#x2F;                Toast.makeText(FragmentActivity.this, â€œæ‚¨ç‚¹å‡»äº†æŒ‰é’®â€, Toast.LENGTH_SHORT).show();<br>&#x2F;&#x2F;            }<br>&#x2F;&#x2F;        });<br>        linearLayout &#x3D; findViewById(R.id.layout);</p>
<pre><code>    //åŠ¨æ€åŠ è½½
    MyFragment fragment = new MyFragment();
    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction beginTransacction = fragmentManager.beginTransaction();
    beginTransacction.add(R.id.layout, fragment); //æŠŠç¢ç‰‡æ”¾åˆ°å¸ƒå±€çš„layoutå®¹å™¨é‡Œé¢
    beginTransacction.addToBackStack(null); //å…è®¸ç”¨æˆ·é€šè¿‡æŒ‰é”®è¿”å›å‰ä¸€ä¸ªFragmentçŠ¶æ€
    beginTransacction.commit();

&#125;
</code></pre>
<p>}</p>
<p>å¯å°†æ•´ä¸ªè¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š<br>ç¬¬ä¸€æ­¥ï¼Œå…ˆç”¨getSupportFragmentManager()æ–¹æ³•è·å–ä¸€ä¸ªFragmentManagerå¯¹è±¡ï¼Œå†é€šè¿‡å®ƒçš„beginTransacction()è·å–ä¸€ä¸ªFragmentTransactionçš„å®ä¾‹ã€‚</p>
<p>ç¬¬äºŒæ­¥ï¼Œç”¨beginTransaction.add()æ–¹æ³•å°†MyFragemntå®ä¾‹æ·»åŠ åˆ°mainå¸ƒå±€é‡ŒLinearLayouté‡Œï¼Œç»ˆäºçŸ¥é“ä¹‹å‰é“ºå«çš„Idæ˜¯æ€ä¹ˆå›äº‹äº†ã€‚ä¸€å®šè¦æ³¨æ„ï¼Œadd()æ–¹æ³•é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®¹å™¨è§†å›¾èµ„æºIdï¼Œè€Œä¸æ˜¯layoutã€‚å®¹å™¨è§†å›¾èµ„æºIdæœ‰ä¸¤ä¸ªä½œç”¨ï¼šå‘ŠçŸ¥FragmentManagerï¼Œç¢ç‰‡è§†å›¾åº”è¯¥å‡ºç°åœ¨æ´»åŠ¨è§†å›¾çš„ä»€ä¹ˆåœ°æ–¹ï¼›å®ƒä¹Ÿæ˜¯FragmentManageré˜Ÿåˆ—ä¸­ç¢ç‰‡çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚è€Œé™æ€åŠ è½½æ—¶ç¢ç‰‡çš„å”¯ä¸€æ ‡è¯†ç¬¦æ­£æ˜¯åœ¨æ´»åŠ¨å¸ƒå±€é‡Œ&lt; fragment&gt;ä¸‹çš„idã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼Œè°ƒç”¨beginTransaction.commit()æäº¤ã€‚å¦å¤–ï¼Œå¦‚æœå…è®¸ç”¨æˆ·é€šè¿‡æŒ‰ä¸‹è¿”å›æŒ‰é”®è¿”å›åˆ°å‰ä¸€ä¸ªFragmentçŠ¶æ€ï¼Œåœ¨è°ƒç”¨commit()ä¹‹å‰å…ˆè°ƒç”¨addToBackStack(true)æ–¹æ³•ã€‚</p>
<p>è¿™é‡Œæ³¨æ„åˆ°åŠ¨æ€åŠ è½½è¿›æ¥çš„Fragmenté‡Œçš„ç©ºé—´å¹¶ä¸èƒ½ç›´æ¥åœ¨æ´»åŠ¨ä¸­findViewByIdå¾—åˆ°ï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°ç‚¹å‡»æ•ˆæœå‘¢ï¼Ÿ</p>
<h3 id="4-Fragmentä¸Activityä¹‹é—´é€šä¿¡"><a href="#4-Fragmentä¸Activityä¹‹é—´é€šä¿¡" class="headerlink" title="4.Fragmentä¸Activityä¹‹é—´é€šä¿¡"></a>4.Fragmentä¸Activityä¹‹é—´é€šä¿¡</h3><p>åœ¨æ´»åŠ¨ä¸­å¯ä»¥è°ƒç”¨FragmentManagerçš„findFragmentById()æ–¹æ³•æ¥å¾—åˆ°ç›¸åº”ç¢ç‰‡çš„å®ä¾‹ï¼Œç»§è€Œå¯ä»¥è°ƒç”¨ç¢ç‰‡é‡Œçš„æ–¹æ³•ï¼Œä»¥ä¸Šé¢çš„demoä¸ºä¾‹ï¼Œå¦‚æœæƒ³å¾—åˆ°é™æ€åŠ è½½ç¢ç‰‡çš„å®ä¾‹ï¼Œå¯åœ¨MainActivityæ·»åŠ ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MyFragment myFragment = (MyFragment)getFragmentManager(). findFragmentById(R.id.fragment);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³å¾—åˆ°åŠ¨æ€åŠ è½½ç¢ç‰‡çš„å®ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MyFragment myFragment = (MyFragment)fragmentManager(). findFragmentById(R.id.layout);</span><br></pre></td></tr></table></figure>

<p>åœ¨ç¢ç‰‡ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨getActivity()æ–¹æ³•æ¥å¾—åˆ°å’Œå½“å‰ç¢ç‰‡ç›¸å…³è”çš„æ´»åŠ¨å®ä¾‹ï¼Œè¿™æ ·è°ƒç”¨æ´»åŠ¨é‡Œçš„æ–¹æ³•å°±å˜å¾—è½»è€Œæ˜“ä¸¾äº†ï¼Œæ¯”å¦‚æƒ³åœ¨MyFragmentå¾—åˆ°MainActivityçš„å®ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MainActivity activity=(MainActivity)getActivity();</span><br></pre></td></tr></table></figure>
<p>äºæ˜¯ç¢ç‰‡å’Œæ´»åŠ¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé€šä¿¡äº†ï¼Œå†æƒ³ä¸€ä¸‹ç¢ç‰‡å’Œç¢ç‰‡ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿå…ˆåœ¨è¦ç»™ç¢ç‰‡ä¸­å¯ä»¥å¾—åˆ°ä¸å®ƒç›¸å…³çš„æ´»åŠ¨ï¼Œç„¶åå†é€šè¿‡è¿™ä¸ªæ´»åŠ¨å»è·å–å¦ä¸€ä¸ªç¢ç‰‡å®ä¾‹ï¼Œè¿™æ ·å®ç°äº†ä¸åŒç¢ç‰‡ä¹‹é—´çš„é€šä¿¡äº†ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœæŸä¸€æ¿å—æ¯æ¬¡ç”¨åˆ°éƒ½éœ€è¦ç›¸åŒçš„åŠŸèƒ½ï¼Œå°±å®Œå…¨å¯ä»¥åœ¨ç¢ç‰‡ä¸­å®ç°éœ€æ±‚ï¼Œè€Œä¸å¿…åœ¨æ´»åŠ¨ä¸­é‡å¤ä»£ç ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§ã€‚</p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
  </entry>
  <entry>
    <title>EditText:android:focusableå’Œandroid:focusableInTouchModeçš„åŒºåˆ«</title>
    <url>/2022/10/15/EditText-android-focusable%E5%92%8Candroid-focusableInTouchMode%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>æœ¬æ–‡å‘å¤§å®¶ä»‹ç»EditText:android:focusableå’Œandroid:focusableInTouchModeçš„åŒºåˆ«ï¼Œä¸»è¦åŒ…æ‹¬EditText:android:focusableå’Œandroid:focusableInTouchModeçš„åŒºåˆ«ä½¿ç”¨å®ä¾‹ï¼Œåº”ç”¨æŠ€å·§ï¼ŒåŸºæœ¬çŸ¥è¯†ç‚¹æ€»ç»“å’Œéœ€è¦æ³¨æ„äº‹é¡¹ï¼Œå…·æœ‰ä¸€å®šçš„å‚è€ƒä»·å€¼ã€‚<br>android:focusable</p>
<span id="more"></span>
<p>ä¹‹æ‰€ä»¥æœ‰è¿™ä¸ªå±æ€§ä¸»è¦æ˜¯å› ä¸ºandroidç³»ç»Ÿä¸ä»…ä»…æ˜¯é’ˆå¯¹æ‰‹æœºçš„ï¼Œæœ‰å¯èƒ½åœ¨ç”µè§†ï¼Œæ‰‹è¡¨ç­‰ç­‰çš„éè§¦æ‘¸è¾“å…¥è®¾å¤‡ä¸Šï¼ˆæ¯”å¦‚android TVï¼‰è¿™äº›è®¾å¤‡åªæœ‰ç‰©ç†ä¸Šä¸‹é”®ä¸å…·å¤‡è§¦æ‘¸åŠŸèƒ½ï¼Œ<br>é‚£ä¹ˆå½“æŠŠè¿™ä¸ªå±æ€§å€¼è®¾ç½®ä¸ºtrueçš„æ—¶å€™ï¼Œæ¯”å¦‚ä½ æŒ‰äº†ä¸€ä¸‹å‘ä¸‹é”®ï¼Œå±å¹•ä¸Šçš„å†…å®¹å°±ä¼šå¯¹åº”é€‰ä¸­ä¸€ä¸ªå‘ä¸‹çš„æ§ä»¶ï¼ˆå¦‚æœè¿™ä¸ªæ§ä»¶è®¾ç½®android:focusable&#x3D;trueçš„è¯ï¼‰ï¼Œå¦åˆ™å°±ä¼šé€‰ä¸­ä¸‹ä¸€ä¸ªå…·å¤‡focusableèƒ½åŠ›çš„æ§ä»¶ã€‚<br>android:focusableInTouchMode<br>ä¸ä¸Šé¢çš„é‚£ç§æƒ…å†µç›¸åï¼Œå¦‚æœæ˜¯é’ˆå¯¹æ‰‹æœºå¼€å‘çš„è¯ï¼Œé‚£ä¹ˆå¤§éƒ¨åˆ†æ‰‹æœºéƒ½å…·å¤‡è§¦æ‘¸åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ<br>ä»äº¤äº’çš„è§’åº¦æ¥è®²ï¼Œç„¦ç‚¹çš„ä½œç”¨å…¶å®å°±æ˜¯ä¸ºäº†æç¤ºç”¨æˆ·å½“å‰æ§ä»¶å·²ç»è¢«é€‰ä¸­äº†ï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œã€‚æ¯”å¦‚åœ¨android5.0ä¸Šæ–°é€€å‡ºçš„Material Designæ•ˆæœä¸Šé¢ï¼Œå¦‚æœä¸€ä¸ªEditTextè¢«é€‰ä¸­äº†ï¼Œé‚£ä¹ˆå®ƒçš„è¾“å…¥æ¡†å°±ä¼šæ›´æ¢é¢œè‰²ä»¥ç¤ºåŒºåˆ«ï¼Œä½†æ˜¯åœ¨æ‰‹æœºå¼€å‘ä¸­å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ§ä»¶éƒ½éœ€è¦æœ‰é€‰ä¸­çš„è¿™ç§çŠ¶æ€ï¼Œé€šå¸¸åœ¨ç‚¹å‡»åå¯èƒ½åªæƒ³è¾¾åˆ°æŸç§æ•ˆæœï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®å°±æ˜¯æƒ³è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œä¸éœ€è¦æœ‰é€‰ä¸­æ•ˆæœï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæŠŠandroid:focusableInTouchModeè®¾ç½®ä¸ºtrueï¼Œæ­¤æ—¶æ‰§è¡Œçš„å°±æ˜¯æ›´æ¢ç„¦ç‚¹æ“ä½œï¼Œç›¸åº”çš„äº‹ä»¶å°±æ— æ³•å¾—åˆ°åŠæ—¶ç›¸åº”ï¼Œè¿™æ ·çš„ä½“éªŒå°±ä¼šå¾ˆä¸å¥½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:background=&quot;#ddffff&quot;</span><br><span class="line">    android:gravity=&quot;center&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;</span><br><span class="line">    android:focusableInTouchMode=&quot;true&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    </span><br><span class="line">    &lt;View</span><br><span class="line">        android:id=&quot;@+id/view_test&quot;</span><br><span class="line">        android:layout_width=&quot;100dip&quot;</span><br><span class="line">        android:layout_height=&quot;100dip&quot;</span><br><span class="line">        android:focusableInTouchMode=&quot;true&quot;</span><br><span class="line">        android:background=&quot;#ff0000&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=&quot;@+id/bt_test&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginBottom=&quot;20dp&quot;</span><br><span class="line">        android:text=&quot;click me&quot;</span><br><span class="line">        android:focusableInTouchMode=&quot;true&quot;</span><br><span class="line">        /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åˆ†åˆ«ä¸ºLinearLayoutï¼ŒViewï¼ŒButtonéƒ½å¢åŠ ä¸€ä¸ªè§¦æ‘¸æ—¶èƒ½å¤Ÿè·å–åˆ°ç„¦ç‚¹çš„å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.yuneec.testdemo;</span><br><span class="line">import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.util.Log;import android.view.View;import android.widget.Button;</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private View view_test;</span><br><span class="line">    private Button bt_test;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        view_test = findViewById(R.id.view_test);</span><br><span class="line">        bt_test = (Button) findViewById(R.id.bt_test);</span><br><span class="line"></span><br><span class="line">        view_test.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;I am view, click................&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        view_test.setOnFocusChangeListener(new View.OnFocusChangeListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onFocusChange(View v, boolean hasFocus) &#123;</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;==========================================&quot;);</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;I am view, focus: &quot;+view_test.isFocused());</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;I am button, focus: &quot;+bt_test.isFocused());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        bt_test.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;I am button, click................&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        bt_test.setOnFocusChangeListener(new View.OnFocusChangeListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onFocusChange(View v, boolean hasFocus) &#123;</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;==========================================&quot;);</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;I am button, focus: &quot;+bt_test.isFocused());</span><br><span class="line">                Log.i(&quot;xp.chen&quot;, &quot;I am view, focus: &quot;+view_test.isFocused());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å…ˆç‚¹å‡»Viewï¼Œå‘ç°Viewçš„onClickäº‹ä»¶æœªæ‰“å°ï¼Œå†ç‚¹å‡»viewï¼Œå‘ç°viewçš„onclickäº‹ä»¶å¯ä»¥æ­£å¸¸æ‰“å°äº†ã€‚<br>ç„¶åç‚¹å‡»buttonï¼Œå‘ç°buttonçš„onclickäº‹ä»¶ä¹Ÿæœªæ‰“å°ï¼Œå†ç‚¹å‡»ä¸€æ¬¡buttonï¼Œå‘ç°buttonçš„onclickäº‹ä»¶å¯ä»¥æ­£å¸¸æ‰“å°äº†ã€‚<br>è¿™è¯´æ˜ç¬¬ä¸€æ¬¡ç‚¹å‡»viewæˆ–è€…buttonï¼ŒçŸ¥è¯†å•çº¯å°†ç„¦ç‚¹è½¬æ¢åˆ°äº†viewå’Œbuttonä¸Šï¼Œæ­¤æ—¶ä¼šè°ƒç”¨onFocusChangeListeneræ–¹æ³•ï¼Œåªæœ‰å½“å†æ¬¡ç‚¹å‡»çš„æ—¶å€™æ‰ä¼šè°ƒç”¨onClickæ–¹æ³•ã€‚<br>å› æ­¤ï¼Œè¿™ç§æ“ä½œå¯¹Buttonæ¥è¯´æ˜¯å¤šä½™çš„ï¼Œè€Œbuttonçš„android:focusableInTouchModeå±æ€§é»˜è®¤ä¹Ÿå°±æ˜¯falseã€‚<br>ä½†å¯¹äºEditTextè¿™ç§æ§ä»¶æ¥è¯´å°±ä¸ä¸€æ ·äº†ï¼Œæ¯”æ–¹è¯´ä¸€ä¸ªç•Œé¢ä¸Šæœ‰å¾ˆå¤šEditTextï¼Œåœ¨ä½ ç‚¹å‡»äº†å…¶ä¸­ä¸€ä¸ªçš„æ—¶å€™ï¼Œä½ å¿…é¡»å…ˆå‘ŠçŸ¥ç”¨æˆ·ä»–ç‚¹å‡»çš„æ˜¯å“ªä¸€ä¸ªï¼Œè¿™æ ·ç”¨æˆ·æ‰ä¸ä¼šè¾“é”™ï¼Œäº‹å®ä¸Šåœ¨androidæºä»£ç é‡Œé¢ï¼ŒEditTextçš„focusableInTouchModeå±æ€§é»˜è®¤ä¹Ÿå°±æ˜¯Trueã€‚</p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Rustä¸­æ‰€æœ‰æƒå’Œä½œç”¨åŸŸä»¥åŠç”Ÿå‘¨æœŸ</title>
    <url>/2025/11/26/Rust%E4%B8%AD%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%BB%A5%E5%8F%8A%E7%94%9F%E5%91%A8%E6%9C%9F/</url>
    <content><![CDATA[<p>åœ¨rustä¸­ï¼Œä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œæ‰€æœ‰æƒï¼ˆOwnershipï¼‰æ˜¯ä¿è¯å†…å­˜å®‰å…¨çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒä»¬å…±åŒå†³å®šäº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ç®¡ç†æ–¹å¼ï¼Œæ— éœ€åƒåœ¾å›æ”¶å³å¯é¿å…æ‚¬å‚æŒ‡é’ˆã€åŒé‡é‡Šæ”¾ç­‰å†…å­˜é—®é¢˜ã€‚</p>
<span id="more"></span>

<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>å«ä¹‰</th>
<th>æ˜¯å¦è‡ªåŠ¨è§¦å‘é”€æ¯</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>ä½œç”¨åŸŸï¼ˆScope</td>
<td>å˜é‡çš„å¯è®¿é—®èŒƒå›´</td>
<td>æ˜¯</td>
<td>{ let x &#x3D; 1; }</td>
</tr>
<tr>
<td>æ‰€æœ‰æƒï¼ˆOwnership</td>
<td>èµ„æºçš„å”¯ä¸€æŒæœ‰è€…</td>
<td>æ˜¯</td>
<td>let s &#x3D; String:from(â€œhiâ€);</td>
</tr>
<tr>
<td>ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰</td>
<td>å¼•ç”¨çš„æœ‰æ•ˆåŒºé—´</td>
<td>å¦</td>
<td>&amp;&#96;a str</td>
</tr>
</tbody></table>
<h1 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h1><p>ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå˜é‡ï¼ˆæˆ–å¼•ç”¨ã€èµ„æºï¼‰åœ¨ç¨‹åºä¸­æœ‰æ•ˆã€å¯è®¿é—®çš„ä»£ç èŒƒå›´ï¼Œç”±ä¸€å¯¹èŠ±æ‹¬å·{}ç•Œå®šï¼›</p>
<p>1.ç¡®å®šæ€§ï¼šä½œç”¨åŸŸç”±ä»£ç ç»“æ„æ˜¾ç¤ºç•Œå®šï¼Œç¼–è¯‘æœŸå³å¯ç¡®å®šï¼Œä¸å­˜åœ¨è¿è¡Œæ—¶åŠ¨æ€å˜åŒ–ï¼›<br>2.è‡ªåŠ¨æ¸…ç†ï¼šRustä¼šè‡ªåŠ¨è°ƒç”¨å…¶dropæ–¹æ³•(è‹¥å®ç°äº†drop traitï¼Œåˆ™ä¼šè°ƒç”¨dropå‡½æ•°)ï¼Œé‡Šæ”¾å†…å­˜æˆ–èµ„æºï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰ã€‚<br>3.åµŒå¥—æ€§ï¼šä½œç”¨åŸŸå¯ä»¥åµŒå¥—ï¼ˆå†…éƒ¨ä½œç”¨åŸŸåŒ…å«åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­ï¼‰ï¼Œå†…éƒ¨ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å®ä½“ï¼Œä½†å¤–éƒ¨ä½œç”¨åŸŸæ— æ³•è®¿é—®å†…éƒ¨ä½œç”¨åŸŸçš„å®ä½“ã€‚</p>
<table>
<thead>
<tr>
<th>äº‹ä»¶</th>
<th>å‘ç”Ÿæ—¶æœº</th>
<th>ç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td>å˜é‡ç»‘å®š</td>
<td>è¯­å¥æ‰§è¡Œæ—¶</td>
<td>å†…å­˜åˆ†é…ï¼ˆå¦‚éœ€è¦ï¼‰</td>
</tr>
<tr>
<td>å˜é‡å¯è§</td>
<td>å£°æ˜ç‚¹åˆ°ä½œç”¨åŸŸç»“æŸ</td>
<td>å¯åœ¨ä½œç”¨åŸŸå†…è®¿é—®</td>
</tr>
<tr>
<td>å˜é‡é”€æ¯</td>
<td>ç¦»å¼€ä½œç”¨åŸŸæ—¶</td>
<td>è°ƒç”¨dropé‡Šæ”¾èµ„æº</td>
</tr>
<tr>
<td>å˜é‡çš„é”€æ¯é¡ºåºï¼š</td>
<td></td>
<td></td>
</tr>
<tr>
<td>1.åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ï¼šä¸å£°æ˜é¡ºåºç›¸å</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2.ç»“æ„ä½“å­—æ®µï¼šæŒ‰å£°æ˜é¡ºåºé”€æ¯</td>
<td></td>
<td></td>
</tr>
<tr>
<td>3.æ•°ç»„å…ƒç´ ï¼šä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ª</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="æ‰€æœ‰æƒ"><a href="#æ‰€æœ‰æƒ" class="headerlink" title="æ‰€æœ‰æƒ"></a>æ‰€æœ‰æƒ</h1><p>rustä¸é€‚ç”¨åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ï¼Œè€Œæ˜¯é€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿåœ¨ç¼–è¯‘æœŸä¿è¯å†…å­˜å®‰å…¨ï¼ˆåœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œä¸€ç³»åˆ—çš„è§„åˆ™æ£€æŸ¥ï¼Œåœ¨è¿è¡Œæ—¶é›¶å¼€é”€ï¼‰ï¼›</p>
<p>æ¯ä¸ªå€¼ï¼ˆèµ„æºï¼‰åœ¨ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼ˆownerï¼‰ï¼›<br>å½“æ‰€æœ‰è€…ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå€¼ä¼šè¢«è‡ªåŠ¨é”€æ¯ï¼›<br>èµ‹å€¼æˆ–ä¼ å‚ä¼šç§»åŠ¨ï¼ˆmoveï¼‰æ‰€æœ‰æƒï¼Œé™¤éå®ç°äº†copy traitã€‚</p>
<h2 id="å¼•ç”¨ä¸å€Ÿç”¨"><a href="#å¼•ç”¨ä¸å€Ÿç”¨" class="headerlink" title="å¼•ç”¨ä¸å€Ÿç”¨"></a>å¼•ç”¨ä¸å€Ÿç”¨</h2><p>ä¸ºé¿å…é¢‘ç¹çš„æ‰€æœ‰æƒè½¬ç§»ï¼ŒRustæä¾›äº†å¼•ç”¨æœºåˆ¶ï¼š<br>1.ä¸å¯å˜å¼•ç”¨ï¼ˆ&amp;Tï¼‰ï¼šåªè¯»è®¿é—®ï¼Œå…è®¸å¤šä¸ªåŒæ—¶å­˜åœ¨ï¼›<br>2.å¯å˜å¼•ç”¨ï¼ˆ&amp;mut Tï¼‰:å¯ä¿®æ”¹æ•°æ®ï¼ŒåŒä¸€ä½œç”¨åŸŸå†…ä»…å…è®¸ä¸€ä¸ªã€‚</p>
<p>å€Ÿç”¨è§„åˆ™ï¼š<br>1.å¼•ç”¨ä½œç”¨åŸŸä¸èƒ½è¶…è¿‡è¢«å¼•ç”¨å˜é‡çš„ä½œç”¨åŸŸï¼ˆé˜²æ‚¬å‚å¼•ç”¨ï¼‰ï¼›<br>2.åŒä¸€æ•°æ®ä¸èƒ½åŒæ—¶å­˜åœ¨å¯å˜å’Œä¸å¯å˜å¼•ç”¨ã€‚</p>
<h2 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h2><p>èµ‹å€¼ä¼šå¼•èµ·ä¸¤ç§è¯­ä¹‰ï¼š<br>1.å¤åˆ¶ï¼ˆCOPYï¼‰ï¼šaä»ç„¶å¯ä»¥ä½¿ç”¨ï¼›<br>    éšå¼æµ…æ‹·è´ï¼šè‹¥ç±»å‹å®ç°Copy traitï¼ˆå¦‚æ•´æ•°ã€æµ®ç‚¹ã€å¸ƒå°”ã€å­—ç¬¦ã€å…ƒç»„ä¸­å…¨æ˜¯Copyç±»å‹ï¼‰ï¼Œåˆ™èµ‹å€¼æ—¶ä¸ºCopyè¯­ä¹‰ï¼Œä¸ä¼šè½¬ç§»æ‰€æœ‰æƒï¼›<br>    Cloneï¼ˆæ˜¾å¼æ·±æ‹·è´ï¼‰ï¼šä¼šåŒæ—¶èµ‹å€¼å †æ•°æ®ï¼›<br>2.æ‰€æœ‰æƒè½¬ç§»ï¼ˆMoveï¼‰ï¼šaä¸å†æœ‰æ•ˆã€‚</p>
<h2 id="Copyç±»å‹"><a href="#Copyç±»å‹" class="headerlink" title="Copyç±»å‹"></a>Copyç±»å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹ç±»åˆ«</th>
<th>ç¤ºä¾‹</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>æ ‡é‡ç±»å‹ï¼ˆscalarï¼‰</td>
<td>i32, u64, f32, bool, char</td>
<td>å°ä¸”å›ºå®šå¤§å°ï¼Œåœ¨æ ˆä¸Š</td>
</tr>
<tr>
<td>å…¨æ˜¯Copyç±»å‹çš„å…ƒç»„</td>
<td>ï¼ˆi32, i32ï¼‰ï¼Œï¼ˆu8, f64, boolï¼‰</td>
<td>åªè¦é‡Œé¢æ¯ä¸ªå­—æ®µéƒ½æ˜¯Copy</td>
</tr>
<tr>
<td>æŒ‡é’ˆç±»ï¼ˆå°‘è§ï¼‰</td>
<td>*const T, *mut TåŸç”ŸæŒ‡é’ˆ</td>
<td>ä¸æ¶‰åŠæ‰€æœ‰æƒ</td>
</tr>
<tr>
<td>å‡½æ•°æŒ‡é’ˆ</td>
<td>fn(i32) -&gt; i32</td>
<td>ä¹Ÿæ˜¯Copy</td>
</tr>
</tbody></table>
<h2 id="éCopyç±»å‹"><a href="#éCopyç±»å‹" class="headerlink" title="éCopyç±»å‹"></a>éCopyç±»å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹ç±»åˆ«</th>
<th>ç¤ºä¾‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>å †åˆ†é…ç±»å‹</td>
<td>Stringï¼ŒVec<T>, Box<T></T></T></td>
<td>åŒ…å«å †å†…å­˜æŒ‡é’ˆ</td>
</tr>
<tr>
<td>åŠ¨æ€å¤§å°ç±»å‹</td>
<td>&amp;str,Â [T],Â Rc<T></T></td>
<td>å†…éƒ¨æœ‰å¼•ç”¨è®¡æ•°æˆ–æŒ‡é’ˆ</td>
</tr>
<tr>
<td>ç”¨æˆ·å®šä¹‰ç»“æ„ä½“</td>
<td>è‹¥å­—æ®µä¸­å«éCopyæˆå‘˜</td>
<td>æ•´ä½“å°±ä¸æ˜¯Copy</td>
</tr>
<tr>
<td>å…¶ä»–æ™ºèƒ½æŒ‡é’ˆ</td>
<td>Rc<T>, Arc<T>, RefCell<T></T></T></T></td>
<td>æœ‰è¿è¡Œæ—¶ç®¡ç†é€»è¾‘</td>
</tr>
</tbody></table>
<h1 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h1><p>ç”Ÿå‘½å‘¨æœŸï¼ˆLifetimeï¼‰æ˜¯ç¼–è¯‘å™¨ç”¨æ¥ç¡®ä¿å¼•ç”¨å§‹ç»ˆæœ‰æ•ˆçš„æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒä»¬è§£å†³äº†â€æ‚¬å‚å¼•ç”¨â€é—®é¢˜â€”â€”ç¡®ä¿å¼•ç”¨ä¸ä¼šæŒ‡å‘å·²é‡Šæ”¾çš„å†…å­˜ã€‚ç”Ÿå‘½å‘¨æœŸæ˜¯å¼•ç”¨æœ‰æ•ˆçš„ä½œç”¨åŸŸèŒƒå›´ï¼Œç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé™æ€åˆ†æï¼Œä¸äº§ç”Ÿè¿è¡Œæ—¶å¼€é”€ï¼š** Â **<br>1.å¼•ç”¨åœ¨ä½¿ç”¨æ—¶å¼åˆæ³•çš„ï¼›<br>2.ä¸ä¼šæ‚¬ç©ºï¼ˆdangling referenceï¼‰<br>3.ä¸ä¼šåŒæ—¶å­˜åœ¨å†²çªçš„å¯å˜&#x2F;ä¸å¯å˜å¼•ç”¨ã€‚</p>
<p>ç”Ÿå‘½å‘¨æœŸå‚æ•°ç”¨Â â€˜a,Â â€˜bÂ ç­‰è¡¨ç¤ºï¼ˆæ’‡å·â€™å£°æ˜ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼‰ï¼Œç”¨æ³•ç±»ä¼¼äºæ³›å‹å‚æ•° ï¼ˆ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒRust ä¼šè‡ªåŠ¨æ¨æ–­ç”Ÿå‘½å‘¨æœŸï¼‰ï¼š<br>1.â€™aÂ å¹¶ä¸æ”¹å˜è¿è¡Œé€»è¾‘ï¼›<br>2.åªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™äº›å¼•ç”¨ä¹‹é—´çš„å…³ç³»â€</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>å¿…é¡»æ˜ç¡®æ ‡æ³¨çš„æƒ…å†µ</th>
<th>å¯ä»¥çœç•¥çš„æƒ…å†µ</th>
</tr>
</thead>
<tbody><tr>
<td>ç»“æ„ä½“</td>
<td>åŒ…å«å¼•ç”¨ç±»å‹çš„å­—æ®µï¼ˆæ— è®ºå¤šå°‘ä¸ªï¼‰</td>
<td>ä¸åŒ…å«å¼•ç”¨å­—æ®µï¼ˆæ— éœ€ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼‰</td>
</tr>
<tr>
<td>æ™®é€šå‡½æ•°</td>
<td>1.å¤šä¸ªå¼•ç”¨å‚æ•°ä¸”è¿”å›å¼•ç”¨</td>
<td>1.æ— è¿”å›å¼•ç”¨ï¼›2.å•ä¸ªå¼•ç”¨å‚æ•°ä¸”è¿”å›å¼•ç”¨</td>
</tr>
<tr>
<td>æ–¹æ³•</td>
<td>1.è¿”å›å¼•ç”¨æ¥è‡ªå¤–éƒ¨å‚æ•°ï¼ˆéselfï¼‰ï¼›2.å¤šä¸ªå¤–éƒ¨å¼•ç”¨å‚æ•°</td>
<td>1.è¿”å›å¼•ç”¨æ¥è‡ªselfï¼Œ2.æ— è¿”å›å¼•ç”¨</td>
</tr>
<tr>
<td>Trait&#x2F;æšä¸¾</td>
<td>åŒ…å«å¼•ç”¨ç±»å‹çš„å…³è”é¡¹æˆ–æ–¹æ³•å‚æ•° &#x2F; è¿”å›å€¼</td>
<td>ä¸åŒ…å«å¼•ç”¨ç±»å‹çš„å…³è”é¡¹æˆ–æ–¹æ³•</td>
</tr>
</tbody></table>
<h2 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h2><p>å½“ç»“æ„ä½“åŒ…å«å¼•ç”¨æ—¶ï¼Œå¿…é¡»ä¸ºè¿™äº›å¼•ç”¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸï¼Œä»¥ç¡®ä¿ç»“æ„ä½“çš„ç”Ÿå‘½å‘¨æœŸä¸è¶…è¿‡å®ƒæ‰€åŒ…å«çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>è‹¥ç»“æ„ä½“çš„å¤šä¸ªå¼•ç”¨æ¥è‡ªä¸åŒç”Ÿå‘½å‘¨æœŸï¼Œå¯ç”¨å¤šä¸ªå‚æ•°åŒºåˆ†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// ä¸¤ä¸ªå­—æ®µçš„ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œåˆ†åˆ«ç”¨&#x27;aå’Œ&#x27;bæ ‡æ³¨</span><br><span class="line">structÂ Article&lt;&#x27;a, &#x27;b&gt; &#123;</span><br><span class="line">    content: &amp;&#x27;a str, // å†…å®¹çš„ç”Ÿå‘½å‘¨æœŸä¸º&#x27;aÂ  Â Â </span><br><span class="line">    source: &amp;&#x27;b str, Â // æ¥æºçš„ç”Ÿå‘½å‘¨æœŸä¸º&#x27;b</span><br><span class="line">&#125;</span><br><span class="line">fnÂ main() &#123;Â  Â Â </span><br><span class="line">    letÂ content =Â String::from(&quot;Rust lifecycle intro&quot;);Â  Â Â </span><br><span class="line">    letÂ source =Â &quot;Wikipedia&quot;;Â // å­—ç¬¦ä¸²å­—é¢é‡ï¼Œç”Ÿå‘½å‘¨æœŸä¸º&#x27;static</span><br><span class="line">Â  Â Â letÂ art =Â ArticleÂ &#123;Â  Â  Â  Â Â </span><br><span class="line">        content: &amp;content,Â  Â  Â  Â Â </span><br><span class="line">        source: &amp;source,Â  Â  </span><br><span class="line">    &#125;;Â  Â Â </span><br><span class="line">    // artçš„ç”Ÿå‘½å‘¨æœŸå—é™äº&#x27;aï¼ˆcontentçš„ç”Ÿå‘½å‘¨æœŸï¼‰å’Œ&#x27;bï¼ˆsourceçš„ç”Ÿå‘½å‘¨æœŸï¼‰ä¸­è¾ƒçŸ­çš„ä¸€ä¸ª</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å‡½æ•°çš„å‚æ•°æˆ–è¿”å›å€¼å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå¯èƒ½éœ€è¦æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸã€‚<br>çœç•¥è§„åˆ™ï¼šç¼–è¯‘å™¨æœ‰3æ¡ç”Ÿå‘½å‘¨æœŸæ¨æ–­è§„åˆ™ï¼Œå…è®¸åœ¨å¸¸è§åœºæ™¯ä¸­çœç•¥æ˜¾å¼æ³¨è§£ï¼š<br>1.æ¯ä¸ªå¼•ç”¨å‚æ•°è·å–è‡ªå·±çš„å£°æ˜å‘¨æœŸå‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fn foo(x: &amp;i32) Â  Â  Â  Â  // éšå¼ï¼šfn foo&lt;&#x27;a&gt;(x: &amp;&#x27;a i32)</span><br><span class="line">fnÂ foo(x: &amp;i32, y: &amp;i32) // éšå¼ï¼šfn foo&lt;&#x27;a, &#x27;b&gt;(x: &amp;&#x27;a i32, y: &amp;&#x27;b i32)</span><br></pre></td></tr></table></figure>
<p>2.è‹¥åªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œå®ƒè¢«èµ‹äºˆæ‰€æœ‰è¾“å‡ºå£°æ˜å‘¨æœŸå‚æ•°ï¼›</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fn bar(x: &amp;str) -&gt; &amp;strÂ // éšå¼ï¼šfn bar&lt;&#x27;a&gt;(x: &amp;&#x27;aÂ str) -&gt; &amp;&#x27;a str</span><br></pre></td></tr></table></figure>
<p>3.è‹¥æœ‰å¤šä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œä½†å…¶ä¸­ä¸€ä¸ªæ˜¯&amp;selfæˆ–Â &amp;mut selfï¼Œåˆ™selfçš„ç”Ÿå‘½å‘¨æœŸå°†èµ‹äºˆæ‰€æœ‰è¾“å‡ºå‘¨æœŸå‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">impl&lt;&#x27;a&gt; ImportantExcerpt&lt;&#x27;a&gt; &#123;Â  Â  </span><br><span class="line">    fn announce(&amp;self, announcement: &amp;str) -&gt; &amp;strÂ &#123;Â  Â  Â  Â  </span><br><span class="line">        // éšå¼ï¼šfn announce&lt;&#x27;b&gt;(&amp;&#x27;a self, announcement: &amp;&#x27;b str) -&gt; &amp;&#x27;aÂ strÂ  Â  Â  Â  </span><br><span class="line">        println!(&quot;æ³¨æ„ï¼š&#123;&#125;&quot;, announcement);Â  Â  Â  Â  </span><br><span class="line">        self.partÂ  Â  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¿…é¡»æ˜ç¡®æ ‡æ³¨çš„æƒ…å†µï¼šå½“å‡½æ•°çš„è¿”å›å¼•ç”¨å¯èƒ½æ¥è‡ªå¤šä¸ªè¾“å…¥å¼•ç”¨ï¼Œæˆ–ç¼–è¯‘å™¨æ— æ³•æ¨æ–­è¿”å›å¼•ç”¨çš„æ¥æºæ—¶ï¼Œå¿…é¡»æ‰‹åŠ¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸï¼š<br>å¤šä¸ªè¾“å…¥å¼•ç”¨å‚æ•°ï¼Œä¸”è¿”å›å¼•ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// æ­£ç¡®ç¤ºä¾‹ï¼šæ ‡æ³¨ç”Ÿå‘½å‘¨æœŸ&#x27;aï¼Œè¯´æ˜xã€yå’Œè¿”å›å€¼å…±äº«åŒä¸€ç”Ÿå‘½å‘¨æœŸ</span><br><span class="line">// æ³¨è§£&#x27;aè¡¨ç¤ºï¼šè¿”å›çš„å¼•ç”¨å¿…é¡»æ¥è‡ªxæˆ–yï¼Œä¸”å…¶ç”Ÿå‘½å‘¨æœŸä¸è¶…è¿‡xå’Œyä¸­ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„é‚£ä¸ªã€‚</span><br><span class="line">fn longest&lt;&#x27;a&gt;(x: &amp;&#x27;a str,Â y: &amp;&#x27;a str) -&gt; &amp;&#x27;a str &#123;Â  Â Â </span><br><span class="line">    ifÂ x.len() &gt; y.len() &#123; x &#125;Â elseÂ &#123; y &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é™æ€ç”Ÿå‘½å‘¨æœŸ"><a href="#é™æ€ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="é™æ€ç”Ÿå‘½å‘¨æœŸ"></a>é™æ€ç”Ÿå‘½å‘¨æœŸ</h2><p>â€˜staticæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¡¨ç¤ºå¼•ç”¨å¯ä»¥å­˜æ´»åˆ°æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´ã€‚å¸¸è§ï¼š<br>1.å­—ç¬¦ä¸²å­—é¢é‡ï¼šå­˜å‚¨åœ¨ç¨‹åºçš„åªè¯»å†…å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸä¸ºâ€™staticã€‚<br>2.æ˜¾å¼å£°æ˜ä¸ºâ€™staticçš„å¼•ç”¨ï¼ˆéœ€ç¡®ä¿å¼•ç”¨çš„å€¼ç¡®å®èƒ½å­˜æ´»åˆ°ç¨‹åºç»“æŸï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰ã€‚</p>
]]></content>
      <tags>
        <tag>Rust</tag>
      </tags>
  </entry>
  <entry>
    <title>Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶</title>
    <url>/2023/04/30/View%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<p>åœ¨è®²åˆ°Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ä¹‹å‰è¦é¦–å…ˆäº†è§£ä¸€ä¸‹Activityçš„ç»„æˆï¼Œç„¶åä»æºç çš„è§’åº¦æ¥åˆ†æViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ã€‚</p>
<h2 id="ä¸€ã€æºç è§£æActivityçš„æ„æˆ"><a href="#ä¸€ã€æºç è§£æActivityçš„æ„æˆ" class="headerlink" title="ä¸€ã€æºç è§£æActivityçš„æ„æˆ"></a>ä¸€ã€æºç è§£æActivityçš„æ„æˆ</h2><p>ç‚¹å‡»äº‹ä»¶ç”¨MotionEventæ¥è¡¨ç¤ºï¼Œå½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶äº§ç”Ÿåï¼Œäº‹ä»¶æœ€å…ˆä¼ é€’ç»™Activityï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆäº†è§£ä¸€ä¸‹Activityçš„æ„æˆã€‚å½“æˆ‘ä»¬å†™Activityæ—¶ï¼Œä¼šè°ƒç”¨setContentView()<br>æ–¹æ³•æ¥åŠ è½½å¸ƒå±€ã€‚ç°åœ¨æ¥çœ‹çœ‹setContentView()æ–¹æ³•æ˜¯æ€ä¹ˆå®ç°çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public void setContentView(@LayoutRes int layoutResID) &#123;</span><br><span class="line">	getWindow().setContentView(layoutResID);</span><br><span class="line">	initWindowDecorActionBar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè°ƒç”¨äº†getWindow().setContentView(layoutResID)ï¼ŒgetWindow()æŒ‡çš„PhoneWindowï¼Œåœ¨PhoneWindowçš„setContentView()æ–¹æ³•é‡Œï¼Œå…ˆæ˜¯æœ‰installDecor()æ–¹æ³•<br>è¯¥æ–¹æ³•é‡Œé¢è°ƒç”¨äº†generateDecor()æ–¹æ³•ï¼Œåœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªDecorViewï¼Œè¿™ä¸ªDecorViewå°±æ˜¯Activityçš„æ ¹View.<br>åœ¨PhoneWindowä¸­çš„installDecor()æ–¹æ³•ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªgenerateLayout(mDecor)æ–¹æ³•ï¼Œå…¶ä¸»è¦å†…å®¹å°±æ˜¯æ ¹æ®ä¸åŒçš„æƒ…å†µåŠ è½½ä¸åŒçš„å¸ƒå±€ç»™layoutResourceã€‚</p>
<p>ä¸€ä¸ªActicityåŒ…å«ä¸€ä¸ªWindowå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ç”±PhoneWindowæ¥å®ç°çš„ã€‚PhoneWindowå°†DecorViewä½œä¸ºæ•´ä¸ªåº”ç”¨çª—å£çš„æ ¹ï¼Œè€Œè¿™ä¸ªDecorViewåˆå°†å±å¹•<br>åˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€ä¸ªæ˜¯TitleViewï¼Œå¦ä¸€ä¸ªæ˜¯ContentViewï¼Œè€Œæˆ‘ä»¬å¹³å¸¸åšåº”ç”¨æ‰€å†™çš„å¸ƒå±€æ­£æ˜¯å±•ç¤ºåœ¨ContentViewä¸­çš„ã€‚</p>
<h2 id="äºŒã€æºç è§£æViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"><a href="#äºŒã€æºç è§£æViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶" class="headerlink" title="äºŒã€æºç è§£æViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"></a>äºŒã€æºç è§£æViewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶</h2><p>å½“æˆ‘ä»¬ç‚¹å‡»å±å¹•æ—¶ï¼Œå°±äº§ç”Ÿäº†ç‚¹å‡»äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶è¢«å°è£…æˆä¸€ä¸ªç±»ï¼šMotionEventã€‚è€Œå½“è¿™ä¸ªMotionEventäº§ç”Ÿåï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šå°†è¿™ä¸ªMotionEventä¼ é€’ç»™Viewçš„å±‚çº§ï¼Œ<br>MotionEventåœ¨Viewä¸­çš„å±‚çº§ä¼ é€’å°±æ˜¯ç‚¹å‡»äº‹ä»¶åˆ†å‘ã€‚äº‹ä»¶åˆ†å‘çš„ä¸‰ä¸ªé‡è¦æ–¹æ³•ï¼š<br>dispatchTouchEvent(MotionEvent ev)â€”â€”ç”¨æ¥è¿›è¡Œäº‹ä»¶çš„åˆ†å‘ã€‚<br>onInterceptTouchEvent(MotionEvent ev)â€”â€”ç”¨æ¥è¿›è¡Œäº‹ä»¶çš„æ‹¦æˆªï¼Œåœ¨dispatchTouchEvent()æ–¹æ³•ä¸­è°ƒç”¨ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯Viewæ²¡æœ‰æä¾›è¯¥æ–¹æ³•ã€‚<br>onTouchEvent(MotionEvent ev)â€”â€”ç”¨æ¥å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨dispatchTouchEvent()æ–¹æ³•ä¸­è°ƒç”¨ã€‚</p>
<h3 id="1-Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"><a href="#1-Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶" class="headerlink" title="1.Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶"></a>1.Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶</h3><p>å½“ç‚¹å‡»äº‹ä»¶äº§ç”Ÿåï¼Œäº‹ä»¶é¦–å…ˆä¼šä¼ é€’ç»™å½“å‰çš„Activityï¼Œè¿™ä¼šè°ƒç”¨Activityçš„dispatchTouchEvent()æ–¹æ³•ï¼Œå½“ç„¶å…·ä½“çš„äº‹ä»¶å¤„ç†å·¥ä½œéƒ½æ˜¯äº¤ç”±Activityä¸­çš„PhoneWindowæ¥å®Œæˆçš„ï¼Œç„¶åPhoneWindowå†æŠŠäº‹ä»¶å¤„ç†å·¥ä½œäº¤ç»™DecorViewï¼Œä¹‹åå†ç”±<br>DecorViewå°†äº‹ä»¶å¤„ç†å·¥ä½œäº¤ç»™æ ¹ViewGroupã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ViewGroupçš„dispatchTouchEvent()æ–¹æ³•å¼€å§‹åˆ†æï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line">public boolean dispatchTouchEvent (MotionEvent ev) &#123;</span><br><span class="line">	...</span><br><span class="line">	if (actionMasked == MotionEvent.ACTION_ DOWN) &#123;</span><br><span class="line">		cancelAndClearTouchTargets (ev);</span><br><span class="line">		resetTouchState () ;</span><br><span class="line">	&#125;</span><br><span class="line">	if (actionMasked == MotionEvent.ACTION_DOWN</span><br><span class="line">|		|| mFirstTouchTarget != null) (//1</span><br><span class="line">		final boolean disallowIntercept = (GroupFlags &amp; FLAG_DISALLOW_</span><br><span class="line">		INTERCEPT) != 0;//2 if (!disallowIntercept) I</span><br><span class="line">		intercepted = onInterceptTouchEvent (ev);</span><br><span class="line">		ev. setAction (action);</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		intercepted = false;</span><br><span class="line">	&#125;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		intercepted = true;</span><br><span class="line">	&#125;</span><br><span class="line">	...</span><br><span class="line">	return handled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œé¦–å…ˆåˆ¤æ–­äº‹ä»¶æ˜¯å¦Downäº‹ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–ï¼ŒresetTouchStateæ–¹æ³•ä¸­ä¼šæŠŠmFirstTouchTargetçš„å€¼ç½®ä¸ºnull<br>è¿™é‡Œä¸ºå•¥è¦åˆå§‹åŒ–å‘¢ï¼Ÿ<br>å› ä¸ºä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶åºåˆ—æ˜¯ä»DOWNå¼€å§‹ï¼Œä»¥UPç»“æŸçš„ã€‚æ‰€ä»¥å¦‚æœæ˜¯DOWNäº‹ä»¶ï¼Œé‚£ä¹ˆè¯´æ˜è¿™æ˜¯ä¸€ä¸ªæ–°çš„äº‹ä»¶åºåˆ—ï¼Œæ•…è€Œéœ€è¦åˆå§‹åŒ–ä¹‹å‰çš„çŠ¶æ€ã€‚<br>å½“ViewGroupè¦æ‹¦æˆªäº‹ä»¶çš„æ—¶å€™ï¼Œé‚£ä¹ˆåç»­çš„äº‹ä»¶åºåˆ—éƒ½å°†äº¤ç»™å®ƒå¤„ç†ï¼Œè€Œä¸ç”¨å†è°ƒç”¨onInterceptTouchEvent()æ–¹æ³•äº†ï¼Œæ‰€ä»¥ï¼ŒonInterceptTouchEvent()<br>æ–¹æ³•å¹¶ä¸æ˜¯æ¯æ¬¡äº‹ä»¶éƒ½ä¼šè°ƒç”¨çš„ã€‚<br>onInterceptTouchEvent()æ–¹æ³•é»˜è®¤è¿”å›falseï¼Œä¸è¿›è¡Œæ‹¦æˆªã€‚å¦‚æœæƒ³è¦è®©ViewGroupæ‹¦æˆªäº‹ä»¶ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨è‡ªå®šä¹‰çš„ViewGroupä¸­é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚<br>åœ¨dispatchTouchEvent()æ–¹æ³•å‰©ä½™çš„éƒ¨åˆ†ï¼š<br>é¦–å…ˆéå†ViewGroupçš„å­å…ƒç´ ï¼Œåˆ¤æ–­å­å…ƒç´ æ˜¯å¦èƒ½å¤Ÿæ¥å—åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œå¦‚æœå­å…ƒç´ èƒ½å¤Ÿæ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶ï¼Œåˆ™äº¤ç”±å­å…ƒç´ æ¥å¤„ç†ã€‚éœ€è¦æ³¨æ„è¿™ä¸ªforå¾ªç¯<br>æ˜¯å€’åºéå†çš„ï¼Œå³ä»æœ€ä¸Šå±‚çš„å­Viewå¼€å§‹å¾€å†…å±‚éå†ã€‚ã€‚åŒæ—¶å®ƒä¹Ÿä¼šåˆ¤æ–­è§¦æ‘¸ç‚¹ä½ç½®æ˜¯å¦åœ¨å­viewçš„èŒƒå›´å†…æˆ–è€…å­Viewæ˜¯å¦æ­£åœ¨æ’­æ”¾åŠ¨ç”»ï¼Œå¦‚æœå‡ä¸ç¬¦åˆåˆ™<br>æ‰§è¡Œcontinueè¯­å¥ï¼Œè¡¨ç¤ºè¿™ä¸ªå­Viewä¸ç¬¦åˆæ¡ä»¶ï¼Œå¼€å§‹éå†ä¸‹ä¸€ä¸ªå­Viewã€‚<br>å¦‚æœæœ‰å­Viewï¼Œåˆ™è°ƒç”¨å­Viewçš„dispatchTouchEvent(event)æ–¹æ³•ï¼Œå¦‚æœViewGroupæ²¡æœ‰å­Viewï¼Œåˆ™è°ƒç”¨super.dispatchTouchEvent(event)æ–¹æ³•ã€‚viewgroupæ²¡æœ‰å­View<br>åˆ™è°ƒç”¨super.dispatchTouchEvent(event)æ–¹æ³•ã€‚ViewGroupæ˜¯é›†æˆViewçš„ã€‚åœ¨Viewçš„dispatchTouchEvent(event)ä¸­ï¼Œå¦‚æœOnTouchListenerä¸ä¸ºnullå¹¶ä¸”onTouchæ–¹æ³•è¿”å›trueï¼Œ<br>åˆ™è¡¨ç¤ºäº‹ä»¶è¢«æ¶ˆè´¹ï¼Œå°±ä¸ä¼šæ‰§è¡ŒonTouchEvent(event)ï¼Œå¦åˆ™å°±ä¼šæ‰§è¡Œï¼Œå¯ä»¥çœ‹å‡ºOnTouchListenerä¸­çš„onTouchæ–¹æ³•ä¼˜å…ˆçº§è¦é«˜äºonTouchEvent(event)ã€‚<br>åœ¨onTouchEvent()æ–¹æ³•ä¸­ï¼Œåªè¦Viewçš„Clickableå’ŒLong_clickableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œé‚£ä¹ˆonTouchEvent()æ–¹æ³•å°±ä¼šè¿”å›trueæ¶ˆè€—è¿™ä¸ªäº‹ä»¶ã€‚å‰é¢ä¸¤ä¸ªå˜é‡åˆ†åˆ«ä»£è¡¨<br>viewå¯ä»¥è¢«ç‚¹å‡»å’Œé•¿æŒ‰ç‚¹å‡»ï¼Œå¯ä»¥é€šè¿‡Viewçš„setClickableå’ŒsetLongClickableæ–¹æ³•æ¥è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Viewçš„setOnclickListenerå’ŒsetOnLongClickListeneræ¥è®¾ç½®ï¼Œå®ƒä»¬<br>ä¼šè‡ªåŠ¨å°†Viewè®¾ç½®ä¸ºLickableå’ŒLong_clickable<br>æ¥ç€åœ¨Action_UPäº‹ä»¶ä¼šè°ƒç”¨performClick()æ–¹æ³•ï¼Œå¦‚æœViewè®¾ç½®äº†OnClickListenerï¼Œé‚£ä¹ˆå®ƒçš„onClick()æ–¹æ³•å°±ä¼šè¢«æ‰§è¡Œã€‚</p>
<h3 id="ç‚¹å‡»äº‹ä»¶åˆ†å‘çš„ä¼ é€’è§„åˆ™"><a href="#ç‚¹å‡»äº‹ä»¶åˆ†å‘çš„ä¼ é€’è§„åˆ™" class="headerlink" title="ç‚¹å‡»äº‹ä»¶åˆ†å‘çš„ä¼ é€’è§„åˆ™"></a>ç‚¹å‡»äº‹ä»¶åˆ†å‘çš„ä¼ é€’è§„åˆ™</h3><p>å½“ç‚¹å‡»äº‹ä»¶äº§ç”Ÿåä¼šç”±Activityæ¥å¤„ç†ï¼Œä¼ é€’ç»™PhoneWindowï¼Œå†ä¼ é€’ç»™DecorViewï¼Œæœ€åä¼ é€’ç»™é¡¶å±‚çš„ViewGroupï¼Œä¸€èˆ¬åœ¨äº‹ä»¶ä¼ é€’ä¸­åªè€ƒè™‘ViewGroupçš„<br>onInterceptTouchEventæ–¹æ³•ï¼Œå› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä¼šé‡å†™dispatchTouchEvent()æ–¹æ³•ï¼Œå¯¹å‘€æ ¹ViewGroupï¼Œç‚¹å‡»äº‹ä»¶é¦–å…ˆä¼ é€’ç»™å®ƒdispatchTouchEvent()æ–¹æ³•ï¼Œå¦‚æœè¯¥ViewGroupçš„onInterceptTouchEvent()æ–¹æ³•è¿”å›trueï¼Œåˆ™è¡¨ç¤ºå®ƒ<br>è¦æ‹¦æˆªè¿™ä¸ªäº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶å°±ä¼šäº¤ç»™å®ƒçš„onTouchEvent()æ–¹æ³•å¤„ç†ï¼Œå¦‚æœonInterceptTouchEventï¼ˆï¼‰æ–¹æ³•è¿”å›falseï¼Œåˆ™è¡¨ç¤ºå®ƒä¸æ‹¦æˆªè¿™ä¸ªäº‹ä»¶ï¼Œåˆ™è¿™ä¸ªäº‹ä»¶ä¼šäº¤ç»™å®ƒçš„å­å…ƒç´ çš„dispatchTouchEventï¼ˆï¼‰æ¥å¤„ç†ï¼Œå¦‚æ­¤åå¤ä¸‹å»ã€‚å¦‚æœä¼ é€’ç»™åº•å±‚çš„Viewï¼Œ<br>Viewæ˜¯æ²¡æœ‰å­Viewçš„ï¼Œå°±ä¼šè°ƒç”¨Viewçš„dispatchTouchEventï¼ˆï¼‰æ–¹æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æœ€ç»ˆä¼šè°ƒç”¨Viewçš„onTouchEventï¼ˆï¼‰æ–¹æ³•ã€‚</p>
]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Rustå­¦ä¹ ç¬”è®°</title>
    <url>/2023/06/20/Rust%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Rust è¯­è¨€æ˜¯ä¸€ç§é«˜æ•ˆã€å¯é çš„é€šç”¨é«˜çº§è¯­è¨€ã€‚å…¶é«˜æ•ˆä¸ä»…é™äºå¼€å‘æ•ˆç‡ï¼Œå®ƒçš„æ‰§è¡Œæ•ˆç‡ä¹Ÿæ˜¯ä»¤äººç§°èµçš„ï¼Œæ˜¯ä¸€ç§å°‘æœ‰çš„å…¼é¡¾å¼€å‘æ•ˆç‡å’Œæ‰§è¡Œæ•ˆç‡çš„è¯­è¨€ã€‚</p>
<span id="more"></span>
<p>Rustè¯­è¨€çš„ç‰¹ç‚¹<br>é«˜æ€§èƒ½ - Rust é€Ÿåº¦æƒŠäººä¸”å†…å­˜åˆ©ç”¨ç‡æé«˜ã€‚ç”±äºæ²¡æœ‰è¿è¡Œæ—¶å’Œåƒåœ¾å›æ”¶ï¼Œå®ƒèƒ½å¤Ÿèƒœä»»å¯¹æ€§èƒ½è¦æ±‚ç‰¹åˆ«é«˜çš„æœåŠ¡ï¼Œå¯ä»¥åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šè¿è¡Œï¼Œè¿˜èƒ½è½»æ¾å’Œå…¶ä»–è¯­è¨€é›†æˆã€‚</p>
<p>å¯é æ€§ - Rust ä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿå’Œæ‰€æœ‰æƒæ¨¡å‹ä¿è¯äº†å†…å­˜å®‰å…¨å’Œçº¿ç¨‹å®‰å…¨ï¼Œè®©æ‚¨åœ¨ç¼–è¯‘æœŸå°±èƒ½å¤Ÿæ¶ˆé™¤å„ç§å„æ ·çš„é”™è¯¯ã€‚</p>
<p>ç”Ÿäº§åŠ› - Rust æ‹¥æœ‰å‡ºè‰²çš„æ–‡æ¡£ã€å‹å¥½çš„ç¼–è¯‘å™¨å’Œæ¸…æ™°çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œ è¿˜é›†æˆäº†ä¸€æµçš„å·¥å…· â€”â€” åŒ…ç®¡ç†å™¨å’Œæ„å»ºå·¥å…·ï¼Œ æ™ºèƒ½åœ°è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€éªŒçš„å¤šç¼–è¾‘å™¨æ”¯æŒï¼Œ ä»¥åŠè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ç­‰ç­‰ã€‚</p>
<p>å­¦ä¹ ç¬”è®°å·²ä¸Šä¼ è‡³gitHubï¼š<a href="https://github.com/thefu/RustPrroject">https://github.com/thefu/RustPrroject</a></p>
]]></content>
      <tags>
        <tag>Rust</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidä¸­viewçš„ç†è§£</title>
    <url>/2022/09/25/Android%E4%B8%ADview%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<h3 id="Viewæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Viewæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Viewæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Viewæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Viewæ˜¯å±å¹•ä¸Šçš„ä¸€å—çŸ©å½¢åŒºåŸŸï¼Œå®ƒè´Ÿè´£ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªåŒºåŸŸï¼Œå¹¶ä¸”å“åº”è¿™ä¸ªåŒºåŸŸå†…çš„äº‹ä»¶ã€‚å¯ä»¥è¯´ï¼Œæ‰‹æœºå±å¹•ä¸Šçš„ä»»æ„ä¸€éƒ¨åˆ†çœ‹å¾—è§çš„åœ°æ–¹éƒ½æ˜¯viewï¼Œå®ƒå¾ˆå¸¸è§ï¼Œæ¯”å¦‚TextViewã€imageviewã€buttonã€ä»¥åŠlinearLayoutã€relativelayoutéƒ½æ˜¯ç»§æ‰¿äºviewçš„ã€‚<br>å¯¹äºactivityæ¥è¯´ï¼Œæˆ‘ä»¬é€šè¿‡setContentViewæ·»åŠ çš„å¸ƒå±€åˆ°activityä¸Šï¼Œå®é™…ä¸Šéƒ½æ˜¯æ·»åŠ åˆ°äº†activityå†…éƒ¨çš„decorviewä¸Šé¢ï¼Œè¿™ä¸ªDecorViewï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªFrameLayoutï¼Œå› æ­¤å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„å¸ƒå±€æ˜¯æ·»åŠ åˆ°äº†FrameLayouté‡Œé¢ã€‚</p>
<h2 id="Viewç»˜åˆ¶çš„ä¸‰ä¸ªæµç¨‹"><a href="#Viewç»˜åˆ¶çš„ä¸‰ä¸ªæµç¨‹" class="headerlink" title="Viewç»˜åˆ¶çš„ä¸‰ä¸ªæµç¨‹"></a>Viewç»˜åˆ¶çš„ä¸‰ä¸ªæµç¨‹</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨è‡ªå®šä¹‰viewçš„æ—¶å€™ä¸€èˆ¬éœ€è¦é‡å†™çˆ¶ç±»çš„onMeasure()ã€onLayout()ã€onDraw()ä¸‰ä¸ªæ–¹æ³•ï¼Œæ¥å®Œæˆè§†å›¾çš„å±•ç¤ºè¿‡ç¨‹ã€‚å½“ç„¶ï¼Œè¿™ä¸‰ä¸ªæš´éœ²ç»™å¼€å‘è€…é‡å†™çš„æ–¹æ³•åªä¸è¿‡æ˜¯æ•´ä¸ªç»˜åˆ¶æµç¨‹çš„å†°å±±ä¸€è§’ï¼Œæ›´å¤šå¤æ‚çš„å¹•åå·¥ä½œï¼Œéƒ½è®©ç³»ç»Ÿç»™ä»£åŠ³äº†ï¼Œä¸€ä¸ªå®Œæ•´çš„ç»˜åˆ¶æµç¨‹åŒ…æ‹¬measureã€layoutã€drawä¸‰ä¸ªæ­¥éª¤ï¼Œå…¶ä¸­ï¼š<br>measureï¼šæµ‹é‡ã€‚ç³»ç»Ÿä¼šç°æ ¹æ®xmlå¸ƒå±€æ–‡ä»¶å’Œä»£ç ä¸­å¯¹æ§ä»¶å±æ€§çš„è®¾ç½®ï¼Œæ¥è·å–æˆ–è€…è®¡ç®—å‡ºæ¯ä¸ªviewå’Œviewgroupçš„å°ºå¯¸ï¼Œå¹¶å°†è¿™äº›å°ºå¯¸ä¿å­˜ä¸‹æ¥ã€‚<br>layoutï¼šå¸ƒå±€ã€‚æ ¹æ®æµ‹é‡å‡ºçš„ç»“æœä»¥åŠå¯¹åº”çš„å‚æ•°ï¼Œæ¥ç¡®å®šæ¯ä¸€ä¸ªæ§ä»¶åº”è¯¥æ˜¾ç¤ºçš„ä½ç½®ã€‚<br>drawï¼šç»˜åˆ¶ã€‚ç¡®å®šå¥½ä½ç½®åï¼Œå°±å°†è¿™äº›æ§ä»¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚</p>
<h2 id="Androidè§†å›¾å±‚æ¬¡ç»“æœç®€ä»‹"><a href="#Androidè§†å›¾å±‚æ¬¡ç»“æœç®€ä»‹" class="headerlink" title="Androidè§†å›¾å±‚æ¬¡ç»“æœç®€ä»‹"></a>Androidè§†å›¾å±‚æ¬¡ç»“æœç®€ä»‹</h2><p>åœ¨ä»‹ç»viewç»˜åˆ¶æµç¨‹ä¹‹é—´ï¼Œå’±ä»¬å…ˆæ¥å•ä»‹ç»ä¸€ä¸‹Androidè§†å›¾å±‚æ¬¡ç»“æœä»¥åŠDecorViewå› ä¸ºviewçš„ç»˜åˆ¶æµç¨‹çš„å…¥å£å’ŒDecorViewæœ‰ç€å¯†åˆ‡çš„è”ç³»ã€‚</p>
<p>å’±ä»¬å¹³æ—¶çœ‹åˆ°çš„è§†å›¾ï¼Œå…¶å®å­˜åœ¨å¦‚ä¸Šçš„åµŒå¥—å…³ç³»ã€‚ä¸Šå›¾æ˜¯é’ˆå¯¹æ¯”è¾ƒè€çš„Androidç³»ç»Ÿç‰ˆæœ¬ä¸­åˆ¶ä½œçš„ï¼Œæ–°çš„ç‰ˆæœ¬ä¸­ä¼šç•¥æœ‰å‡ºå…¥ï¼Œè¿˜æœ‰ä¸€ä¸ªçŠ¶æ€æ ï¼Œä½†æ•´ä½“ä¸Šæ²¡å˜ã€‚æˆ‘ä»¬å¹³æ—¶åœ¨activityä¸­setContentView(â€¦)ä¸­å¯¹åº”layoutå†…å®¹ï¼Œå¯¹åº”çš„æ˜¯ä¸Šå›¾ä¸­viewgropçš„æ ‘çŠ¶ç»“æ„ï¼Œå®é™…ä¸Šæ·»åŠ åˆ°ç³»ç»Ÿä¸­æ—¶ï¼Œä¼šå†è£¹ä¸Šä¸€å±‚FrameLayoutï¼Œå°±æ˜¯ä¸Šå›¾ä¸­æœ€é‡Œé¢çš„æµ…è“è‰²éƒ¨åˆ†ã€‚<br>è¿™é‡Œå’±ä»¬å†é€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥ç»§ç»­æŸ¥çœ‹ã€‚Androidstudioå·¥å…·ä¸­æä¾›äº†ä¸€ä¸ªå¸ƒå±€è§‚å¯ŸæœŸå·¥å…·ï¼Œé€šè¿‡Tools &gt; android &gt; layout Inspectorå¯ä»¥æŸ¥çœ‹å…·ä½“æŸä¸ªactivityçš„å¸ƒå±€æƒ…å†µã€‚ä¸‹å›¾ä¸­ï¼Œå·¦è¾¹æ ‘çŠ¶ç»“æœå¯¹åº”äº†å³è¾¹çš„å¯è§†å›¾ï¼Œå¯è§DecorViewå°±æ˜¯æ•´ä¸ªç•Œé¢çš„æ ¹è§†å›¾ï¼Œå¯¹åº”å³è¾¹çš„çº¢è‰²æ¡†ï¼Œæ˜¯æ•´ä¸ªå±å¹•çš„å¤§å°ã€‚é»„è‰²è¾¹æ¡†ä¸ºçŠ¶æ€æ éƒ¨åˆ†ï¼›é‚£ä¸ªç»¿è‰²è¾¹æ¡†ä¸­æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ç™½æ¡†ä¸­çš„actionBarï¼Œå¯¹åº”äº†ä¸Šå›¾ä¸­ç´«è‰²éƒ¨åˆ†çš„TitleActionBaréƒ¨åˆ†ï¼Œå³æ ‡é¢˜æ ï¼Œå¹³æ—¶å’±ä»¬å¯ä»¥åœ¨activityä¸­å°†å…¶éšè—æ‰ï¼›å¦å¤–ä¸€ä¸ªè“è‰²è¾¹æ¡†éƒ¨åˆ†ï¼Œå¯¹åº”ä¸Šå›¾ä¸­æœ€é‡Œé¢çš„è“è‰²éƒ¨åˆ†ï¼Œå³contentviewéƒ¨åˆ†ï¼Œä¸‹å›¾ä¸­å·¦è¾¹æœ‰ä¸¤ä¸ªè“è‰²æ¡†ï¼Œä¸Šé¢é‚£ä¸ªä¸­æœ‰ä¸ªå¸ƒå±€â€content_layoutâ€ï¼Œå’±ä»¬èƒ½é€šè¿‡layoutå¸ƒå±€æ–‡ä»¶ç›´æ¥å®Œå…¨æ“ä½œçš„ä¹Ÿå°±æ˜¯è¿™ä¸€å—ï¼Œå½“å…¶è¢«addåˆ°è§†å›¾ç³»ç»Ÿä¸­æ—¶ï¼Œä¼šè¢«è¿‡ä¸ŠcontentFramelayoutï¼ˆæ˜¾ç„¶æ˜¯FrameLayoutçš„å­ç±»ï¼‰ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ·»åŠ åˆ°layout.xmlè§†å›¾çš„æ–¹æ³•å«setContentView()è€Œä¸å«setView()çš„åŸå› äº†ã€‚</p>
<h2 id="æ•…äº‹å¼€å§‹çš„åœ°æ–¹"><a href="#æ•…äº‹å¼€å§‹çš„åœ°æ–¹" class="headerlink" title="æ•…äº‹å¼€å§‹çš„åœ°æ–¹"></a>æ•…äº‹å¼€å§‹çš„åœ°æ–¹</h2><p>å¦‚æœå¯¹activityçš„å¯åŠ¨æµç¨‹æœ‰ä¸€å®šçš„äº†è§£çš„è¯ï¼Œåº”è¯¥çŸ¥é“è¿™ä¸ªå¯åŠ¨ä¼šåœ¨activityThread.javaç±»ä¸­å®Œæˆï¼Œåœ¨å¯åŠ¨activityçš„è¿‡ç¨‹ä¸­ï¼Œä¼šè°ƒç”¨handleResumeActivity()æ–¹æ³•ï¼Œå…³äºè§†å›¾çš„ç»˜åˆ¶è¿‡ç¨‹æœ€åˆå°±æ˜¯ä»è¿™ä¸ªæ–¹æ³•å¼€å§‹çš„ã€‚</p>
<h3 id="1-viewç»˜åˆ¶èµ·æºUMLæ—¶åºå›¾"><a href="#1-viewç»˜åˆ¶èµ·æºUMLæ—¶åºå›¾" class="headerlink" title="1.viewç»˜åˆ¶èµ·æºUMLæ—¶åºå›¾"></a>1.viewç»˜åˆ¶èµ·æºUMLæ—¶åºå›¾</h3><p>æ•´ä¸ªè°ƒç”¨é“¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒçŸ¥é“ViewRootImplç±»ä¸­çš„performTraversals()ä¸­ï¼Œæ‰æ­£å¼å¼€å§‹ç»˜åˆ¶æµç¨‹äº†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯ä»¥è¯¥æ–¹æ³•ä½œä¸ºæ­£å¼ç»˜åˆ¶çš„æºå¤´ã€‚</p>
<h3 id="2-handResumeActivity-æ–¹æ³•"><a href="#2-handResumeActivity-æ–¹æ³•" class="headerlink" title="2.handResumeActivity()æ–¹æ³•"></a>2.handResumeActivity()æ–¹æ³•</h3><p>åœ¨è¿™å…ˆå¤§è‡´çœ‹ä¸€ä¸‹ActivityThreadç±»ä¸­çš„handleResumeActivityæ–¹æ³•ï¼Œå’±ä»¬è¿™é‡Œåªè´´å‡ºå…³é”®ä»£ç ï¼š<br><code>//===========ActivityThread.java========== final void handleResumeActivity(...) &#123;     ......     //è·Ÿè¸ªä»£ç åå‘ç°å…¶åˆå§‹èµ‹å€¼ä¸ºmWindow = new PhoneWindow(this, window, activityConfigCallback);     r.window = r.activity.getWindow();        //ä»PhoneWindowå®ä¾‹ä¸­è·å–DecorView     View decor = r.window.getDecorView();     ......     //è·Ÿè¸ªä»£ç åå‘ç°ï¼Œvmå€¼ä¸ºä¸Šè¿°PhoneWindowå®ä¾‹ä¸­è·å–çš„WindowManagerã€‚     ViewManager wm = a.getWindowManager();     ......     //å½“å‰windowçš„å±æ€§ï¼Œä»ä»£ç è·Ÿè¸ªæ¥çœ‹æ˜¯PhoneWindowçª—å£çš„å±æ€§     WindowManager.LayoutParams l = r.window.getAttributes();     ......     wm.addView(decor, l);     ...... &#125;</code><br>ä¸Šè¿°ä»£ç ç¬¬å…«è¡Œä¸­ï¼ŒViewManageræ˜¯ä¸€ä¸ªæ¥å£ï¼ŒaddViewæ˜¯å…¶ä¸­å®šä¹‰ä¸€ä¸ªç©ºæ–¹æ³•ï¼ŒWindowManageræ˜¯å…¶å­ç±»ï¼ŒWindowManagerImplæ˜¯WindowManagerçš„å®ç°ç±»ï¼Œåœ¨ç¬¬å››è¡Œä»£ç ä¸­çš„r.windowçš„å€¼å¯ä»¥æ ¹æ®Activity.javaçš„å¦‚ä¸‹ä»£ç å¾—çŸ¥ï¼Œå…¶å€¼ä¸ºPhoneWindowå®ä¾‹ã€‚<br>&#96;&#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Activity.java&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>private Window mWindow;<br>public Window getWindow() {<br>   return mWindow;<br>}</p>
<p>final void attach(â€¦){<br>   â€¦â€¦<br>   mWindow &#x3D; new PhoneWindow(this, window, activityConfigCallback);<br>   â€¦â€¦<br>}&#96;</p>
<h3 id="3-ä¸¤ä¸ªé‡è¦å‚æ•°åˆ†æ"><a href="#3-ä¸¤ä¸ªé‡è¦å‚æ•°åˆ†æ" class="headerlink" title="3.ä¸¤ä¸ªé‡è¦å‚æ•°åˆ†æ"></a>3.ä¸¤ä¸ªé‡è¦å‚æ•°åˆ†æ</h3><p>ä¹‹æ‰€ä»¥è¦åœ¨è¿™é‡Œç‰¹æ„åˆ†æhandleResumeActivity()æ–¹æ³•ï¼Œé™¤äº†å› ä¸ºå®ƒæ˜¯æ•´ä¸ªç»˜åˆ¶æµç¨‹çš„æœ€åˆæºå¤´å¤–ï¼Œè¿˜æœ‰å°±æ˜¯addViewçš„ä¸¤ä¸ªå‚æ•°æ¯”è¾ƒé‡è¦ï¼Œå®ƒä»¬ç»è¿‡ä¸€å±‚ä¸€å±‚ä¼ é€’åè¿›å…¥åˆ°ViewRootImplä¸­ï¼Œåœ¨åé¢åˆ†æç»˜åˆ¶ä¸­è¦ç”¨åˆ°ã€‚è¿™é‡Œå†çœ‹çœ‹è¿™ä¸¤ä¸ªå‚æ•°çš„ç›¸å…³ä¿¡æ¯ï¼š<br>ï¼ˆ1ï¼‰å‚æ•°dector<br>&#96;&#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Activity.java&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>private Window mWindow;<br>public Window getWindow() {<br>   return mWindow;<br>}</p>
<p>final void attach(â€¦){<br>   â€¦â€¦<br>   mWindow &#x3D; new PhoneWindow(this, window, activityConfigCallback);<br>   â€¦â€¦<br>}<code>å¯è§decorå‚æ•°è¡¨ç¤ºçš„æ˜¯DecorViewå®ä¾‹ï¼Œæ³¨é‡Šä¸­ä¹Ÿæœ‰è¯´æ˜ï¼šè¿™æ˜¯windowçš„é¡¶çº§è§†å›¾ï¼ŒåŒ…å«äº†windowçš„decor ï¼ˆ2ï¼‰å‚æ•°l</code>&#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Window.java&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>&#x2F;&#x2F;The current window attributes.<br>    private final WindowManager.LayoutParams mWindowAttributes &#x3D;<br>        new WindowManager.LayoutParams();<br>â€¦â€¦<br>public final WindowManager.LayoutParams getAttributes() {<br>        return mWindowAttributes;<br>    }<br>â€¦â€¦</p>
<p>&#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;WindowManager.javaçš„å†…éƒ¨ç±»LayoutParams extends ViewGroup.LayoutParams&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>public LayoutParams() {<br>            super(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);<br>            â€¦â€¦<br>        }</p>
<p>&#x2F;&#x2F;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;ViewGroup.javaå†…éƒ¨ç±»LayoutParams&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>public LayoutParams(int width, int height) {<br>            this.width &#x3D; width;<br>            this.height &#x3D; height;<br>        }&#96;<br>è¯¥å‚æ•°è¡¨ç¤ºçš„æ˜¯PhoneWindowçš„LayoutParamså±æ€§ï¼Œå…¶widthå’Œheightå€¼å‡ä¸ºLayoutParmas.MATCH_PARENTã€‚<br>åœ¨æºç ä¸­ï¼ŒWindowPhoneå’ŒDecorViewé€šè¿‡ç»„åˆæ–¹æ³•è”ç³»åœ¨ä¸€èµ·çš„ï¼Œè€ŒDecorViewæ˜¯æ•´ä¸ªViewä½“ç³»çš„æ ¹Viewã€‚åœ¨å‰é¢handleResumeActivity()æ–¹æ³•ä»£ç ç‰‡æ®µä¸­ï¼Œå½“Activityå¯åŠ¨åï¼Œå°±é€šè¿‡ç¬¬14è¡Œçš„addViewæ–¹æ³•ï¼Œæ¥é—´æ¥è°ƒç”¨ViewRootImplç±»ä¸­çš„performTraversals()ï¼Œä»è€Œå®ç°è§†å›¾çš„ç»˜åˆ¶ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>å‡½æ•°å“åº”å¼ç¼–ç¨‹â€”â€”RxJava</title>
    <url>/2023/04/30/%E5%87%BD%E6%95%B0%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E2%80%94%E2%80%94RxJava/</url>
    <content><![CDATA[<p>å‡½æ•°å“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ã€‚æˆ‘ä»¬å¸¸è§çš„ç¼–ç¨‹èŒƒå¼ç”±å‘½ä»¤å¼ç¼–ç¨‹ã€å‡½æ•°å¼ç¼–ç¨‹å’Œé€»è¾‘å¼ç¼–ç¨‹ã€‚æˆ‘ä»¬å¸¸è§çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§å‘½ä»¤å¼ç¼–ç¨‹ã€‚å‘½ä»¤å¼ç¼–ç¨‹æ˜¯é¢å‘è®¡ç®—æœºç¡¬ä»¶çš„æŠ½è±¡ï¼Œ<br>æœ‰å˜é‡ã€èµ‹å€¼è¯­å¥ã€è¡¨è¾¾å¼å’Œæ§åˆ¶è¯­å¥ã€‚è€Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯é¢å‘æ•°å­¦çš„æŠ½è±¡ï¼Œå°†è®¡ç®—æè¿°ä¸ºä¸€ç§è¡¨è¾¾å¼æ±‚èŒï¼Œå‡½æ•°å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å®šä¹‰ï¼Œå¹¶ä¸”å¯ä»¥å¯¹å‡½æ•°è¿›è¡Œç»„åˆã€‚<br>å“åº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„ç¼–ç¨‹èŒƒå¼ï¼Œæ•°æ®æ›´æ–°æ˜¯ç›¸å…³è”çš„ã€‚æŠŠå‡½æ•°å¼ç¼–ç¨‹é‡Œçš„ä¸€å¥—æ€è·¯å’Œå“åº”å¼ç¼–ç¨‹åˆèµ·æ¥å°±æ˜¯å‡½æ•°å“åº”å¼ç¼–ç¨‹ã€‚<br>åœ¨Androidå¼€å‘ä¸­ä½¿ç”¨å‡½æ•°å“åº”å¼ç¼–ç¨‹çš„ä¸»è¦æœ‰ä¸¤å¤§æ¡†æ¶ï¼šä¸€ä¸ªæ˜¯RxJavaï¼Œå¦ä¸€ä¸ªæ˜¯Googleæ¨å‡ºçš„Ageraã€‚</p>
<p>RxJavaæ˜¯ReactiveXçš„ä¸€ç§Javaå®ç°ï¼ŒReactiveXæ˜¯Reactive Extensionsçš„ç¼©å†™ï¼Œä¸€èˆ¬ç®€å†™ä¸ºRxã€‚<br>å¾®è½¯çš„å®šä¹‰æ˜¯ï¼šRxæ˜¯ä¸€ä¸ªå‡½æ•°åº“ï¼Œè®©å¼€å‘è€…å¯ä»¥åˆ©ç”¨å¯è§‚å¯Ÿåºåˆ—å’ŒLINQé£æ ¼æŸ¥è¯¢æ“ä½œç¬¦æ¥ç¼–å†™å¼‚æ­¥å’ŒåŸºäºäº‹ä»¶çš„ç¨‹åºã€‚å¼€å‘è€…å¯ä»¥ç”¨Observablesè¡¨ç¤ºå¼‚æ­¥æ•°æ®æµï¼Œç”¨<br>LINQæ“ä½œç¬¦æŸ¥è¯¢ä¸€éƒ¨æ•°æ®æµï¼Œç”¨Schedulerså‚æ•°åŒ–ä¸€éƒ¨æ•°æ®æµçš„å¹¶å‘å¤„ç†ï¼ŒRxå¯ä»¥è¿™æ ·å®šä¹‰ï¼šRx &#x3D; Observables+LINQ+Schedulersã€‚</p>
<p>1.ä¸ºä½•è¦ç”¨RxJava<br>è¯´åˆ°å¼‚æ­¥æ“ä½œï¼Œæˆ‘ä»¬ä¼šæƒ³åˆ°Androidçš„AsyncTaskå’ŒHandlerã€‚ä½†æ˜¯éšç€è¯·æ±‚çš„æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œä»£ç é€»è¾‘å°†ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚è€ŒRxJavaå´ä»æ—§èƒ½ä¿æŒæ¸…æ™°çš„é€»è¾‘ã€‚<br>RxJavaçš„åŸç†å°±æ˜¯åˆ›å»ºä¸€ä¸ªObservableå¯¹è±¡æ¥å¹²æ´»ï¼Œç„¶åä½¿ç”¨å„ç§æ“ä½œç¬¦å»ºç«‹èµ·æ¥çš„é“¾å¼æ“ä½œï¼Œå°±å¦‚åŒæµæ°´çº¿ä¸€æ ·ï¼ŒæŠŠä½ æƒ³è¦å¤„ç†çš„æ•°æ®ä¸€æ­¥ä¸€æ­¥åœ°åŠ å·¥æˆä½ <br>æƒ³è¦çš„æˆå“ï¼Œç„¶åå‘å°„ç»™Subscriberå¤„ç†</p>
<p>2.RxJavaä¸è§‚å¯Ÿè€…æ¨¡å¼<br>RxJavaçš„å¼‚æ­¥æ“ä½œæ˜¯é€šè¿‡æ‰©å±•çš„è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°çš„ã€‚RxJavaæœ‰4ä¸ªè§’è‰²Observableã€Observerã€Subscriberå’ŒSujectï¼Œè¿™4ä¸ªè§’è‰²åé¢ä¼šå…·ä½“è®²è§£ã€‚<br>Observableå’ŒObserver é€šè¿‡subscribeæ–¹æ³•å®ç°è®¢é˜…å…³ç³»ï¼ŒObservableå°±å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™é€šçŸ¥Observer</p>
<p>3.RxJavaçš„åŸºæœ¬å®ç°<br>1ï¼‰åˆ›å»ºObserver(è§‚å¯Ÿè€…)<br>å®ƒå†³å®šäº‹ä»¶è§¦å‘çš„æ—¶å€™å°†æœ‰æ€æ ·çš„è¡Œä¸ºï¼Œå…¶ä¸­onCompletedã€onErrorå’ŒonNextæ˜¯å¿…é¡»è¦å®ç°çš„æ–¹æ³•ã€‚<br>2ï¼‰åˆ›å»ºObservable(è¢«è§‚å¯Ÿè€…)<br>å®ƒå†³å®šä»€ä¹ˆæ—¶å€™è§¦å‘äº‹ä»¶ä»¥åŠè§¦å‘æ€æ ·çš„äº‹ä»¶ã€‚RxJavaä½¿ç”¨createæ–¹æ³•ï¼Œjustæ–¹æ³•ï¼Œæˆ–è€…fromæ–¹æ¥åˆ›å»ºä¸€ä¸ªObservable<br>2ï¼‰Subscribe(è®¢é˜…)<br>è®¢é˜…åªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥äº†<br>observable.subscribe(subscriber)</p>
<p>3.Subject<br>subjectæ—¢å¯ä»¥æ˜¯ä¸€ä¸ªObserverï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªObserverable,å®ƒæ˜¯è¿æ¥Observerå’ŒObserverableçš„æ¡¥æ¢ï¼Œå› æ­¤ï¼ŒSubjectå¯ä»¥è¢«ç†è§£ä¸ºSubject&#x3D;Observable+Observerã€‚<br>RxJavaæä¾›äº†ä»¥ä¸‹4ç§Subject:</p>
<ol>
<li>PublishSubject<br>publishsubjectåªä¼šæŠŠåœ¨è®¢é˜…å‘ç”Ÿçš„äº‹ä»¶ç‚¹ä¹‹åæ¥è‡ªåŸå§‹Observableçš„æ•°æ®å‘ç”Ÿç»™è§‚å¯Ÿè€…ã€‚å¦‚æœè¦ç¡®ä¿æ¥è‡ªåŸå§‹Observableçš„æ‰€æœ‰æ•°æ®éƒ½è¢«åˆ†å‘ï¼Œ<br>åˆ™å¯ä»¥å½“æ‰€æœ‰è§‚å¯Ÿè€…éƒ½å·²ç»è®¢é˜…æ—¶æ‰å¼€å§‹å‘å°„æ•°æ®ï¼Œæˆ–è€…æ”¹ç”¨ReplaySubjectã€‚<br>2ï¼‰BehaviorSubject<br>å½“Observerè®¢é˜…BehaviorSubjectæ—¶ï¼Œå®ƒå¼€å§‹å‘å°„åŸå§‹Observableæœ€è¿‘å‘å°„çš„æ•°æ®<br>3ï¼‰ReplaySubject<br>ä¸ç®¡Observerä½•æ—¶è®¢é˜…ReplaySubjectï¼ŒReplaySubjectå‡ä¼šå‘å°„æ‰€æœ‰æ¥è‡ªåŸå§‹Observableçš„æ•°æ®ç»™Observerã€‚å¦‚æœä½¿ç”¨ReplaySubjectä½œä¸ºObserverï¼Œæ³¨æ„ä¸è¦åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è°ƒç”¨onNextã€onCompleteå’ŒonErroræ–¹æ³•ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´é¡ºåºé”™ä¹±ï¼Œå¹¶ä¸”è¿åäº†Observerè§„åˆ™ã€‚<br>4ï¼‰AsyncSubject<br>å½“Observableå®Œæˆæ—¶ï¼ŒAsyncSubjectåªä¼šå‘å°„æ¥è‡ªåŸå§‹Observableçš„æœ€åä¸€ä¸ªæ•°æ®</li>
</ol>
<p>4.RxJavaæ“ä½œç¬¦<br>RxJavaæ“ä½œç¬¦çš„ç±»å‹åˆ†ä¸ºåˆ›å»ºæ“ä½œç¬¦ã€å˜æ¢æ“ä½œç¬¦ã€è¿‡æ»¤æ“ä½œç¬¦ã€ç»„åˆæ“ä½œç¬¦ã€é”™è¯¯å¤„ç†æ“ä½œç¬¦ã€è¾…åŠ©æ“ä½œç¬¦ã€æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦ã€ç®—æœ¯å’Œèšåˆæ“ä½œç¬¦åŠè¿æ¥æ“ä½œç¬¦ç­‰ï¼Œ<br>è€Œè¿™äº›æ“ä½œç¬¦ç±»å‹ä¸‹åˆæœ‰å¾ˆå¤šæ“ä½œç¬¦ï¼Œæ¯ä¸ªæ“ä½œç¬¦å¯èƒ½è¿˜æœ‰å¾ˆå¤šå˜ä½“ã€‚</p>
<p>åˆ›å»ºæ“ä½œç¬¦ï¼šcreate,just,from,defer,range,interval,start,repeat,timer<br>å˜æ¢æ“ä½œç¬¦ï¼šmap,flatMap,concatMap,switchMapç­‰<br>è¿‡æ»¤æ“ä½œç¬¦ï¼šfilter,elementAt,distince,skip,take<br>ç»„åˆæ“ä½œç¬¦ï¼šstartWith,merge,concat,zip</p>
]]></content>
      <tags>
        <tag>RxJava</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£è¿›ç¨‹å’Œçº¿ç¨‹</title>
    <url>/2022/09/21/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><p>å¹³æ—¶helloworldè¿™æ ·çš„ç¨‹åºåœ¨ç°ä»£ç³»ç»Ÿä¸Šè¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæä¾›ä¸€ç§å‡è±¡ï¼Œå°±å¥½åƒç³»ç»Ÿä¸Šåªæœ‰è¿™ä¸ªç¨‹åºåœ¨è¿è¡Œã€‚ç¨‹åºçœ‹ä¸Šå»æ˜¯ç‹¬å åœ°ä½¿ç”¨å¤„ç†å™¨ã€ä¸»å­˜å’ŒIOè®¾å¤‡ã€‚å¤„ç†å™¨çœ‹ä¸Šå»å°±åƒåœ¨ä¸é—´æ–­åœ°ä¸€æ¡æ¥ä¸€æ¡æ‰§è¡Œç¨‹åºä¸­çš„æŒ‡ä»¤ï¼Œå³è¯¥ç¨‹åºçš„ä»£ç å’Œæ•°æ®æ˜¯ç³»ç»Ÿå†…å­˜ä¸­å”¯ä¸€çš„å¯¹è±¡ï¼Œè¿™äº›å‡è±¡æ˜¯é€šè¿‡è¿›ç¨‹çš„æ¦‚å¿µæ¥å®ç°çš„ï¼Œè¿›ç¨‹æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æœ€é‡è¦å’Œæœ€æˆåŠŸçš„æ¦‚å¿µä¹‹ä¸€ã€‚<br>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„ä¸€ç§æŠ½è±¡ã€‚åœ¨ä¸€ä¸ªç³»ç»Ÿä¸Šå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹éƒ½å¥½åƒåœ¨ç‹¬å åœ°ä½¿ç”¨ç¡¬ä»¶ã€‚è€Œå¹¶å‘è¿è¡Œï¼Œåˆ™æ˜¯è¯´ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤å’Œå¦ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤æ˜¯äº¤é”™æ‰§è¡Œçš„ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ã€‚éœ€è¦è¿è¡Œçš„è¿›ç¨‹æ•°æ˜¯å¤šäºå¯ä»¥è¿è¡Œå®ƒä»¬çš„CPUä¸ªæ•°çš„ã€‚ä¼ ç»Ÿç³»ç»Ÿåœ¨ä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œè€Œå…ˆè¿›çš„å¤šæ ¸å¤„ç†å™¨åŒæ—¶èƒ½å¤Ÿæ‰§è¡Œå¤šä¸ªç¨‹åºã€‚æ— è®ºæ˜¯åœ¨å•æ ¸è¿˜æ˜¯åœ¨å¤šæ ¸ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªCPUçœ‹ä¸Šå»éƒ½åƒæ˜¯åœ¨å¹¶å‘æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œè¿™æ˜¯é€šè¿‡å¤„ç†å™¨åœ¨è¿›ç¨‹é—´åˆ‡æ¢æ¥å®ç°çš„ã€‚æ“ä½œç³»ç»Ÿå®ç°è¿™ç§äº¤é”™æ‰§è¡Œçš„æœºåˆ¶ç§°ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ï¼ˆä¸ºäº†ç®€åŒ–ï¼Œä¸‹é¢çš„è®¨è®ºæˆ‘ä»¬åªè€ƒè™‘åŒ…å«ä¸€ä¸ªCPUçš„å•å¤„ç†å™¨ç³»ç»Ÿçš„æƒ…å†µï¼‰<br>æ“ä½œç³»ç»Ÿä¿æŒè·Ÿè¸ªè¿›ç¨‹è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ã€‚è¿™ç§çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬è®¸å¤šä¿¡æ¯ï¼Œæ¯”å¦‚PCå’Œå¯„å­˜å™¨æ–‡ä»¶çš„å½“å‰å€¼ï¼Œä»¥åŠä¸»å­˜çš„å†…å®¹ã€‚åœ¨ä»»ä½•ä¸€ä¸ªæ—¶åˆ»ï¼Œå•å¤„ç†å™¨ç³»ç»Ÿéƒ½åªèƒ½æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹çš„çš„ä»£ç ï¼Œå½“æ“ä½œç³»ç»Ÿå†³å®šè¦æŠŠæ§åˆ¶æƒä»å½“å‰è¿›ç¨‹è½¬ç§»åˆ°æŸä¸ªæ–°è¿›ç¨‹æ—¶ï¼Œå°±ä¼šè¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ŒåŠä¿å­˜å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œæ¢å¤æ–°è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åå°†æ§åˆ¶æƒä¼ é€’åˆ°æ–°è¿›ç¨‹ã€‚æ–°è¿›ç¨‹å°±ä¼šä»å®ƒä¸Šæ¬¡åœæ­¢çš„åœ°æ–¹å¼€å§‹ã€‚ä¸‹å›¾å±•ç¤ºäº†ç¨‹åºè¿è¡Œåœºæ™¯çš„åŸºæœ¬ç†å¿µã€‚<br><img src="https://s3.bmp.ovh/imgs/2022/09/25/9a7e5808598c7948.jpg"><br>ç¤ºä¾‹åœºæ™¯ä¸­æœ‰ä¸¤ä¸ªå¹¶å‘çš„è¿›ç¨‹ï¼šshellè¿›ç¨‹å’Œhelloè¿›ç¨‹ã€‚æœ€å¼€å§‹ï¼Œåªæœ‰shellè¿›ç¨‹åœ¨è¿è¡Œï¼Œå³ç­‰å¾…å‘½ä»¤è¡Œä¸Šçš„è¾“å…¥ã€‚å½“æˆ‘ä»¬è®©å®ƒè¿è¡Œhelloç¨‹åºæ—¶ï¼Œshellé€šè¿‡è°ƒç”¨ä¸€ä¸ªä¸“é—¨çš„å‡½æ•°ï¼Œå³ç³»ç»Ÿè°ƒç”¨ï¼Œæ¥æ‰§è¡Œæˆ‘ä»¬çš„è¯·æ±‚ï¼Œç³»ç»Ÿè°ƒç”¨ä¼šå°†æ§åˆ¶æƒä¼ é€’ç»™æ“ä½œç³»ç»Ÿã€‚æ“ä½œç³»ç»Ÿä¿å­˜shellè¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„helloè¿›ç¨‹ä»¥åŠå…¶ä¸Šä¸‹æ–‡ï¼Œç„¶åå°†æ§åˆ¶æƒä¼ ç»™æ–°çš„hellå’¯è¿›ç¨‹ã€‚helloè¿›ç¨‹ç»ˆæ­¢åï¼Œæ“ä½œç³»ç»Ÿæ¢å¤shellè¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†æ§åˆ¶æƒä¼ å›ç»™å®ƒï¼Œshellè¿›ç¨‹ä¼šç»§ç»­ç­‰å¾…ä¸‹ä¸€ä¸ªå‘½ä»¤è¡Œè¾“å…¥ã€‚<br>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä»ä¸€ä¸ªè¿›ç¨‹åˆ°å¦ä¸€ä¸ªè¿›ç¨‹çš„è½¬æ¢æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†çš„ï¼Œå†…æ ¸æ—¶æ“ä½œç³»ç»Ÿä»£ç å¸¸é©»ä¸»å­˜çš„éƒ¨åˆ†ã€‚å½“åº”ç”¨ç¨‹åºéœ€è¦æ“ä½œç³»ç»Ÿçš„æŸäº›æ“ä½œæ—¶ï¼Œæ¯”å¦‚è¯»å†™æ–‡ä»¶ï¼Œå®ƒå°±æ‰§è¡Œä¸€æ¡ç‰¹æ®Šçš„ç³»ç»Ÿè°ƒç”¨ï¼ˆsystem callï¼‰æŒ‡ä»¤ï¼Œå°†æ§åˆ¶æƒä¼ é€’ç»™å†…æ ¸ã€‚ç„¶åå†…æ ¸æ‰§è¡Œè¢«è¯·æ±‚çš„æ“ä½œå¹¶è¿”å›åº”ç”¨ç¨‹åºã€‚æ³¨æ„ï¼Œå†…æ ¸ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚ç›¸åï¼Œå®ƒæ˜¯ç³»ç»Ÿç®¡ç†å…¨éƒ¨è¿›ç¨‹æ‰€ç”¨ä»£ç å’Œæ•°æ®ç»“æ„çš„é›†åˆã€‚<br>å®ç°è¿›ç¨‹è¿™ä¸ªæŠ½è±¡æ¦‚å¿µéœ€è¦ä½çº§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè½¯ä»¶ä¹‹é—´ç´§å¯†åˆä½œã€‚</p>
<h2 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h2><p>å°½ç®¡é€šå¸¸æˆ‘ä»¬è®¤ä¸ºä¸€ä¸ªè¿›ç¨‹åªæœ‰å•ä¸€çš„æ§åˆ¶æµï¼Œä½†æ˜¯åœ¨ç°ä»£ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å®é™…ä¸Šå¯ä»¥ç”±å¤šä¸ªç§°ä¸ºçº¿ç¨‹çš„æ‰§è¡Œå•å…ƒç»„æˆï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¿è¡Œåœ¨è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶å…±äº«åŒæ ·çš„ä»£ç å’Œå…¨å±€æ•°æ®ã€‚ç”±äºç½‘ç»œæœåŠ¡å™¨ä¸­å¯¹å¹¶è¡Œå¤„ç†çš„éœ€æ±‚ï¼Œçº¿ç¨‹ç§°ä¸ºè¶Šæ¥è¶Šé‡è¦çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå› ä¸ºå¤šçº¿ç¨‹ä¹‹é—´æ¯”å¤šè¿›ç¨‹ä¹‹é—´æ›´å®¹æ˜“å…±äº«æ•°æ®ï¼Œä¹Ÿå› ä¸ºçº¿ç¨‹ä¸€èˆ¬æ¥è¯´éƒ½æ¯”è¿›ç¨‹æ›´é«˜æ•ˆã€‚å½“æœ‰å¤šå¤„ç†å™¨å¯ç”¨çš„æ—¶å€™ï¼Œå¤šçº¿ç¨‹ä¹Ÿæ˜¯ä¸€ç§ä½¿å¾—ç¨‹åºå¯ä»¥è¿è¡Œå¾—æ›´å¿«å¾—æ–¹æ³•ã€‚</p>
<h2 id="è™šæ‹Ÿå†…å­˜"><a href="#è™šæ‹Ÿå†…å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜"></a>è™šæ‹Ÿå†…å­˜</h2><p>è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå®ƒä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ä¸€ä¸ªå‡è±¡ï¼Œå³æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç‹¬å åœ°ä½¿ç”¨ä¸»å­˜ã€‚æ¯ä¸ªè¿›ç¨‹çœ‹åˆ°å†…å­˜éƒ½æ˜¯ä¸€è‡´å¾—ï¼Œç§°ä¸ºè™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ä¸‹å›¾æ‰€ç¤ºæ˜¯Linuxè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ˆå…¶ä»–Unixç³»ç»Ÿçš„è®¾è®¡ä¹Ÿä¸æ­¤ç±»ä¼¼ï¼‰ã€‚åœ¨Linuxä¸­ï¼Œåœ°å€ç©ºé—´æœ€ä¸Šé¢çš„åŒºåŸŸæ˜¯ä¿ç•™ç»™æ“ä½œç³»ç»Ÿä¸­çš„ä»£ç å’Œæ•°æ®çš„ï¼Œè¿™å¯¹æ‰€æœ‰è¿›ç¨‹æ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„ã€‚åœ°å€ç©ºé—´çš„åº•éƒ¨åŒºåŸŸå­˜æ”¾ç”¨æˆ·è¿›ç¨‹å®šä¹‰çš„ä»£ç å’Œæ•°æ®ã€‚è¯·æ³¨æ„ï¼Œé€”ä¸­çš„åœ°å€æ˜¯ä»ä¸‹å¾€ä¸Šå¢å¤§çš„ã€‚<br><img src="https://s3.bmp.ovh/imgs/2022/09/25/39151a55fce31299.png"><br>æ¯ä¸ªè¿›ç¨‹çœ‹åˆ°çš„è™šæ‹Ÿåœ°å€ç©ºé—´ç”±å¤§é‡å‡†ç¡®å®šä¹‰çš„åŒºæ„æˆï¼Œæ¯ä¸ªåŒºéƒ½æœ‰ä¸“é—¨çš„åŠŸèƒ½ï¼Œä»¥ä¸‹ä»æœ€ä½çš„åœ°å€å¼€å§‹ï¼Œé€æ­¥å‘ä¸Šä»‹ç»ï¼š</p>
<h3 id="ç¨‹åºä»£ç å’Œæ•°æ®"><a href="#ç¨‹åºä»£ç å’Œæ•°æ®" class="headerlink" title="ç¨‹åºä»£ç å’Œæ•°æ®"></a>ç¨‹åºä»£ç å’Œæ•°æ®</h3><p>å¯¹æ‰€æœ‰çš„è¿›ç¨‹æ¥è¯´ï¼Œä»£ç æ˜¯ä»åŒä¸€å›ºå®šåœ°å€å¼€å§‹ï¼Œç´§æ¥ç€çš„æ˜¯å’ŒPCå…¨å±€å˜é‡ç›¸å¯¹åº”çš„æ•°æ®ä½ç½®ã€‚ä»£ç å’Œæ•°æ®åŒºæ˜¯ç›´æ¥æŒ‰ç…§å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶çš„å†…å®¹åˆå§‹åŒ–çš„ï¼Œåœ¨ç¤ºä¾‹ä¸­å°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶helloï¼Œ</p>
<h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><p>ä»£ç å’Œæ•°æ®åŒºåç´§éšç€çš„æ˜¯è¿è¡Œæ—¶å †ã€‚ä»£ç å’Œæ•°æ®åŒºåœ¨è¿›ç¨‹ä¸€å¼€å§‹è¿è¡Œæ—¶å°±è¢«åˆ¶å®šäº†å¤§å°ï¼Œä¸æ­¤ä¸åŒï¼Œå½“è°ƒç”¨åƒmallocå’Œfreeè¿™æ ·çš„Cæ ‡å‡†åº“å‡½æ•°æ—¶ï¼Œå †å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ‰©å±•å’Œæ”¶ç¼©ã€‚</p>
<h3 id="å…±äº«åº“"><a href="#å…±äº«åº“" class="headerlink" title="å…±äº«åº“"></a>å…±äº«åº“</h3><p>å¤§çº¦åœ¨åœ°å€ç©ºé—´ä¸­çš„ä¸­é—´éƒ¨åˆ†æ˜¯ä¸€å—ç”¨æ¥å­˜æ”¾åƒCæ ‡å‡†åº“å’Œæ•°å­¦åº“è¿™æ ·çš„å…±äº«åº“çš„ä»£ç å’Œæ•°æ®çš„åŒºåŸŸï¼Œå…±äº«åº“çš„æ¦‚å¿µéå¸¸å¼ºå¤§ï¼Œ</p>
<h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><p>ä½äºç”¨æˆ·è™šæ‹Ÿåœ°å€ç©ºé—´é¡¶éƒ¨çš„æ˜¯ç”¨æˆ·æ ˆï¼Œç¼–è¯‘å™¨ç”¨å®ƒæ¥å®ç°å‡½æ•°è°ƒç”¨ï¼Œå’Œå †ä¸€æ ·ï¼Œç”¨æˆ·æ ˆåœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´å¯ä»¥åŠ¨æ€åœ°æ‰©å±•å’Œæ”¶ç¼©ã€‚ç‰¹åˆ«åœ°ï¼Œæ¯æ¬¡æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæ ˆå°±ä¼šå¢é•¿ï¼›ä»ä¸€ä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œæ ˆå°±ä¼šæ”¶ç¼©ã€‚</p>
<h3 id="å†…å­˜è™šæ‹Ÿå†…å­˜"><a href="#å†…å­˜è™šæ‹Ÿå†…å­˜" class="headerlink" title="å†…å­˜è™šæ‹Ÿå†…å­˜"></a>å†…å­˜è™šæ‹Ÿå†…å­˜</h3><p>åœ°å€ç©ºé—´é¡¶éƒ¨çš„åŒºåŸŸæ˜¯ä¸ºå†…æ ¸ä¿ç•™çš„ï¼Œä¸å…è®¸åº”ç”¨ç¨‹åºè¯»å†™è¿™ä¸ªåŒºåŸŸçš„å†…å®¹æˆ–è€…ç›´æ¥è°ƒç”¨å‘¢è€¦åˆä»£ç å®šä¹‰çš„å‡½æ•°ã€‚ç›¸åï¼Œå®ƒä»¬å¿…é¡»è°ƒç”¨å†…æ ¸æ¥æ‰§è¡Œè¿™äº›æ“ä½œ</p>
<p>è™šæ‹Ÿå†…å­˜çš„è¿ä½œéœ€è¦ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿè½¯ä»¶ä¹‹é—´ç²¾å¯†å¤æ‚çš„äº¤äº’ï¼ŒåŒ…æ‹¬å¯¹å¤„ç†å™¨ç”Ÿæˆçš„æ¯ä¸ªåœ°å€çš„ç¡¬ä»¶ç¼–è¯‘ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯æŠŠä¸€ä¸ªè¿›ç¨‹è™šæ‹Ÿå†…å­˜çš„å†…å®¹å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œç„¶åä¸»å­˜ä½œä¸ºç£ç›˜çš„é«˜é€Ÿç¼“å­˜ï¼Œ</p>
<h3 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h3><p>æ–‡ä»¶å°±æ˜¯å­—èŠ‚åºåˆ—ï¼Œä»…æ­¤è€Œå·²ã€‚æ¯ä¸ªIOè®¾å¤‡ï¼ŒåŒ…æ‹¬ç£ç›˜ï¼Œé”®ç›˜ï¼Œæ˜¾ç¤ºå™¨ï¼Œç”šè‡³ç½‘ç»œï¼Œéƒ½å¯ä»¥çœ‹æˆæ˜¯æ–‡ä»¶ï¼Œç³»ç»Ÿä¸­æ‰€æœ‰è¾“å…¥è¾“å‡ºéƒ½æ˜¯é€šè¿‡ä½¿ç”¨ä¸€å°ç»„ç§°ä¸ºUnix I&#x2F;Oçš„ç³»ç»Ÿå‡½æ•°è°ƒç”¨è¯»å†™æ–‡ä»¶æŒ‰æ¥å®ç°çš„<br>æ–‡ä»¶è¿™ä¸ªç®€å•è€Œç²¾è‡´çš„æ¦‚å¿µæ˜¯éå¸¸å¼ºå¤§çš„ï¼Œå› ä¸ºå®ƒå‘åº”ç”¨ç¨‹åºä¸­æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è¯•å›¾ï¼Œæ¥çœ‹å¾…ç³»ç»Ÿä¸­å¯èƒ½å«æœ‰çš„æ‰€æœ‰å„å¼å„æ ·çš„I&#x2F;Oè®¾å¤‡ã€‚ä¾‹å¦‚ï¼Œå¤„ç†ç£ç›˜æ–‡ä»¶å†…å®¹çš„åº”ç”¨ç¨‹åºå‘˜å¯ä»¥éå¸¸å¹¸ç¦ï¼Œå› ä¸ºä»–ä»¬æ— éœ€äº†è§£å…·ä½“çš„ç£ç›˜æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥è¯´ï¼ŒåŒä¸€ä¸ªç¨‹åºå¯ä»¥åœ¨ä½¿ç”¨ä¸åŒç£ç›˜æŠ€æœ¯çš„ä¸åŒç³»ç»Ÿä¸Šè¿è¡Œã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>redis ç›¸å…³çŸ¥è¯†</title>
    <url>/2023/05/24/redis-%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Redisæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚</p>
<h3 id="Redisä¼˜åŠ¿"><a href="#Redisä¼˜åŠ¿" class="headerlink" title="Redisä¼˜åŠ¿"></a>Redisä¼˜åŠ¿</h3><ul>
<li>æ€§èƒ½æé«˜ â€“ Redisèƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡&#x2F;s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡&#x2F;s ã€‚</li>
<li>ä¸°å¯Œçš„æ•°æ®ç±»å‹ â€“ Redisæ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Strings, Lists, Hashes, Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚</li>
<li>åŸå­ â€“ Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚å•ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚å¤šä¸ªæ“ä½œä¹Ÿæ”¯æŒäº‹åŠ¡ï¼Œå³åŸå­æ€§ï¼Œé€šè¿‡MULTIå’ŒEXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚</li>
<li>ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redisè¿˜æ”¯æŒ publish&#x2F;subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚</li>
</ul>
<span id="more"></span>
<h2 id="redisçš„æ•°æ®ç»“æ„"><a href="#redisçš„æ•°æ®ç»“æ„" class="headerlink" title="redisçš„æ•°æ®ç»“æ„"></a>redisçš„æ•°æ®ç»“æ„</h2><p>Redisæ”¯æŒäº”ä¸­æ•°æ®ç±»å‹ï¼šStringã€hashã€listã€setå’Œzsetï¼ˆæœ‰åºé›†åˆï¼‰</p>
<h3 id="String-ç±»å‹"><a href="#String-ç±»å‹" class="headerlink" title="String ç±»å‹"></a>String ç±»å‹</h3><p>String ç±»å‹æ˜¯ä¸€ä¸ªï¼ˆkey&#x3D;&#x3D;&gt;valueï¼‰çš„é”®å€¼å¯¹</p>
<blockquote>
<p>set test â€œtestâ€<br>OK<br>get test<br>â€œtestâ€</p>
</blockquote>
<p>*æ³¨æ„ï¼šä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨512MB</p>
<h3 id="Hashï¼ˆå“ˆå¸Œï¼‰"><a href="#Hashï¼ˆå“ˆå¸Œï¼‰" class="headerlink" title="Hashï¼ˆå“ˆå¸Œï¼‰"></a>Hashï¼ˆå“ˆå¸Œï¼‰</h3><p>String ç±»å‹æ˜¯ä¸€ä¸ªï¼ˆkey&#x3D;&#x3D;&gt;valueï¼‰çš„é”®å€¼å¯¹é›†åˆï¼Œæ¯ä¸ªæœ€å¤–å±‚keyå¯¹åº”å¤šä¸ªï¼ˆkey&#x3D;&#x3D;&gt;valueï¼‰å½¢å¼çš„é”®å€¼å¯¹<br>ä½¿ç”¨æ—¶éœ€è¦ç”¨å‘½ä»¤HSET å’ŒHGETå‘½ä»¤ã€‚</p>
<blockquote>
<p>hset htest h1 â€œt1â€ h2 â€œt2â€<br>2<br>hget htest h1<br>â€œt1â€<br>hget htest h2<br>â€œt2â€</p>
</blockquote>
<h3 id="Listï¼ˆåˆ—è¡¨ï¼‰"><a href="#Listï¼ˆåˆ—è¡¨ï¼‰" class="headerlink" title="Listï¼ˆåˆ—è¡¨ï¼‰"></a>Listï¼ˆåˆ—è¡¨ï¼‰</h3><p>æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæ’åºé»˜è®¤æŒ‰ç…§æ’å…¥é¡ºåºæ’åº<br>éœ€è¦ç”¨å‘½ä»¤LPUSH å’ŒLRANGE start end(ç»™å‡ºç´¢å¼•èµ·å§‹å’Œç»“æŸä½ç½®å·¦é—­åˆé—­åŒºé—´)å‘½ä»¤ã€‚<br> lpush ltest qq<br>(integer) 1</p>
<blockquote>
<p>lpush ltest ll<br>(integer) 2<br>lrange ltest 0 10</p>
</blockquote>
<ol>
<li>â€œllâ€</li>
<li>â€œqqâ€</li>
</ol>
<h3 id="setï¼ˆé›†åˆï¼‰"><a href="#setï¼ˆé›†åˆï¼‰" class="headerlink" title="setï¼ˆé›†åˆï¼‰"></a>setï¼ˆé›†åˆï¼‰</h3><p>æ·»åŠ ä¸€ä¸ªstringå¯¹è±¡åˆ°å¯¹åº”çš„seté›†åˆä¸­ï¼ŒæˆåŠŸè¿”å›1ï¼Œå¦‚æœå…ƒç´ å·²åœ¨é›†åˆä¸­è¿”å›0<br>æ·»åŠ å…ƒç´ ä½¿ç”¨ï¼šsaddï¼Œæ˜¾ç¤ºæ‰€æœ‰å…ƒç´ ä½¿ç”¨ smembers</p>
<blockquote>
<p>sadd stest 1<br>(integer) 1<br>sadd stest 2<br>(integer) 1<br>sadd stest 1<br>(integer) 0<br>smembers stest</p>
</blockquote>
<ol>
<li>â€œ1â€</li>
<li>â€œ2â€</li>
</ol>
<h3 id="zsetï¼ˆæœ‰åºé›†åˆï¼‰"><a href="#zsetï¼ˆæœ‰åºé›†åˆï¼‰" class="headerlink" title="zsetï¼ˆæœ‰åºé›†åˆï¼‰"></a>zsetï¼ˆæœ‰åºé›†åˆï¼‰</h3><p>Redis zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚<br>ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚<br>zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚<br>éœ€è¦ä½¿ç”¨å‘½ä»¤</p>
<blockquote>
<p>zadd ztest 0 t1<br>(integer) 1<br>zadd ztest 1 t2<br>(integer) 1<br>zadd ztest 0 t3<br>(integer) 1<br>zrangebyscore ztest 0 3</p>
</blockquote>
<ol>
<li>â€œt1â€</li>
<li>â€œt3â€</li>
<li>â€œt2â€</li>
</ol>
<h2 id="redisæŒä¹…åŒ–"><a href="#redisæŒä¹…åŒ–" class="headerlink" title="redisæŒä¹…åŒ–"></a>redisæŒä¹…åŒ–</h2><p>ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–ï¼Ÿ<br>Redisçš„æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè‹¥æ²¡æœ‰é…ç½®æŒä¹…åŒ–ï¼Œredisé‡å¯åæ•°æ®å°±ä¸¢å¤±äº†ï¼Œäºæ˜¯éœ€è¦å¼€å¯redisçš„æŒä¹…åŒ–åŠŸèƒ½ï¼Œå°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œé‡å¯åä»ç£ç›˜æ¢å¤æ•°æ®ã€‚redisæä¾›äº†ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼š1.RDBæŒä¹…åŒ–ï¼ˆå®šæ—¶å°†redisåœ¨å†…å­˜ä¸­çš„æ•°æ®ç”Ÿæˆå¿«ç…§ï¼Œå…¨é‡åŒæ­¥åˆ°ç£ç›˜ï¼‰ã€‚2.AOFï¼ˆappend only fileï¼‰æŒä¹…åŒ–ï¼ˆå°†redisçš„æ“ä½œæ—¥å¿—ä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼‰ã€‚</p>
<ol>
<li><p>RDBæŒä¹…åŒ–<br>è¿‡ç¨‹ï¼šåœ¨æŒ‡å®šæ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ï¼Œå®é™…æ“ä½œè¿‡ç¨‹å°±æ˜¯forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œå…ˆå°†æ•°æ®é›†å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œå†™å…¥æˆåŠŸåï¼Œå†æ›¿æ¢ä¹‹å‰çš„æ–‡ä»¶ï¼Œç”¨äºäºŒè¿›åˆ¶å‹ç¼©å­˜å‚¨ã€‚<br><a href="https://imgse.com/i/pCtU9i9"><img src="https://s1.ax1x.com/2023/06/24/pCtU9i9.png" alt="pCtU9i9.png"></a><br>ä¼˜ç‚¹ï¼š<br>1.redisåªä¼šåŒ…å«ä¸€ä¸ªæ–‡ä»¶ï¼Œä¾¿äºæ–‡ä»¶å¤‡ä»½ã€‚å¯ä»¥é…ç½®æ¯å°æ—¶å½’æ¡£æœ€è¿‘24å°æ—¶çš„æ•°æ®ï¼ŒåŒæ—¶æ¯å¤©å½’æ¡£æœ€è¿‘30å¤©çš„æ•°æ®ï¼Œé€šè¿‡è¿™æ ·çš„ç­–ç•¥ï¼Œä¸€æ—¦ç³»ç»Ÿå‡ºç°ç¾éš¾æ€§æ•…éšœï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„è¿›è¡Œæ¢å¤ã€‚<br>2.RDBé€‚åˆäºç¾éš¾æ¢å¤ï¼Œå¯ä»¥å¾ˆè½»æ¾çš„å°†ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å‹ç¼©åå†è½¬ç§»åˆ°å…¶ä»–å­˜å‚¨ä»‹è´¨ä¸Šã€‚<br>3.æ€§èƒ½æœ€å¤§åŒ–ã€‚forkå‡ºä¸€ä¸ªå­è¿›ç¨‹å®ŒæˆæŒä¹…åŒ–æ“ä½œï¼Œé¿å…äº†å•ä¸ªçº¿ç¨‹çš„IOé—®é¢˜ã€‚<br>4.ç›¸æ¯”äºAOFæœºåˆ¶ï¼Œå¦‚æœæ•°æ®é›†å¾ˆå¤§ï¼ŒRDBçš„å¯åŠ¨æ•ˆç‡æ›´é«˜ã€‚<br>ç¼ºç‚¹ï¼š<br>1.æ— æ³•ä¿è¯æ•°æ®çš„é«˜å¯ç”¨æ€§ï¼Œå³æœ€å¤§é™åº¦çš„é¿å…æ•°æ®ä¸¢å¤±ã€‚å¦‚æœåœ¨æŒä¹…åŒ–ä¹‹å‰å‡ºç°å®•æœºç°è±¡ï¼Œæ­¤å‰æœªæ¥å¾—åŠå†™å…¥ç£ç›˜çš„æ•°æ®éƒ½å°†ä¸¢å¤±ã€‚<br>2.forkå­è¿›ç¨‹å®ŒæˆæŒä¹…åŒ–æ“ä½œæ—¶ï¼Œå¦‚æœæ•°æ®é›†è¾ƒå¤§æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨åœæ­¢æœåŠ¡å‡ ç™¾æ¯«ç§’åˆ°1ç§’ã€‚</p>
</li>
<li><p>AOFæŒä¹…åŒ–<br>è¿‡ç¨‹ï¼šAOFä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œå°†redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼Œåªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å…è®¸æ”¹å†™æ–‡ä»¶ï¼Œrediså¯åŠ¨ä¹‹åå°±ä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ„æ•°æ®é›†ã€‚é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦å°†appendonlyæ”¹ä¸ºyeså°±å¼€å¯äº†aofï¼Œé‡å¯åç”Ÿæ•ˆã€‚<br><a href="https://imgse.com/i/pCtUCGR"><img src="https://s1.ax1x.com/2023/06/24/pCtUCGR.png" alt="pCtUCGR.png"></a><br>ä¼˜ç‚¹ï¼š<br>1.æ›´é«˜çš„æ•°æ®å®‰å…¨æ€§ï¼Œä¿è¯æ•°æ®åœ¨redisé‡å¯å‰åæ˜¯ä¸€è‡´çš„ã€‚<br>2.æ—¥å¿—å†™æ“ä½œé‡‡ç”¨çš„æ˜¯appendæ–¹å¼ï¼Œå†™å…¥è¿‡ç¨‹ä¸­å‡ºç°å®•æœºä¹Ÿä¸ä¼šç ´åæ—¥å¿—æ–‡ä»¶ä¸­å·²å­˜åœ¨çš„å†…å®¹ã€‚<br>3.å¦‚æœæ—¥å¿—è¿‡å¤§ï¼Œredisä¼šè‡ªåŠ¨å¯ç”¨rewriteæœºåˆ¶ã€‚å³Redisä»¥appendæ¨¡å¼ä¸æ–­çš„å°†ä¿®æ”¹æ•°æ®å†™å…¥åˆ°è€çš„ç£ç›˜æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶Redisè¿˜ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç”¨äºè®°å½•æ­¤æœŸé—´æœ‰å“ªäº›ä¿®æ”¹å‘½ä»¤è¢«æ‰§è¡Œã€‚å› æ­¤åœ¨è¿›è¡Œrewriteåˆ‡æ¢æ—¶å¯ä»¥æ›´å¥½çš„ä¿è¯æ•°æ®å®‰å…¨æ€§ã€‚<br>4.AOFåŒ…å«ä¸€ä¸ªæ ¼å¼æ¸…æ™°ã€æ˜“äºç†è§£çš„æ—¥å¿—æ–‡ä»¶ç”¨äºè®°å½•æ‰€æœ‰çš„ä¿®æ”¹æ“ä½œã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¯¥æ–‡ä»¶å®Œæˆæ•°æ®çš„é‡å»ºã€‚<br>ç¼ºç‚¹ï¼š<br>1.å¯¹äºç›¸åŒæ•°é‡çš„æ•°æ®é›†è€Œè¨€ï¼ŒAOFæ–‡ä»¶é€šå¸¸è¦å¤§äºRDBæ–‡ä»¶ã€‚RDB åœ¨æ¢å¤å¤§æ•°æ®é›†æ—¶çš„é€Ÿåº¦æ¯” AOF çš„æ¢å¤é€Ÿåº¦è¦å¿«ã€‚<br>2.æ ¹æ®åŒæ­¥ç­–ç•¥çš„ä¸åŒï¼ŒAOFåœ¨è¿è¡Œæ•ˆç‡ä¸Šå¾€å¾€ä¼šæ…¢äºRDBã€‚æ€»ä¹‹ï¼Œæ¯ç§’åŒæ­¥ç­–ç•¥çš„æ•ˆç‡æ˜¯æ¯”è¾ƒé«˜çš„ï¼ŒåŒæ­¥ç¦ç”¨ç­–ç•¥çš„æ•ˆç‡å’ŒRDBä¸€æ ·é«˜æ•ˆã€‚</p>
</li>
</ol>
<h2 id="Redisé›†ç¾¤"><a href="#Redisé›†ç¾¤" class="headerlink" title="Redisé›†ç¾¤"></a>Redisé›†ç¾¤</h2><p>1.ä¸»ä»æ¨¡å¼<br>è‡³å°‘éœ€è¦ä¸¤å°æœåŠ¡å™¨ï¼Œä¸€å°ä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰ï¼Œä¸€å°ä»èŠ‚ç‚¹ï¼ˆslaveï¼‰ã€‚masterä¸»è¦è´Ÿè´£å†™ï¼Œslaveä¸»è¦è´Ÿè´£è¯»ï¼Œä¸»ä»æ¨¡å¼å®ç°äº†è¯»å†™åˆ†ç¦»ã€‚<br><a href="https://imgse.com/i/pCtUkM6"><img src="https://s1.ax1x.com/2023/06/24/pCtUkM6.png" alt="pCtUkM6.png"></a><br>ä¸»ä»å¤åˆ¶çš„ä½œç”¨ï¼š<br>æ•°æ®å†—ä½™ï¼šå®ç°äº†æ•°æ®çš„çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„å¦ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼<br>æ•…éšœæ¢å¤ï¼šmasteræ•…éšœæ—¶ï¼Œslaveå¯ä»¥æä¾›æœåŠ¡ï¼Œå®ç°æ•…éšœå¿«é€Ÿæ¢å¤<br>è´Ÿè½½å‡è¡¡ï¼šmasterè´Ÿè´£å†™ï¼Œslaveè´Ÿè´£è¯»ã€‚åœ¨å†™å°‘è¯»å¤šçš„åœºæ™¯ä¸‹å¯ä»¥æå¤§æé«˜redisååé‡<br>é«˜å¯ç”¨åŸºçŸ³ï¼šä¸»ä»å¤åˆ¶æ˜¯rediså“¨å…µæ¨¡å¼å’Œé›†ç¾¤æ¨¡å¼çš„åŸºç¡€ã€‚<br>ä¸»ä»å¤åˆ¶å®ç°åŸç†ï¼š<br>ä¸»ä»å¤åˆ¶è¿‡ç¨‹ä¸»è¦å¯ä»¥åˆ†ä¸º3ä¸ªé˜¶æ®µï¼šè¿æ¥å»ºç«‹é˜¶æ®µã€æ•°æ®åŒæ­¥é˜¶æ®µã€å‘½ä»¤ä¼ æ’­é˜¶æ®µã€‚<br>è¿æ¥å»ºç«‹é˜¶æ®µï¼šåœ¨ä¸»ä»èŠ‚ç‚¹ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¸ºæ•°æ®åŒæ­¥åšå‡†å¤‡ã€‚<br>æ•°æ®åŒæ­¥é˜¶æ®µï¼šæ‰§è¡Œæ•°æ®çš„å…¨é‡ï¼ˆæˆ–å¢é‡ï¼‰å¤åˆ¶ï¼ˆå¤åˆ¶RDBæ–‡ä»¶ï¼‰<br>å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼šä¸»èŠ‚ç‚¹å°†å·²æ‰§è¡Œçš„å‘½ä»¤å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹æ¥æ”¶å‘½ä»¤å¹¶æ‰§è¡Œï¼Œä»è€Œå®ç°ä¸»ä»èŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´æ€§<br>ä¸»ä»æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯ä»¥æœ‰å¤šä¸ªä»èŠ‚ç‚¹ã€‚ä¸ºäº†å‡å°‘ä¸»ä»å¤åˆ¶å¯¹ä¸»èŠ‚ç‚¹çš„æ€§èƒ½å½±å“ï¼Œä¸€ä¸ªä»èŠ‚ç‚¹å¯ä»¥ä½œä¸ºå¦å¤–ä¸€ä¸ªä»èŠ‚ç‚¹çš„ä¸»èŠ‚ç‚¹è¿›è¡Œä¸»ä»å¤åˆ¶ã€‚<br>ä¸è¶³ä¹‹å¤„ï¼šä¸»èŠ‚ç‚¹å®•æœºä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨æ‹‰èµ·ä»èŠ‚ç‚¹æ¥æä¾›ä¸šåŠ¡ï¼Œä¸èƒ½è¾¾åˆ°é«˜å¯ç”¨ã€‚</p>
<p>2.å“¨å…µæ¨¡å¼<br><a href="https://imgse.com/i/pCtUZZD"><img src="https://s1.ax1x.com/2023/06/24/pCtUZZD.png" alt="pCtUZZD.png"></a><br>å“¨å…µæ¨¡å¼çš„åŸç†<br>Sentinelæ˜¯ä¸€ç§ç‰¹æ®Šçš„redisèŠ‚ç‚¹ï¼Œæ¯ä¸ªsentinelèŠ‚ç‚¹ä¼šç»´æŠ¤ä¸å…¶ä»–redisèŠ‚ç‚¹ï¼ˆåŒ…æ‹¬master&#x2F;slave&#x2F;sentinelï¼‰çš„å¿ƒè·³ã€‚<br>å½“ä¸€ä¸ªsentinelèŠ‚ç‚¹ä¸masterèŠ‚ç‚¹çš„å¿ƒè·³ä¸¢å¤±æ—¶ï¼Œè¿™ä¸ªsentinelèŠ‚ç‚¹å°±ä¼šè®¤ä¸ºmasterèŠ‚ç‚¹å‡ºç°äº†æ•…éšœï¼Œå¤„äºä¸å¯ç”¨çš„çŠ¶æ€ï¼Œè¿™ç§åˆ¤å®šå«ä½œä¸»è§‚ä¸‹çº¿ï¼ˆå³sentinelèŠ‚ç‚¹è‡ªå·±ä¸»è§‚è®¤ä¸ºmasterä¸‹çº¿äº†ï¼‰ï¼Œä¹‹åï¼Œè¿™ä¸ªsentinelèŠ‚ç‚¹ä¼šä¸å…¶ä»–sentinelèŠ‚ç‚¹äº¤æ¢ä¿¡æ¯ï¼Œå¦‚æœå‘ç°è®¤ä¸ºä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœçš„sentinelèŠ‚ç‚¹çš„ä¸ªæ•°è¶…è¿‡äº†æŸä¸ªé˜ˆå€¼ï¼ˆé€šå¸¸ä¸ºsentinelèŠ‚ç‚¹æ€»æ•°çš„1&#x2F;2+1ï¼Œå³è¶…è¿‡åŠæ•°ï¼‰ï¼Œåˆ™sentinelä¼šè®¤ä¸ºmasterèŠ‚ç‚¹å·²ç»å¤„äºå®¢è§‚ä¸‹çº¿çš„çŠ¶æ€ï¼Œå³å¤§å®¶éƒ½è®¤ä¸ºmasteræ•…éšœä¸å¯ç”¨äº†ã€‚<br>ä¹‹åï¼ŒsentinelèŠ‚ç‚¹ä¸­ä¼šé€‰ä¸¾å¤„ä¸€ä¸ªsentinel leaderæ¥æ‰§è¡Œredisä¸»èŠ‚ç‚¹çš„æ•…éšœè½¬ç§»ã€‚<br>è¢«é€‰ä¸¾å‡ºçš„ Sentinel é¢†å¯¼è€…è¿›è¡Œæ•…éšœè½¬ç§»çš„å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰åœ¨ä»èŠ‚ç‚¹åˆ—è¡¨ä¸­é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</p>
<ul>
<li>è¿‡æ»¤ä¸å¥åº·æˆ–è€…ä¸æ»¡è¶³è¦æ±‚çš„èŠ‚ç‚¹ï¼›</li>
<li>é€‰æ‹© slave-priorityï¼ˆä¼˜å…ˆçº§ï¼‰æœ€é«˜çš„ä»èŠ‚ç‚¹ï¼Œ å¦‚æœå­˜åœ¨åˆ™è¿”å›ï¼Œ ä¸å­˜åœ¨åˆ™ç»§ç»­ï¼›</li>
<li>é€‰æ‹©å¤åˆ¶åç§»é‡æœ€å¤§çš„ä»èŠ‚ç‚¹ ï¼Œ å¦‚æœå­˜åœ¨åˆ™è¿”å›ï¼Œ ä¸å­˜åœ¨åˆ™ç»§ç»­ï¼›</li>
<li>é€‰æ‹© runid æœ€å°çš„ä»èŠ‚ç‚¹ã€‚<br>ï¼ˆ2ï¼‰Sentinel é¢†å¯¼è€…èŠ‚ç‚¹ä¼šå¯¹é€‰å‡ºæ¥çš„ä»èŠ‚ç‚¹æ‰§è¡Œ slaveof no one å‘½ä»¤è®©å…¶æˆä¸ºä¸»èŠ‚ç‚¹ã€‚<br>ï¼ˆ3ï¼‰Sentinel é¢†å¯¼è€…èŠ‚ç‚¹ä¼šå‘å‰©ä½™çš„ä»èŠ‚ç‚¹å‘é€å‘½ä»¤ï¼Œè®©ä»–ä»¬ä»æ–°çš„ä¸»èŠ‚ç‚¹ä¸Šå¤åˆ¶æ•°æ®ã€‚<br>ï¼ˆ4ï¼‰Sentinel é¢†å¯¼è€…ä¼šå°†åŸæ¥çš„ä¸»èŠ‚ç‚¹æ›´æ–°ä¸ºä»èŠ‚ç‚¹ï¼Œ å¹¶å¯¹å…¶è¿›è¡Œç›‘æ§ï¼Œ å½“å…¶æ¢å¤åå‘½ä»¤å®ƒå»å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹ã€‚</li>
</ul>
<p>3.é›†ç¾¤æ¨¡å¼<br>å¦‚å›¾æ‰€ç¤ºé›†ç¾¤æ¨¡å¼å…¶å®å°±æ˜¯å¤šä¸ªä¸»ä»å¤åˆ¶çš„ç»“æ„ç»„åˆèµ·æ¥çš„ï¼Œæ¯ä¸€ä¸ªä¸»ä»å¤åˆ¶ç»“æ„å¯ä»¥çœ‹æˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸Šé¢çš„Clusteré›†ç¾¤ä¸­å°±æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ã€‚<br><a href="https://imgse.com/i/pCtUmIH"><img src="https://s1.ax1x.com/2023/06/24/pCtUmIH.png" alt="pCtUmIH.png"></a></p>
]]></content>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼ç³»åˆ— â€” å•ä¾‹æ¨¡å¼</title>
    <url>/2022/12/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97-%E2%80%94-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>å¼€ç¯‡ç»™å¤§å®¶ä¸€ä¸ªæ€è€ƒé¢˜ï¼šä¸ºä»€ä¹ˆä¸ç”¨é™æ€æ–¹æ³•è€Œç”¨å•ä¾‹æ¨¡å¼ï¼Ÿ</p>
<span id="more"></span>

<p>å•ä¾‹çš„å®šä¹‰ï¼šåœ¨å½“å‰è¿›ç¨‹ä¸­ï¼Œé€šè¿‡å•ä¾‹æ¨¡å¼åˆ›å»ºçš„ç±»æœ‰ä¸”åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>å•ä¾‹æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š<br>1.åœ¨Javaåº”ç”¨ä¸­ï¼Œå•ä¾‹æ¨¡å¼èƒ½ä¿è¯åœ¨ä¸€ä¸ªJVMä¸­ï¼Œè¯¥å¯¹è±¡åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨<br>2.æ„é€ å™¨å¿…é¡»æ˜¯ç§æœ‰çš„ï¼Œå¤–éƒ¨ç±»æ— æ³•é€šè¿‡è°ƒç”¨æ„é€ å™¨åˆ›å»ºè¯¥å®ä¾‹<br>3.æ²¡æœ‰å…¬å¼€çš„setæ–¹æ³•ï¼Œå¤–éƒ¨ç±»æ— æ³•è°ƒç”¨setæ–¹æ³•åˆ›å»ºè¯¥å®ä¾‹<br>4.æä¾›ä¸€ä¸ªå…¬å¼€çš„getæ–¹æ³•è·å–å”¯ä¸€çš„è¿™ä¸ªå®ä¾‹</p>
<p>é‚£å•ä¾‹æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ<br>1.æŸäº›ç±»åˆ›å»ºæ¯”è¾ƒé¢‘ç¹ï¼Œå¯¹äºä¸€äº›å¤§å‹çš„å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ç¬”å¾ˆå¤§çš„ç³»ç»Ÿå¼€é”€<br>2.çœå»äº†newæ“ä½œç¬¦ï¼Œé™ä½äº†ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨é¢‘ç‡ï¼Œå‡è½»GCå‹åŠ›<br>3.ç³»ç»Ÿä¸­æŸäº›ç±»ï¼Œå¦‚Springé‡Œçš„controllerï¼Œæ§åˆ¶ç€å¤„ç†æµç¨‹ï¼Œå¦‚æœè¯¥ç±»å¯ä»¥åˆ›å»ºå¤šä¸ªçš„è¯ï¼Œç³»ç»Ÿå°±å…¨ä¹±äº†<br>4.é¿å…äº†å¯¹èµ„æºçš„é‡å¤å ç”¨</p>
<p>å¥½äº†ï¼Œå•ä¾‹æ¨¡å¼çš„å®šä¹‰ä¹Ÿæ¸…æ¥šäº†ï¼Œå¥½å¤„ä¹Ÿäº†è§£äº†ï¼Œå…ˆçœ‹ä¸€ä¸ªé¥¿æ±‰å¼çš„å†™æ³•ï¼š</p>
<h2 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">  // åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡</span><br><span class="line">    private static Singleton instance = new Singleton();</span><br><span class="line">    /**</span><br><span class="line">     * ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®ä¾‹åŒ–</span><br><span class="line">     */</span><br><span class="line">    private Singleton()&#123;&#125;</span><br><span class="line">    /**</span><br><span class="line">     * é™æ€getæ–¹æ³•</span><br><span class="line">     */</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹‹æ‰€ä»¥å«é¥¿æ±‰å¼å¤§å®¶å¯ä»¥ç†è§£ä¸ºå®ƒé¥¿ï¼Œä»–æƒ³æå‰æŠŠå¯¹è±¡newå‡ºæ¥ï¼Œè¿™æ ·åˆ«äººå“ªæ€•æ˜¯ç¬¬ä¸€æ¬¡è·å–è¿™ä¸ªç±»å¯¹è±¡çš„æ—¶å€™ç›´æ¥å°±å­˜åœ¨è¿™ä¸ªç±»äº†ï¼Œçœå»äº†åˆ›å»ºç±»è¿™ä¸€æ­¥å¼€é”€ã€‚</p>
<p>ä¸‹é¢ä»‹ç»æ‡’æ±‰å¼</p>
<h2 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h2><p>çº¿ç¨‹ä¸å®‰å…¨çš„æ¨¡å¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Singleton &#123;  </span><br><span class="line">    private static Singleton instance;  </span><br><span class="line">    private Singleton ()&#123;&#125;  </span><br><span class="line">  </span><br><span class="line">    public static Singleton getInstance() &#123;  </span><br><span class="line">    if (instance == null) &#123;  </span><br><span class="line">        instance = new Singleton();  </span><br><span class="line">    &#125;  </span><br><span class="line">    return instance;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‡’æ±‰å¼å¤§å®¶å¯ä»¥ç†è§£ä¸ºå®ƒæ‡’ï¼Œåˆ«äººç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ä»–å‘ç°è‡ªå·±çš„å®ä¾‹æ˜¯ç©ºçš„ï¼Œç„¶åå»åˆå§‹åŒ–äº†ï¼Œå†èµ‹å€¼ï¼Œåé¢çš„è°ƒç”¨å°±å’Œé¥¿æ±‰æ²¡åŒºåˆ«äº†ã€‚</p>
<p>æ‡’æ±‰å’Œé¥¿æ±‰çš„å¯¹æ¯”ï¼šå¤§å®¶å¯ä»¥å‘ç°ä¸¤è€…çš„åŒºåˆ«åŸºæœ¬ä¸Šå°±æ˜¯ç¬¬ä¸€æ¬¡åˆ›ä½œæ—¶å€™çš„å¼€é”€é—®é¢˜ï¼Œä»¥åŠçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ˆçº¿ç¨‹ä¸å®‰å…¨æ¨¡å¼çš„æ‡’æ±‰ï¼‰ã€‚<br>é‚£æœ‰äº†è¿™ä¸ªå¯¹æ¯”ï¼Œé‚£ä»–ä»¬çš„åœºæ™¯å°±å¥½ç†è§£äº†ï¼Œåœ¨å¾ˆå¤šç”µå•†åœºæ™¯ï¼Œå¦‚æœè¿™ä¸ªæ•°æ®æ˜¯ç»å¸¸è®¿é—®çš„çƒ­ç‚¹æ•°æ®ï¼Œé‚£æˆ‘å°±å¯ä»¥å†ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ä½¿ç”¨é¥¿æ±‰æ¨¡å¼æå‰åŠ è½½ï¼ˆç±»ä¼¼ç¼“å­˜çš„é¢„çƒ­ï¼‰è¿™æ ·å“ªæ€•æ˜¯ç¬¬ä¸€ä¸ªç”¨æˆ·è°ƒç”¨éƒ½ä¸ä¼šå­˜åœ¨åˆ›å»ºå¼€é”€ï¼Œè€Œä¸”è°ƒç”¨é¢‘ç¹ä¹Ÿä¸å­˜åœ¨å†…å­˜æµªè´¹äº†ã€‚</p>
<p>è€Œæ‡’æ±‰å¼å‘¢æˆ‘ä»¬å¯ä»¥ç”¨åœ¨ä¸æ€ä¹ˆçƒ­çš„åœ°æ–¹ï¼Œæ¯”å¦‚é‚£ä¸ªæ•°æ®ä½ ä¸ç¡®å®šå¾ˆé•¿ä¸€æ®µæ—¶é—´æ˜¯ä¸æ˜¯æœ‰äººè°ƒç”¨ï¼Œé‚£å°±ç”¨æ‡’æ±‰ï¼Œå¦‚æœä½ ä½¿ç”¨äº†é¥¿æ±‰ï¼Œä½†æ˜¯è¿‡äº†å‡ ä¸ªæœˆè¿˜æ²¡æœ‰äººè°ƒç”¨ï¼Œæå‰åŠ è½½çš„ç±»å†å†…å­˜ä¸­æ˜¯ç”±èµ„æºæµªè´¹çš„ã€‚</p>
<h2 id="çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>çº¿ç¨‹å®‰å…¨é—®é¢˜</h2><p>ä¸Šé¢çš„æ‡’æ±‰æˆ‘æ˜¯æ•…æ„æ²¡æœ‰åŠ é”çš„ï¼Œå¤§å®¶è‚¯å®šéƒ½çŸ¥é“æ‡’æ±‰çš„çº¿ç¨‹å®‰å…¨é—®é¢˜<br><a href="https://imgse.com/i/z4IcQK"><img src="https://s1.ax1x.com/2022/12/13/z4IcQK.jpg" alt="z4IcQK.jpg"></a><br>åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å­˜åœ¨è¿™ä¹ˆä¸€ç§æƒ…å†µï¼šå¤šä¸ªçº¿ç¨‹å»è°ƒç”¨getInstanceæ–¹æ³•æ¥è·å–Singletonçš„å®ä¾‹ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‘ç”Ÿä¸€ç§æƒ…å†µï¼Œå½“ç¬¬ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œif(instance &#x3D;&#x3D; null)æ—¶ï¼Œæ­¤æ—¶instanceæ˜¯ä¸ºnullçš„è¿›å…¥è¯­å¥ã€‚</p>
<p>åœ¨è¿˜æ²¡æœ‰æ‰§è¡Œinstance &#x3D; new Singleton()æ—¶ï¼ˆæ­¤æ—¶instanceæ˜¯ä¸ºnullçš„ï¼‰ç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿè¿›å…¥äº†if(instance &#x3D;&#x3D; null)è¿™ä¸ªè¯­å¥ï¼Œå› ä¸ºä¹‹å‰è¿›å…¥è¿™ä¸ªè¯­å¥çš„çº¿ç¨‹ä¸­è¿˜æ²¡æœ‰æ‰§è¡Œinstance &#x3D; new Singleton()ï¼Œæ‰€ä»¥å®ƒä¼šæ‰§è¡Œinstance &#x3D; new Singleton()æ¥å®ä¾‹åŒ–Singletonå¯¹è±¡ï¼Œå› ä¸ºç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿè¿›å…¥äº†ifè¯­å¥æ‰€ä»¥å®ƒä¼šå®ä¾‹åŒ–Singletonå¯¹è±¡ã€‚</p>
<p>è¿™æ ·å°±å¯¼è‡´äº†å®ä¾‹åŒ–ä¸¤ä¸ªSingletonå¯¹è±¡ï¼Œé‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<p>ç®€å•ç²—æš´ï¼ŒåŠ é”å°±å¥½äº†ï¼Œè¿™æ˜¯åŠ é”ä¹‹åçš„ä»£ç ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">    private static Singleton instance = null;</span><br><span class="line">    /**</span><br><span class="line">     * ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®ä¾‹åŒ–</span><br><span class="line">     */</span><br><span class="line">    private Singleton()&#123;&#125;</span><br><span class="line">    /**</span><br><span class="line">     * é™æ€getæ–¹æ³•</span><br><span class="line">     */</span><br><span class="line">    public static synchronized Singleton getInstance()&#123;</span><br><span class="line">        if(instance == null)&#123;</span><br><span class="line">            instance = new Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ç§å…¸å‹çš„æ—¶é—´æ¢ç©ºé—´çš„å†™æ³•ï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶å…ˆé”èµ·æ¥ï¼Œåœ¨è¿›è¡Œåˆ¤æ–­ï¼Œä¸¥é‡é™ä½äº†ç³»ç»Ÿçš„å¤„ç†é€Ÿåº¦ã€‚</p>
<p>æœ‰æ²¡æœ‰æ›´å¥½çš„å¤„ç†æ–¹å¼å‘¢ï¼Ÿ<br>æœ‰ï¼Œé€šè¿‡åŒæ£€é”åšä¸¤æ¬¡åˆ¤æ–­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">    private static Singleton instance = null;</span><br><span class="line">    private Singleton()&#123;&#125;</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        //å…ˆæ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰è¿›å…¥ä¸‹é¢çš„åŒæ­¥å—</span><br><span class="line">        if(instance == null)&#123;</span><br><span class="line">            //åŒæ­¥å—ï¼Œçº¿ç¨‹å®‰å…¨çš„åˆ›å»ºå®ä¾‹</span><br><span class="line">            synchronized (Singleton.class) &#123;</span><br><span class="line">                //å†æ¬¡æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰çœŸæ­£çš„åˆ›å»ºå®ä¾‹</span><br><span class="line">                if(instance == null)&#123;</span><br><span class="line">                    instance = new Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†synchronizedå…³é”®å­—åŠ åœ¨äº†å†…éƒ¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“è°ƒç”¨çš„æ—¶å€™æ˜¯ä¸éœ€è¦åŠ é”çš„ï¼Œåªæœ‰åœ¨instanceä¸ºnullï¼Œå¹¶åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ‰éœ€è¦åŠ é”ï¼Œæ€§èƒ½æœ‰ä¸€å®šçš„æå‡ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™æ ·å°±æ²¡æœ‰é—®é¢˜äº†å—ï¼Ÿ</p>
<p>çœ‹ä¸‹é¢çš„æƒ…å†µï¼šåœ¨JavaæŒ‡ä»¤ä¸­åˆ›å»ºå¯¹è±¡å’Œèµ‹å€¼æ“ä½œæ˜¯åˆ†å¼€è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´instance &#x3D; new Singleton();è¯­å¥æ˜¯åˆ†ä¸¤éƒ¨æ‰§è¡Œçš„ã€‚</p>
<p>ä½†æ˜¯JVMå¹¶ä¸ä¿è¯è¿™ä¸¤ä¸ªæ“ä½œçš„å…ˆåé¡ºåºï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰å¯èƒ½JVMä¼šä¸ºæ–°çš„Singletonå®ä¾‹åˆ†é…ç©ºé—´ï¼Œç„¶åç›´æ¥èµ‹å€¼ç»™instanceæˆå‘˜ï¼Œç„¶åå†å»åˆå§‹åŒ–è¿™ä¸ªSingletonå®ä¾‹ã€‚</p>
<p>è¿™æ ·å°±å¯èƒ½å‡ºé”™äº†ï¼Œæˆ‘ä»¬ä»¥Aã€Bä¸¤ä¸ªçº¿ç¨‹ä¸ºä¾‹ï¼š<br>1.Aã€Bçº¿ç¨‹åŒæ—¶è¿›å…¥äº†ç¬¬ä¸€ä¸ªifåˆ¤æ–­<br>2.Aé¦–å…ˆè¿›å…¥synchronizedå—ï¼Œç”±äºinstanceä¸ºnullï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œinstance &#x3D; new Singleton();<br>3.ç”±äºJVMå†…éƒ¨çš„ä¼˜åŒ–æœºåˆ¶ï¼ŒJVMå…ˆç”»äº†ä¸€äº›åˆ†é…ç»™Singletonå®ä¾‹çš„ç©ºç™½å†…å­˜ï¼Œå¹¶èµ‹å€¼ç»™instanceæˆå‘˜ï¼ˆæ³¨æ„æ­¤æ—¶JVMæ²¡æœ‰å¼€å§‹åˆå§‹åŒ–è¿™ä¸ªå®ä¾‹ï¼‰ï¼Œç„¶åAç¦»å¼€äº†synchronizedå—ã€‚<br><a href="https://imgse.com/i/z4oQOO"><img src="https://s1.ax1x.com/2022/12/13/z4oQOO.jpg" alt="z4oQOO.jpg"></a><br>4.Bè¿›å…¥synchronizedå—ï¼Œç”±äºinstanceæ­¤æ—¶ä¸æ˜¯nullï¼Œå› æ­¤å®ƒé©¬ä¸Šç¦»å¼€äº†synchronizedå—å¹¶å°†ç»“æœè¿”å›ç»™è°ƒç”¨è¯¥æ–¹æ³•çš„ç¨‹åºã€‚<br>5.æ­¤æ—¶Bçº¿ç¨‹æ‰“ç®—ä½¿ç”¨singletonå®ä¾‹ï¼Œå´å‘ç°å®ƒå¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œäºæ˜¯å‡ºç°äº†é”™è¯¯ã€‚<br>åŠ ä¸Švolatileä¿®é¥°Singletonï¼Œå†åšä¸€æ¬¡ä¼˜åŒ–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">    private volatile static Singleton instance = null;</span><br><span class="line">    private Singleton()&#123;&#125;</span><br><span class="line">    public static Singleton getInstance()&#123;</span><br><span class="line">        //å…ˆæ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰è¿›å…¥ä¸‹é¢çš„åŒæ­¥å—</span><br><span class="line">        if(instance == null)&#123;</span><br><span class="line">            //åŒæ­¥å—ï¼Œçº¿ç¨‹å®‰å…¨çš„åˆ›å»ºå®ä¾‹</span><br><span class="line">            synchronized (Singleton.class) &#123;</span><br><span class="line">                //å†æ¬¡æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰çœŸæ­£çš„åˆ›å»ºå®ä¾‹</span><br><span class="line">                if(instance == null)&#123;</span><br><span class="line">                    instance = new Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡volatileä¿®é¥°çš„å˜é‡ï¼Œä¸ä¼šè¢«çº¿ç¨‹æœ¬åœ°ç¼“å­˜ï¼Œæ‰€æœ‰çº¿ç¨‹å¯¹è¯¥å¯¹è±¡çš„è¯»å†™éƒ½ä¼šç¬¬ä¸€æ—¶é—´åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œä»è€Œä¿è¯å¤šä¸ªçº¿ç¨‹é—´å¯¹è¯¥å¯¹è±¡çš„å‡†ç¡®æ€§</p>
<h2 id="volatileçš„ä½œç”¨"><a href="#volatileçš„ä½œç”¨" class="headerlink" title="volatileçš„ä½œç”¨"></a>volatileçš„ä½œç”¨</h2><p>é˜²æ­¢æŒ‡ä»¤é‡æ’åºï¼Œå› ä¸ºinstance &#x3D; new Singleton()ä¸æ˜¯åŸå­æ“ä½œ<br>ä¿è¯å†…å­˜å¯è§</p>
<p>è¿™ä¸ªæ˜¯æ¯”è¾ƒå®Œç¾çš„å†™æ³•äº†ï¼Œè¿™ç§æ–¹å¼èƒ½å¤Ÿå®‰å…¨çš„åˆ›å»ºå”¯ä¸€çš„ä¸€ä¸ªå®ä¾‹ï¼Œåˆä¸ä¼šå¯¹æ€§èƒ½æœ‰å¤ªå¤§çš„å½±å“ã€‚</p>
<p>ä½†æ˜¯ç”±äºvolatileå…³é”®å­—å¯èƒ½ä¼šå±è”½æ‰è™šæ‹Ÿæœºä¸­ä¸€äº›å¿…è¦çš„ä»£ç ä¼˜åŒ–ï¼Œæ‰€ä»¥è¿è¡Œæ•ˆç‡å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œè¿˜æœ‰æ›´ä¼˜çš„å†™æ³•å—ï¼Ÿ</p>
<p>é€šè¿‡é™æ€å†…éƒ¨ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Singleton &#123;  </span><br><span class="line">  </span><br><span class="line">    /* ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®ä¾‹åŒ– */  </span><br><span class="line">    private Singleton() &#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /* æ­¤å¤„ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ç±»æ¥ç»´æŠ¤å•ä¾‹ */  </span><br><span class="line">    private static class SingletonFactory &#123;  </span><br><span class="line">        private static Singleton instance = new Singleton();  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /* è·å–å®ä¾‹ */  </span><br><span class="line">    public static Singleton getInstance() &#123;  </span><br><span class="line">        return SingletonFactory.instance;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    /* å¦‚æœè¯¥å¯¹è±¡è¢«ç”¨äºåºåˆ—åŒ–ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡åœ¨åºåˆ—åŒ–å‰åä¿æŒä¸€è‡´ */  </span><br><span class="line">    public Object readResolve() &#123;  </span><br><span class="line">        return getInstance();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å†…éƒ¨ç±»æ¥ç»´æŠ¤å•ä¾‹çš„å®ç°ï¼ŒJVMå†…éƒ¨çš„æœºåˆ¶èƒ½å¤Ÿä¿è¯å½“ä¸€ä¸ªç±»åŠ è½½çš„æ—¶å€™ï¼Œè¿™ä¸ªç±»çš„åŠ è½½è¿‡ç¨‹æ˜¯çº¿ç¨‹äº’æ–¥çš„ã€‚</p>
<p>è¿™æ ·å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceçš„æ—¶å€™ï¼ŒJVMèƒ½å¤Ÿå¸®æˆ‘ä»¬ä¿è¯instanceåªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œå¹¶ä¸”ä¼šä¿è¯æŠŠèµ‹å€¼ç»™instanceçš„å†…å­˜åˆå§‹åŒ–å®Œæ¯•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒä¸Šé¢çš„é—®é¢˜ã€‚</p>
<p>åŒæ—¶è¯¥æ–¹æ³•ä¹Ÿåªä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨äº’æ–¥æœºåˆ¶ï¼Œè¿™æ ·å°±è§£å†³äº†ä½æ€§èƒ½é—®é¢˜ã€‚è¿™æ ·æˆ‘ä»¬æš‚æ—¶æ€»ç»“ä¸€ä¸ªå®Œç¾çš„å•ä¾‹æ¨¡å¼ã€‚</p>
<p>è¿˜æœ‰æ›´å®Œç¾çš„å†™æ³•å—ï¼Ÿé€šè¿‡æšä¸¾</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public enum Singleton &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å®šä¹‰ä¸€ä¸ªæšä¸¾çš„å…ƒç´ ï¼Œå®ƒå°±ä»£è¡¨äº†Singletonçš„ä¸€ä¸ªå®ä¾‹ã€‚</span><br><span class="line">     */</span><br><span class="line">    Instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æšä¸¾æ¥å®ç°å•å®ä¾‹æ§åˆ¶ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”JVMä»æ ¹æœ¬ä¸Šæä¾›ä¿éšœï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ï¼Œæ˜¯æ›´ç®€æ´ï¼Œé«˜æ•ˆï¼Œå®‰å…¨çš„å®ç°å•ä¾‹çš„æ–¹å¼ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ€åå¤§å®¶åº”è¯¥éƒ½çŸ¥é“å•ä¾‹æ¨¡å¼çš„å†™æ³•äº†ï¼Œä¹ŸçŸ¥é“ä¼˜åŠ£åŠ¿å’Œä½¿ç”¨åœºæ™¯äº†ï¼Œé‚£å¼€å¤´çš„é‚£ä¸ªé—®é¢˜å¤§å®¶å¿ƒé‡Œæœ‰ç­”æ¡ˆäº†ä¹ˆï¼Ÿ</p>
<p>ä»€ä¹ˆï¼Ÿè¿é—®é¢˜éƒ½å¿˜äº†ï¼Ÿé—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸ç”¨é™æ€æ–¹æ³•è€Œç”¨å•ä¾‹æ¨¡å¼ï¼Ÿ</p>
<p>ä¸¤è€…å…¶å®éƒ½èƒ½å®ç°æˆ‘ä»¬åŠ è½½çš„æœ€ç»ˆç›®çš„ï¼Œä½†æ˜¯ä»–ä»¬ä¸€ä¸ªæ˜¯åŸºäºå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯é¢å‘å¯¹è±¡çš„ï¼Œå°±åƒæˆ‘ä»¬ä¸é¢å‘å¯¹è±¡ä¹Ÿèƒ½è§£å†³é—®é¢˜ä¸€æ ·ï¼Œé¢å‘å¯¹è±¡çš„ä»£ç æä¾›ä¸€ä¸ªæ›´å¥½çš„ç¼–ç¨‹æ€æƒ³ã€‚</p>
<p>å¦‚æœä¸€ä¸ªæ–¹æ³•å’Œä»–æ‰€åœ¨ç±»çš„å®ä¾‹å¯¹è±¡æ— å…³ï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥æ˜¯é™æ€çš„ï¼Œåä¹‹ä»–å°±åº”è¯¥æ˜¯éé™æ€çš„ã€‚å¦‚æœæˆ‘ä»¬ç¡®å®åº”è¯¥ä½¿ç”¨éé™æ€çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨åˆ›å»ºç±»æ—¶åˆç¡®å®åªéœ€è¦ç»´æŠ¤ä¸€ä»½å®ä¾‹æ—¶ï¼Œå°±éœ€è¦ç”¨å•ä¾‹æ¨¡å¼äº†ã€‚</p>
<p>æˆ‘ä»¬çš„ç”µå•†ç³»ç»Ÿä¸­å°±æœ‰å¾ˆå¤šç±»ï¼Œæœ‰å¾ˆå¤šé…ç½®å’Œå±æ€§ï¼Œè¿™äº›é…ç½®å’Œå±æ€§æ˜¯ä¸€å®šå­˜åœ¨äº†ï¼Œåˆæ˜¯å…¬å…±çš„ï¼ŒåŒæ—¶éœ€è¦åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½å­˜åœ¨ï¼Œæ‰€ä»¥åªéœ€è¦ä¸€ä»½å°±è¡Œï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœéœ€è¦æˆ‘å†éœ€è¦çš„æ—¶å€™newä¸€ä¸ªï¼Œå†ç»™ä»–åˆ†é…å€¼ï¼Œæ˜¾ç„¶æ˜¯æµªè´¹å†…å­˜å¹¶ä¸”å†èµ‹å€¼æ²¡ä»€ä¹ˆæ„ä¹‰ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬ç”¨å•ä¾‹æ¨¡å¼æˆ–é™æ€æ–¹æ³•å»ç»´æŒä¸€ä»½è¿™äº›å€¼æœ‰ä¸”åªæœ‰è¿™ä¸€ä»½å€¼ï¼Œä½†æ­¤æ—¶è¿™äº›é…ç½®å’Œå±æ€§åˆæ˜¯é€šè¿‡é¢å‘å¯¹è±¡çš„ç¼–ç æ–¹å¼å¾—åˆ°çš„ï¼Œæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œæˆ–è€…ä¸æ˜¯é¢å‘å¯¹è±¡çš„ï¼Œä½†ä»–æœ¬èº«çš„å±æ€§åº”è¯¥æ˜¯é¢å¯¹å¯¹è±¡çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨é™æ€æ–¹æ³•è™½ç„¶èƒ½åŒæ ·è§£å†³é—®é¢˜ï¼Œä½†æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆä¹Ÿåº”è¯¥æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚</p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Android sharesheetåœ¨Androidåº”ç”¨ç¨‹åºä¸­åˆ†äº«å†…å®¹å’Œé“¾æ¥</title>
    <url>/2023/03/22/%E4%BD%BF%E7%94%A8Android-sharesheet%E5%9C%A8Android%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%88%86%E4%BA%AB%E5%86%85%E5%AE%B9%E5%92%8C%E9%93%BE%E6%8E%A5/</url>
    <content><![CDATA[<p>ä¸ºä½•è¦ä½¿ç”¨Android sharesheet<br>ä¸»è¦æœ‰ä¸‰ç‚¹åŸå› ï¼š</p>
<ol>
<li>è°·æ­Œå®˜æ–¹æ¨èä½¿ç”¨</li>
<li>Target SDK 30 ä»¥ä¸Šï¼ŒåŒ…åå¯è§æ€§å‘ç”Ÿäº†å˜æ›´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ä¸åº”ç”¨æ˜¯ä¸å¯è§çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœä½¿ç”¨queryIntentActivities()æ–¹æ³•ï¼Œä¸ä¸€å®šèƒ½å¤Ÿè·å–åˆ°æ‰€æœ‰intentå¯¹åº”çš„activityï¼Œè¿™æ ·å°±ç»™åˆ†äº«intenté€ æˆäº†éº»çƒ¦ã€‚</li>
<li>Android sharesheetæä¾›äº†åŒ…æ‹¬ç•Œé¢ã€ç»“æœæ”¶é›†ã€å›ºå®šå‰ç½®å’Œå±è”½æŒ‡å®šappåœ¨å†…çš„å…¨å¥—åŠŸèƒ½ï¼Œå¯ä»¥èŠ‚çœè®¾è®¡å’Œå¼€å‘èµ„æº<span id="more"></span></li>
</ol>
<h2 id="ä½¿ç”¨Android-sharesheetçš„åŸºç¡€æ­¥éª¤"><a href="#ä½¿ç”¨Android-sharesheetçš„åŸºç¡€æ­¥éª¤" class="headerlink" title="ä½¿ç”¨Android sharesheetçš„åŸºç¡€æ­¥éª¤"></a>ä½¿ç”¨Android sharesheetçš„åŸºç¡€æ­¥éª¤</h2><p>Android sharesheetçš„ä½¿ç”¨ååˆ†ç®€å•ï¼Œå¤§è‡´åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šå‡†å¤‡intentï¼Œä½¿ç”¨intentè°ƒèµ·åˆ†äº«å¼¹çª—ã€‚<br>å°†ä¼šä½¿ç”¨3ä¸ªä¾‹å­æ¥å±•ç°sharesheetçš„ä½¿ç”¨ï¼Œæœ¬åˆ«æ˜¯ï¼šåˆ†äº«ä¸€æ®µæ–‡å­—(å¯ä»¥åŒ…å«æŸä¸ªé“¾æ¥)ï¼Œåˆ†äº«ä¸€ä¸ªè§†é¢‘ï¼Œåˆ†äº«å¤šä¸ªè§†é¢‘</p>
<h3 id="å‡†å¤‡intentï¼š"><a href="#å‡†å¤‡intentï¼š" class="headerlink" title="å‡†å¤‡intentï¼š"></a>å‡†å¤‡intentï¼š</h3><h3 id="åˆ†äº«ä¸€æ®µæ–‡å­—ï¼š"><a href="#åˆ†äº«ä¸€æ®µæ–‡å­—ï¼š" class="headerlink" title="åˆ†äº«ä¸€æ®µæ–‡å­—ï¼š"></a>åˆ†äº«ä¸€æ®µæ–‡å­—ï¼š</h3><p>å¦‚æœåªæ˜¯æƒ³åˆ†äº«ä¸€æ®µæ–‡å­—ï¼Œå¹¶ä¸”æ–‡å­—ä¸­åŒ…å«äº†ä¸€ä¸ªè·³è½¬é“¾æ¥ï¼Œæ˜¯æ¯”è¾ƒç®€å•çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//linkWtihText å°±æ˜¯æƒ³è¦åˆ†äº«çš„æ–‡å­—ï¼Œå®é™…ä½¿ç”¨æ—¶å¸¸å¸¸åŒ…å«ä¸€æ®µè·³è½¬é“¾æ¥</span><br><span class="line">val sendIntent: Intent = Intent().apply &#123;</span><br><span class="line">    action = Intent.ACTION_SEND</span><br><span class="line">    putExtra(Intent.EXTRA_TEXT, linkWtihText)</span><br><span class="line">    type = &quot;text/plain&quot;</span><br><span class="line">&#125;</span><br><span class="line">//ä½¿ç”¨sendIntentæ¥åˆ¶ä½œåˆ†äº«è·³è½¬ä½¿ç”¨çš„intent</span><br><span class="line">val shareIntent = Intent.createChooser(sendIntent, &quot;null&quot;, &quot;null&quot;)</span><br><span class="line">//æ·»åŠ flag</span><br><span class="line">shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†äº«ä¸€ä¸ªè§†é¢‘ï¼š"><a href="#åˆ†äº«ä¸€ä¸ªè§†é¢‘ï¼š" class="headerlink" title="åˆ†äº«ä¸€ä¸ªè§†é¢‘ï¼š"></a>åˆ†äº«ä¸€ä¸ªè§†é¢‘ï¼š</h3><p>å…¶å®è´¨æ˜¯åˆ†äº«ä¸€ä¸ªè§†é¢‘åª’ä½“æ–‡ä»¶ï¼Œæ‰€ä»¥åˆ†äº«ä¸€ä¸ªéŸ³ä¹ã€ä¸€å¼ å›¾ç‰‡ç­‰ä¹Ÿæ˜¯ç±»ä¼¼çš„æ­¥éª¤ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ¶ä½œä¸€ä¸ªå¾…åˆ†äº«çš„æ–‡ä»¶çš„uriï¼Œæ­¤å¤„ä½¿ç”¨FileProviderï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//æŠŠè·¯å¾„è½¬æ¢æˆå¯ä»¥ç”¨æ¥åˆ†äº«çš„Uriï¼Œpathï¼šå¾…åˆ†äº«çš„æ–‡ä»¶è·¯å¾„</span><br><span class="line">private fun createFileUriWithPath(context: Context, path: String): Uri &#123;</span><br><span class="line">    val shareFile = File(path)</span><br><span class="line">    return FileProvider.getUriForFile(</span><br><span class="line">        context,</span><br><span class="line">        &quot;com.miui.localvideoplayer.shareprovider&quot;,</span><br><span class="line">        shareFile</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼ŒåŸºäºä»¥ä¸Šæ–¹æ³•åˆ¶ä½œçš„uriï¼Œåˆ¶ä½œåˆ†äº«intentï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">val shareUri = createFileUriWithPath(appContext, path)</span><br><span class="line">val sendIntent = Intent()</span><br><span class="line">sendIntent.action = Intent.ACTION_SEND</span><br><span class="line">sendIntent.putExtra(Intent.EXTRA_STREAM, shareUri)</span><br><span class="line">sendIntent.data = shareUri</span><br><span class="line">//æ­¤å¤„éœ€è¦å¯¹urièµ‹äºˆå¯è¯»å–çš„æƒé™</span><br><span class="line">sendIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)</span><br><span class="line">sendIntent.type = &quot;video/*&quot;</span><br><span class="line">//ä½¿ç”¨sendIntentæ¥åˆ¶ä½œåˆ†äº«è·³è½¬ä½¿ç”¨çš„intent</span><br><span class="line">val shareIntent = Intent.createChooser(sendIntent, &quot;null&quot;, &quot;null&quot;)</span><br><span class="line">//æ·»åŠ flag</span><br><span class="line">shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†äº«å¤šä¸ªè§†é¢‘ï¼š"><a href="#åˆ†äº«å¤šä¸ªè§†é¢‘ï¼š" class="headerlink" title="åˆ†äº«å¤šä¸ªè§†é¢‘ï¼š"></a>åˆ†äº«å¤šä¸ªè§†é¢‘ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//shareList: ArrayList&lt;String&gt; å¾…åˆ†äº«çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">if (shareList.size == 1) &#123;</span><br><span class="line">    //å¦‚æœåˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆè¯·å°†å…¶å½“ä½œå•ä¸ªæ–‡ä»¶åˆ†äº«ï¼Œä»¥è·å–æ›´å¤šçš„æ¥å—æ–¹</span><br><span class="line">    shareSingleVideoFile(context, shareList[0])</span><br><span class="line">    return</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val shareUriList = java.util.ArrayList&lt;Uri&gt;()</span><br><span class="line">for (path in shareList) &#123;</span><br><span class="line">    //ä»ç„¶éœ€è¦ç”¨åˆ°ä¸Šæ–‡æåˆ°çš„åˆ¶ä½œuriçš„æ–¹æ³•ï¼Œå°†uriä»¬ä¿å­˜åœ¨ä¸€ä¸ªlisté‡Œ</span><br><span class="line">    val shareUri = createFileUriWithPath(appContext, path)</span><br><span class="line">    shareUriList.add(shareUri)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">val sendIntent = Intent()</span><br><span class="line">//æ­¤å¤„çš„actionä¸ºACTION_SEND_MULTIPLE</span><br><span class="line">sendIntent.action = Intent.ACTION_SEND_MULTIPLE</span><br><span class="line">sendIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, shareUriList)</span><br><span class="line">sendIntent.type = &quot;video/*&quot;</span><br><span class="line">sendIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)</span><br><span class="line">val shareIntent = Intent.createChooser(sendIntent, &quot;null&quot;, &quot;null&quot;)</span><br><span class="line">shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨intentè°ƒèµ·åˆ†äº«å¼¹çª—ï¼š"><a href="#ä½¿ç”¨intentè°ƒèµ·åˆ†äº«å¼¹çª—ï¼š" class="headerlink" title="ä½¿ç”¨intentè°ƒèµ·åˆ†äº«å¼¹çª—ï¼š"></a>ä½¿ç”¨intentè°ƒèµ·åˆ†äº«å¼¹çª—ï¼š</h3><p>ä½¿ç”¨context.startActivityæ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mContext.startActivity(shareIntent)</span><br></pre></td></tr></table></figure>

<h2 id="å°†æŸäº›æ¥æ”¶ç«¯å›ºå®šå‰ç½®-x2F-å°†æŸäº›æ¥æ”¶ç«¯å±è”½"><a href="#å°†æŸäº›æ¥æ”¶ç«¯å›ºå®šå‰ç½®-x2F-å°†æŸäº›æ¥æ”¶ç«¯å±è”½" class="headerlink" title="å°†æŸäº›æ¥æ”¶ç«¯å›ºå®šå‰ç½®&#x2F;å°†æŸäº›æ¥æ”¶ç«¯å±è”½"></a>å°†æŸäº›æ¥æ”¶ç«¯å›ºå®šå‰ç½®&#x2F;å°†æŸäº›æ¥æ”¶ç«¯å±è”½</h2><p>åœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸æƒ³è¦å°†æŸäº›åº”ç”¨å‰ç½®åœ¨æˆ‘ä»¬çš„åˆ†äº«å¼¹çª—ä¸­ï¼Œä¾‹å¦‚ï¼Œæˆ‘å¸Œæœ›ç”¨æˆ·æŠŠæˆ‘ä»¬çš„é“¾æ¥åˆ†äº«åˆ°facebook,whatsapp,messenger,telegramä¸­ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè£‚å˜è½¬æ’­ï¼Œsharesheetä¹Ÿå¯ä»¥åšåˆ°ã€‚<br>å®ç°æ–¹æ³•ä¹Ÿååˆ†ç®€å•ï¼Œåªè¦ç»™shareInentå¢åŠ ä¸€ä¸ªkeyä¸ºIntent.EXTRA_INITIAL_INTENTSçš„extraï¼Œå¹¶ä¸”å¾€é‡Œä¼ å…¥ä¸€ä¸ªsendIntentçš„typedArrayï¼Œå°±å¯ä»¥äº†<br>é¦–å…ˆï¼Œåˆ¶ä½œéœ€è¦å‰ç½®åˆ†äº«çš„appçš„intent list</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fun getExtraInitialIntent(text: String): ArrayList&lt;Intent&gt; &#123;</span><br><span class="line">    val intentShareList = ArrayList&lt;Intent&gt;()</span><br><span class="line">    //éœ€è¦å‰ç½®çš„receiver appçš„åŒ…å</span><br><span class="line">    var shareItems = </span><br><span class="line">        arrayOf(</span><br><span class="line">            &quot;com.facebook.katana&quot;,</span><br><span class="line">            &quot;com.whatsapp&quot;,</span><br><span class="line">            &quot;com.facebook.orca&quot;,</span><br><span class="line">            &quot;org.telegram.messenger&quot;</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">    for (packageName in shareItems) &#123;</span><br><span class="line">        val intent = Intent()</span><br><span class="line">        intent.action = Intent.ACTION_SEND</span><br><span class="line">        intent.type = &quot;text/plain&quot;</span><br><span class="line">        intent.setPackage(packageName)</span><br><span class="line">        intent.putExtra(Intent.EXTRA_TEXT, text)</span><br><span class="line">        intentShareList.add(intent)</span><br><span class="line">    &#125;</span><br><span class="line">    return intentShareList</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œå°†å…¶è½¬æ¢ä¸ºTypedArrayå¹¶ä¸”æºå¸¦ç»™shareIntent</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shareIntent.putExtra(</span><br><span class="line">    Intent.EXTRA_INITIAL_INTENTS,</span><br><span class="line">    getExtraInitialIntent(arrayListOf(path)).toTypedArray()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨sharesheetä¸­æ’é™¤æŸä¸ªreceiverï¼Œæ¯”å¦‚ï¼Œå¦‚æœé€‰æ‹©å°ç±³æ–‡æ¡£æŸ¥çœ‹å™¨ä½œä¸ºreceiverï¼Œé‚£ä¹ˆå®ƒå°†æŠŠåˆ†äº«çš„æ–‡å­—å†…å®¹å½“ä½œä¸€æ®µåœ°å€æ¥å°è¯•è¯»å–æŸä¸ªæ–‡ä»¶ï¼Œæ˜¾ç„¶ï¼Œè¿™ä¸ç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶ä¸”ä¼šé€ æˆbugã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">private fun getExtraExcludeComponents(intent: Intent): ArrayList&lt;ComponentName&gt; &#123;</span><br><span class="line">    val excludeList = ArrayList&lt;ComponentName&gt;()</span><br><span class="line">    val extraExcludedItems = arrayOf(&quot;cn.wps.xiaomi.abroad.lite&quot;)</span><br><span class="line">    val pm = FrameworkApplication.getAppContext().packageManager</span><br><span class="line">    val targets = pm.queryIntentActivities(intent, 0)</span><br><span class="line">    for (resolveInfo in targets) &#123;</span><br><span class="line">        val targetPackage = resolveInfo.activityInfo.packageName</span><br><span class="line">        val appName = resolveInfo.activityInfo.name</span><br><span class="line">        for (packageName in extraExcludedItems) &#123;</span><br><span class="line">            if (packageName.equals(targetPackage, true)) &#123;</span><br><span class="line">                excludeList.add(ComponentName(targetPackage, appName))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return excludeList</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨åˆ¶ä½œshareIntentæ—¶ï¼ŒåŠ å…¥extraï¼Œä½¿ç”¨EXTRA_EXCLUDE_COMPONENTSå…³é”®å­—ï¼Œå°†å…¶æ’é™¤ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shareIntent.putExtra(</span><br><span class="line">                    Intent.EXTRA_EXCLUDE_COMPONENTS,</span><br><span class="line">                    getExtraExcludeComponents(sendIntent).toTypedArray()</span><br><span class="line">                )</span><br></pre></td></tr></table></figure>

<h2 id="æ”¶é›†åˆ†äº«çš„ç»“æœ"><a href="#æ”¶é›†åˆ†äº«çš„ç»“æœ" class="headerlink" title="æ”¶é›†åˆ†äº«çš„ç»“æœ"></a>æ”¶é›†åˆ†äº«çš„ç»“æœ</h2><p>ç”¨æˆ·åœ¨ç‚¹å‡»åˆ†äº«åï¼Œéœ€è¦åœ¨åˆ†äº«å¼¹çª—ä¸­é€‰æ‹©ä¸€ä¸ªæ¸ é“è¿›è¡Œåˆ†äº«ï¼Œä¾‹å¦‚ï¼Œé€‰æ‹©Facebookè¿›è¡Œåˆ†äº«ï¼Œè€Œæˆ‘ä»¬å¦‚æœæƒ³è¦æ”¶é›†ç”¨æˆ·æœ€åç‚¹å‡»çš„é€‰é¡¹ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨Intent.createChooser(sendIntent, â€œnullâ€, â€œnullâ€)æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨ï¼Œä»è€Œå¯ä»¥æ¥å—ç”¨æˆ·ç‚¹å‡»åå‘å‡ºçš„å¹¿æ’­ã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨ç±»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class LocalShareBroadCastReceiver : BroadcastReceiver() &#123;</span><br><span class="line">    override fun onReceive(context: Context?, intent: Intent?) &#123;</span><br><span class="line">        val clickedComponentName = intent?.getParcelableExtra&lt;ComponentName&gt;(Intent.EXTRA_CHOSEN_COMPONENT)</span><br><span class="line">        val packageName = clickedComponentName?.packageName</span><br><span class="line">        //packageNameå°±æ˜¯ç”¨æˆ·æœ€ç»ˆç‚¹é€‰çš„åŒ…åï¼Œæ­¤å¤„å¯ä»¥è¿›è¡Œæ‰“ç‚¹ç­‰ç»Ÿè®¡æ“ä½œ</span><br><span class="line">        context?.unregisterReceiver(this)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ¥æ”¶å™¨å®ä¾‹ï¼Œå¹¶ä¸”åŠ¨æ€æ³¨å†Œï¼Œä¹‹åå†è¿”å›ä¸€ä¸ªintentSenderç”¨äºæ„é€ shareIntent</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//å»ºè®®å°†localShareBroadCastReceiver ä¿å­˜æˆä¸ºstatic finalå¸¸é‡ï¼Œåœ¨æ¯æ¬¡åˆ†äº«æ“ä½œæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦è¢«æ³¨å†Œã€‚å¤šæ¬¡æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨ä¼šä½¿å¾—ç”¨æˆ·åœ¨ç¬¬äºŒæ¬¡åˆ†äº«çš„æ—¶å€™æ‰§è¡Œä¸¤æ¬¡onReceiveä¸­çš„æ“ä½œ</span><br><span class="line">val localShareBroadCastReceiver = LocalShareBroadCastReceiver()</span><br><span class="line"></span><br><span class="line">val sender = registerShareReceiver(</span><br><span class="line">    appContext, &quot;com.videoplayer.SHARE_ACTION_LOCAL&quot;,</span><br><span class="line">    localShareBroadCastReceiver</span><br><span class="line">)</span><br><span class="line">val shareIntent = Intent.createChooser(sendIntent, &quot;null&quot;, sender)</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼ŒregisterShareReceiveræ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fun registerShareReceiver(</span><br><span class="line">    context: Context,</span><br><span class="line">    action: String,</span><br><span class="line">    receiver: BroadcastReceiver</span><br><span class="line">): IntentSender &#123;</span><br><span class="line">    val receiverIntent = Intent(action)</span><br><span class="line">    receiverIntent.putExtra(&quot;test&quot;, &quot;test&quot;)</span><br><span class="line">    val pi = PendingIntent.getBroadcast(</span><br><span class="line">        FrameworkApplication.getAppContext(),</span><br><span class="line">        10000,</span><br><span class="line">        receiverIntent,</span><br><span class="line">        //Android 12 ä»¥ä¸Šï¼Œä¸€å®šè¦åŠ PendingIntent.FLAG_MUTABLEï¼Œä¸ç„¶å°†ä¸ä¼šæ”¶åˆ°å›è°ƒ</span><br><span class="line">        PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_MUTABLE</span><br><span class="line">    )</span><br><span class="line">    context.registerReceiver(</span><br><span class="line">        receiver,</span><br><span class="line">        IntentFilter(action)</span><br><span class="line">    )</span><br><span class="line">    return pi.intentSender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚å‰æ–‡æ³¨é‡Šä¸­æåˆ°çš„ï¼Œå¤šæ¬¡æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨ä¼šä½¿å¾—ç”¨æˆ·åœ¨ç¬¬äºŒæ¬¡åˆ†äº«çš„æ—¶å€™æ‰§è¡Œä¸¤æ¬¡onReceiveä¸­çš„æ“ä½œï¼Œå› æ­¤å»ºè®®å°†localShareBroadCastReceiver ä¿å­˜æˆä¸ºstatic finalå¸¸é‡ï¼Œåœ¨æ¯æ¬¡åˆ†äº«æ“ä½œæ—¶ï¼Œå°è¯•åæ³¨å†Œï¼Œä¿è¯æ¯æ¬¡åˆ†äº«æ“ä½œä»…æœ‰1ä¸ªreceiverè¿›è¡Œç›‘å¬ã€‚<br>Androidå¼€å‘è€…ï¼šåº”ç”¨æ•°æ®å’Œæ–‡ä»¶<br><a href="https://developer.android.google.cn/training/sharing">https://developer.android.google.cn/training/sharing</a> </p>
]]></content>
      <categories>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼ç³»åˆ—â€”â€”æµç¨‹å¼•æ“</title>
    <url>/2023/01/01/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97%E2%80%94%E2%80%94%E6%B5%81%E7%A8%8B%E5%BC%95%E6%93%8E/</url>
    <content><![CDATA[<p>åœ¨ç”µå•†é‡Œé¢å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘åœºæ™¯æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»¥åˆ›å»ºå•†å“ä¸ºä¾‹å­ã€‚å¾ˆå¤šäººå¯èƒ½ä¼šé—®åˆ›å»ºå•†å“å¾ˆå¤æ‚å—ï¼Ÿ</p>
<span id="more"></span>

<p>åˆ›å»ºå•†å“çš„æµç¨‹ï¼š<br>å‚æ•°å¿…å¡«æ€§æ ¡éªŒ<br>å‚æ•°æ•°æ®è½¬æ¢<br>å•†å“åŸºç¡€ä¿¡æ¯æ ¡éªŒ<br>å•†å“ä¸å•†å®¶ä¹‹é—´çš„æ ¡éªŒ<br>ç±»ç›®ä¿¡æ¯æ ¡éªŒ<br>å•†å“äº¤æ˜“ä¿¡æ¯æ ¡éªŒï¼ˆè¿™ä¸ªçœ‹å…¬å¸ä¸šåŠ¡å†³å®šï¼‰<br>SKUç›¸å…³ä¿¡æ¯æ ¡éªŒ<br>å•†å“æ˜¯å¦éœ€è¦æœ‰ç‰¹å®šæ ‡ç­¾æ ¡éªŒï¼ˆçœ‹å…¬å¸ä¸šåŠ¡å†³å®šï¼‰<br>å•†å“ç±»å‹æ ¡éªŒï¼ˆæ™®é€šï¼Œå¡ç‰‡ï¼Œè§†é¢‘â€¦â€¦.ï¼‰<br>å•†å“é£æ§æ ¡éªŒ<br>ä¿å­˜å•†å“ä¿¡æ¯<br>ä¿å­˜SKUä¿¡æ¯<br>ä¿å­˜å•†å“è¯¦æƒ…ä¿¡æ¯<br>é‡é‡æ¨¡ç‰ˆ<br>è¿è´¹<br>é…é€åŒºåŸŸ<br>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚<br>è¿™é‡Œå•†å“ç±»å‹é‡Œé¢è¿˜æ¶‰åŠåˆ°å„ä¸ªä¸šåŠ¡åœºæ™¯æ ¡éªŒï¼Œæˆ‘ä»¬å°±å…ˆä¸è°ˆäº†ã€‚é’ˆå¯¹è¿™æ ·çš„æƒ…å†µæˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»å†™è¿™ä¸ªä»£ç å‘¢ï¼Ÿæˆ‘ç¿»çœ‹äº†ä¸€ä¸‹ä»¥å‰å¤§å­¦å†™çš„ä¸€äº›ä»£ç æ•´ä½“çš„ä»£ç æ ¼å¼å¤§æ¦‚ä¹Ÿå°±æ˜¯è¿™ä¸ªæ ·å­<br><a href="https://imgse.com/i/pSCrA7n"><img src="https://s1.ax1x.com/2023/01/01/pSCrA7n.jpg" alt="pSCrA7n.jpg"></a><br>è¿™ä¹ˆå†™å…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŒåŠŸèƒ½ä¹Ÿèƒ½å®ç°ã€‚ä½†æ˜¯è¿™ä¹ˆå†™å…¶å®æœ‰å¾ˆå¤šå¼Šç«¯ï¼š<br>1.ä»£ç å¯è¯»æ€§ä¸é«˜<br>2.ä»£ç æ‰©å±•æ€§ä¸é«˜<br>3.è€¦åˆæ€§å¤ªå¼ºï¼Œæœ‰äº›ä¸œè¥¿ä¸å¥½å…¬ç”¨<br>4.æ•´ä½“åˆ›å»ºæ‰§è¡Œæµç¨‹äº‹ä»¶å¤ªé•¿ï¼Œä¸²è¡Œè°ƒç”¨ä¸‹æ¸¸æœåŠ¡</p>
<p> çœ‹åˆ°è¿™æ ·ä»£ç æˆ‘ä»¬é¦–å…ˆéƒ½æ˜¯åæ§½ä¸€ç•ªï¼Œç„¶åè¿˜æ˜¯è€è€å®å®å»æ”¹ï¼Œæœ‰åŠ¨æ‰‹èƒ½åŠ›å¼ºçš„ä¼šæƒ³ç€å»ä¼˜åŒ–ä¸€ä¸‹ã€‚å†çœ‹çœ‹è¿™ä¸ªæµç¨‹ï¼Œå…¶å®åœ¨åˆ›å»ºå•†å“çš„æ—¶å€™æˆ‘ä»¬å¾ˆå¤šæ ¡éªŒå’Œä¿å­˜æ•°æ®æ˜¯æ²¡æœ‰ä¾èµ–ä¸”äº’ä¸å½±å“çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å»å¹¶è¡Œæ‰§è¡Œã€‚</p>
<p>èŠ‚çœåˆ›å»ºå•†å“çš„æµç¨‹æ—¶é—´ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ï¼ˆPSï¼šå°±å¥½æ¯”ä¸¤æ¡å‘Šè¯‰ä¸€æ¡å µè½¦ï¼Œä¸€æ¡ç•…é€šæ— é˜»ï¼Œé€‰å“ªæ¡ï¼Ÿï¼‰<br>æ‰€ä»¥é’ˆå¯¹è¿™ä¹ˆå¹¶è¡Œé—®é¢˜æˆ‘è¿˜æ˜¯ç»™å¤§å®¶ç”»äº†ä¸€ä¸ªæµç¨‹å›¾ï¼š<br><a href="https://imgse.com/i/pSCsXJP"><img src="https://s1.ax1x.com/2023/01/01/pSCsXJP.jpg" alt="pSCsXJP.jpg"></a><br>é€šè¿‡è¿™å¼ å›¾æˆ‘ä»¬çœ‹åˆ°åˆ›å»ºä¸€ä¸ªå•†å“æµç¨‹ï¼Œæˆ‘ä»¬è°ƒç”¨çš„ä¸‹æ¸¸æœåŠ¡å¯èƒ½æ˜¯æœ‰åå‡ äºŒåå‡ æˆ–è€…æ›´å¤šï¼Œå‡è®¾æˆ‘ä»¬ä¸€æ¬¡RPCè°ƒç”¨çš„å¹³å‡è¿”å›æ—¶é—´æ˜¯50æ¯«ç§’ï¼Œä¸²è¡Œæ‰§è¡Œæ—¶é—´å¯èƒ½å°±1-2ç§’äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¹¶è¡Œæ‰§è¡Œçš„è¯ä¹Ÿå°±200åˆ°300æ¯«ç§’äº†ã€‚</p>
<p>æ‰€ä»¥æœ¬ç€è¿™ç§æ€æƒ³å¯èƒ½ä¼šæœ‰äººé—®ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½å¼‚æ­¥ï¼Œä¸èƒ½ç”¨æ¶ˆæ¯ï¼Ÿåˆ›å»ºå•†å“å‡è®¾ç”¨å¼‚æ­¥æ¶ˆæ¯çš„è¯ï¼Œå¦‚æœæ¶ˆè´¹å¤±è´¥é‚£ç”¨æˆ·åˆ›å»ºå•†å“æˆåŠŸä¿å­˜å…¶ä»–ä¿¡æ¯å¤±è´¥äº†ï¼Œé‚£å¯¹ç”¨æˆ·æ¥è¯´ä¸æ˜¯ä½“éªŒæ›´åŠ ä¸å¥½äº†</p>
<p>è¯´äº†è¿™ä¹ˆå¤šå¼€å§‹æ’¸ä»£ç ï¼š<br><a href="https://imgse.com/i/pSCykiq"><img src="https://s1.ax1x.com/2023/01/01/pSCykiq.jpg" alt="pSCykiq.jpg"></a><br>å…ˆåˆ›å»ºä¸€ä¸ªContextä¸Šä¸‹æ–‡ï¼Œä½œä¸ºæˆ‘ä»¬è°ƒç”¨ä¸‹æ¸¸æœåŠ¡çš„è¿”å›ç»“æœ<br><a href="https://imgse.com/i/pSCyAJ0"><img src="https://s1.ax1x.com/2023/01/01/pSCyAJ0.jpg" alt="pSCyAJ0.jpg"></a><br>ç¬¬äºŒæ­¥åˆ›å»ºæˆ‘ä»¬çš„æµç¨‹èŠ‚ç‚¹ï¼Œè¿™ç›¸å½“äºå°±æ˜¯ä¿å­˜æˆ‘ä»¬æ•´ä¸ªæµç¨‹ä¸­éœ€è¦æ‰§è¡Œä¸‹æ¸¸æœåŠ¡çš„èŠ‚ç‚¹ï¼Œä»¥Mapä½œä¸ºä¿å­˜æ•°æ®ï¼ŒNodeConfèŠ‚ç‚¹è®¾ç½®å‚æ•°ï¼Œè‡ªå®šä¹‰è¯·æ±‚æœåŠ¡å™¨è¶…æ—¶æ—¶é—´ï¼ˆå› ä¸ºå¹¶è¡Œæˆ‘ä»¬ç”¨çš„çº¿ç¨‹æ± æˆ–è€…é€šè¿‡getè®¾ç½®æ—¶é—´getè¿”å›å€¼ç»“æœï¼‰<br><a href="https://imgse.com/i/pSPnMDJ"><img src="https://s1.ax1x.com/2023/01/02/pSPnMDJ.jpg" alt="pSPnMDJ.jpg"></a><br>ç¬¬ä¸‰æ­¥å¼•æ“ç±»ï¼Œè¿™ä¸ªä¹Ÿæ˜¯æˆ‘ä»¬çš„æ ¸å¿ƒç±»ã€‚é€šè¿‡æˆ‘ä»¬æ·»åŠ çš„nodeèŠ‚ç‚¹åˆ¤æ–­æˆ‘ä»¬å“ªäº›æµç¨‹æ˜¯éœ€è¦ä¸²è¡Œçš„å“ªäº›æ˜¯éœ€è¦å¹¶è¡Œçš„ï¼Œé€šè¿‡çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹æ”¾å…¥Featureä¸­ï¼Œæ¥1è¾¾åˆ°åŒæ­¥æ‰§è¡Œçš„æ•ˆæœ</p>
<p>åœ¨ä½¿ç”¨çº¿ç¨‹æ± çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸è¦è®¾ç½®çš„å‚æ•°è¿‡å¤§ï¼Œå¼€å¯å¦å¤–çš„çº¿ç¨‹ä¹Ÿæ˜¯ä¼šå ç”¨æœºå™¨å†…å­˜çš„ï¼Œä¸€ä¸ªçº¿ç¨‹æŒ‰ç…§1å…†æ¥ç®—çš„è¯ï¼Œä½ å¼€å¯å‡ ç™¾ä¸Šåƒä¸ªï¼Œä¹Ÿä¼šå ç”¨å¾ˆå¤§ä¸€éƒ¨åˆ†å†…å­˜ã€‚å°½å¯èƒ½çš„å»é‡‡ç”¨æ± åŒ–çš„æ€æƒ³ï¼Œè¿™é‡Œå°±æŒ‰å¤§å®¶å®é™…åœºæ™¯å»åšæµ‹è¯•äº†ã€‚</p>
<p><a href="https://imgse.com/i/pSPnJC6"><img src="https://s1.ax1x.com/2023/01/02/pSPnJC6.jpg" alt="pSPnJC6.jpg"></a><br>ç¬¬å››æ­¥æ‰§è¡Œcallæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œæˆ‘ä»¬çš„nodeèŠ‚ç‚¹</p>
<p><a href="https://imgse.com/i/pSPnY8K"><img src="https://s1.ax1x.com/2023/01/02/pSPnY8K.jpg" alt="pSPnY8K.jpg"></a><br>ç¬¬äº”æ­¥åˆ›å»ºèŠ‚ç‚¹æ¥å£ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªResultKeyï¼Œè¿™ä¸ªKeyä¹Ÿå°±æ˜¯è·Ÿæˆ‘æµç¨‹ä¸­çš„è¿™ä¸ªèŠ‚ç‚¹ç»‘å®šï¼Œåœ¨è·å–æ•°æ®çš„æ—¶å€™ä¹Ÿå°±æ˜¯é€šè¿‡è¿™ä¸ªkeyæ¥æ ‡è¯†</p>
<p><a href="https://imgse.com/i/pSPnNvD"><img src="https://s1.ax1x.com/2023/01/02/pSPnNvD.jpg" alt="pSPnNvD.jpg"></a><br>ç¬¬å…­æ­¥å› ä¸ºæˆ‘ä»¬åœ¨èŠ‚ç‚¹é‡Œé¢å­˜çš„Classç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—é€šè¿‡å®ç°ApplicationContextAwareç±»æ¥è·å–Springå®¹å™¨ä¸­å¾—beanå®ä¾‹</p>
<p><a href="https://imgse.com/i/pSPn68f"><img src="https://s1.ax1x.com/2023/01/02/pSPn68f.jpg" alt="pSPn68f.jpg"></a><br>ç¬¬ä¸ƒæ­¥é‚£å°±æ˜¯æ¥åˆ›å»ºä¸¤ä¸ªæµ‹è¯•nodeèŠ‚ç‚¹</p>
<p><a href="https://imgse.com/i/pSPRVmT"><img src="https://s1.ax1x.com/2023/01/02/pSPRVmT.jpg" alt="pSPRVmT.jpg"></a><br><a href="https://imgse.com/i/pSPRZ0U"><img src="https://s1.ax1x.com/2023/01/02/pSPRZ0U.jpg" alt="pSPRZ0U.jpg"></a><br>æœ€åå½“ç„¶å°±æ˜¯æˆ‘ä»¬å¾—æµ‹è¯•ç»“æœäº†ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªèŠ‚ç‚¹NodeOneå’ŒNodeTwoä½œä¸ºæ¨¡æ‹ŸçœŸå®ä¸šåŠ¡åœºæ™¯å¾—èŠ‚ç‚¹ï¼Œé€šè¿‡ä¸€ä¸ªåé¢å¾—threeä½œä¸ºä¸€ä¸ªgroupéœ€è¦å¹¶æ‰§è¡Œçš„èŠ‚ç‚¹ã€‚<br>çœ‹å®Œä»£ç æœ€åå†ç»™å¤§å®¶æ¥ä¸€ä¸ªæ€»ä½“çš„æµç¨‹å›¾å§<br><a href="https://imgse.com/i/pSPRutJ"><img src="https://s1.ax1x.com/2023/01/02/pSPRutJ.jpg" alt="pSPRutJ.jpg"></a><br>çœ‹å®Œæ˜¯ä¸æ˜¯è§‰å¾—æ„Ÿè§‰è‡ªå·±é¡¿æ‚Ÿï¼Œä»¥åé¢å¯¹å†å¤æ‚çš„æµç¨‹ä¸šåŠ¡ä¹Ÿèƒ½æ‹¿ä¸‹äº†ã€‚</p>
<p>æ€è€ƒï¼š<br>å…¶å®è¿™é‡Œè¿˜æœ‰å¾ˆå¤šä¼˜åŒ–ç‚¹ï¼Œæ¯ä¸ªäººé‡åˆ°çš„å¤æ‚çš„åœºæ™¯å¯èƒ½ä¹Ÿä¸ä¸€æ ·ï¼Œåªèƒ½è¯´ç»™å¤§å®¶æä¾›ä¸€ä¸ªæ€æƒ³å§ï¼Œé’ˆå¯¹ä¸åŒçš„åœºæ™¯å¤§å®¶å†å»åšæ”¹é€ å§</p>
<p>æ‰©å±•ï¼š<br>ç»†å¿ƒçš„åŒå­¦å¯èƒ½éƒ½ä¼šå‘ç°è¿™éƒ½æ˜¯å¼ºä¾èµ–æ€§ï¼Œèƒ½ä¸èƒ½æœ‰å¼±ä¾èµ–åœ¨é‡Œé¢å‘¢ï¼Ÿ<br>ç­”æ¡ˆï¼š<br>å½“ç„¶å¯ä»¥æœ‰å¼±ä¾èµ–äº†ï¼Œåœ¨FlowNode.NodeConfä¸­æˆ‘ä»¬æ—¢ç„¶å¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å†æ·»åŠ ä¸€ä¸ªå‚æ•°æ¥ç¡®å®šæ˜¯éƒ½æ˜¯å¼±ä¾èµ–ã€‚åœ¨æˆ‘ä»¬çš„future.getè·å–ç»“æœçš„æ—¶å€™å½“å‡ºç°å¼‚å¸¸å¯ä»¥catchä½ï¼Œå¼ºä¾èµ–åˆ™ç»ˆæ­¢æµç¨‹è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™è®°å½•é”™è¯¯æ—¥å¿—ï¼Œæµç¨‹continue</p>
<p>æˆ‘ä»¬æµç¨‹ä¿å­˜ç°åœ¨æ˜¯ç”¨çš„é™æ€ä»£ç å—ï¼Œå¯ä¸å¯ä»¥æ¢å…¶ä»–çš„æ–¹å¼ä¿å­˜èŠ‚ç‚¹å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šè¿™ä¸ªå½“ç„¶ä¹Ÿå¯ä»¥ï¼Œæˆ‘ä»¬ä¿å­˜åœ¨æ•°æ®åº“ï¼ŒACMï¼ŒApolloç­‰ç­‰éƒ½æ˜¯å¯ä»¥çš„ã€‚è¿™ä¸ªå–å†³äºä½ ä»¬è‡ªå·±çš„ä¸šåŠ¡å’Œæˆæœ¬é—®é¢˜ã€‚å› ä¸ºæµç¨‹æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä¸ä¼šç»å¸¸æ¢çš„ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯å»ºè®®ä»£ç å†™æ­»å°±å¯ä»¥äº†</p>
<p>é‡‡ç”¨çº¿ç¨‹æ± å»è°ƒç”¨ä¸‹æ¸¸æœåŠ¡ï¼Œä¼šä¸ä¼šé€ æˆæœåŠ¡é“¾è·¯è¿½è¸ªå¤±è´¥å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼šè¿™ä¸ªä¸èƒ½è¯´ç»å¯¹ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¿å­˜å†ThreadLocalä¸­é‚£è‚¯å®šä¼šå¤±æ•ˆçš„ï¼ŒThreadLocalä¸­çš„KEYä¹Ÿå°±æ˜¯è·Ÿå½“å‰çº¿ç¨‹çš„IDæœ‰å…³ï¼Œéƒ½å¼€å¯æ–°çš„çº¿ç¨‹äº†ï¼Œé‚£è‚¯å®šä¹Ÿå°±æ˜¯ä¸¢å¤±äº†</p>
<p>å¦‚æœé‡‡ç”¨ThreadLocalåœ¨èŠ‚ç‚¹ä¸­æ˜¯ä¸æ˜¯å°±å¤±æ•ˆäº†</p>
<p>ç­”æ¡ˆï¼šç¬¬ä¸‰ç‚¹å·²ç»ç»™å‡ºç­”æ¡ˆäº†</p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼ç³»åˆ—â€”â€”å·¥å‚æ¨¡å¼</title>
    <url>/2022/12/21/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97%E2%80%94%E2%80%94%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>å­¦ä¹ æŠ€æœ¯æ·±åº¦çš„æ—¶å€™ï¼ˆçœ‹ä¸€äº›æ¡†æ¶çš„æºç ï¼‰æ€»æ„Ÿè§‰åªç†è§£äº†è¡¨é¢ï¼Œè€Œæ²¡æœ‰ç†è§£é‡Œé¢çš„æ€æƒ³ã€‚<br>è¿™é‡Œå¤§å®¶åº”è¯¥éƒ½çŸ¥é“æˆ‘æƒ³è¯´ä»€ä¹ˆï¼Œå°±æ˜¯è®¾è®¡æ¨¡å¼ã€‚</p>
<span id="more"></span>

<p>ä»Šå¤©èŠä¸€ä¸‹å·¥å‚æ¨¡å¼ï¼Œå·¥å‚æ¨¡å¼åœ¨æˆ‘ä»¬çš„ç”µå•†é¢†åŸŸçš„åº”ç”¨æ˜¯éå¸¸å¹¿æ³›çš„ï¼Œå†™ä¹‹å‰æˆ‘çœ‹äº†è‡ªå·±ç”µè„‘é¡¹ç›®çš„ä»£ç ï¼Œç¡®å®éšå¤„å¯è§ã€‚<br>å·¥å‚æ¨¡å¼ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼š<br>ç®€å•å·¥å‚æ¨¡å¼<br>å·¥å‚æ–¹æ³•æ¨¡å¼<br>æŠ½è±¡å·¥å‚æ¨¡å¼</p>
<p>ä»Šå¤©æˆ‘ä¹Ÿä¸»è¦å›´ç»•è¿™ä¸‰ç§æ¨¡å¼æ¥ä¸¾ä¾‹äº†è§£ä¸€ä¸‹</p>
<h2 id="ç®€å•å·¥å‚æ¨¡å¼"><a href="#ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="ç®€å•å·¥å‚æ¨¡å¼"></a>ç®€å•å·¥å‚æ¨¡å¼</h2><p>å·¥å‚æ¨¡å¼ä¸»è¦æ˜¯ç”¨äºå¯¹å®ç°é€»è¾‘çš„å°è£…ï¼Œå¹¶ä¸”é€šè¿‡å¯¹å…¬å…±çš„æ¥å£æä¾›å¯¹è±¡çš„å®ä¾‹åŒ–çš„æœåŠ¡ï¼Œåœ¨æˆ‘æ·»åŠ æ–°çš„ç±»æ—¶ä¸éœ€è¦å¤§åŠ¨å¹²æˆˆï¼Œåªè¦ä¿®æ”¹ä¸€ç‚¹å°±å¥½ã€‚</p>
<p>ä¸¾ä¸ªç”µå•†ä¸šåŠ¡æ˜¯æ€ä¹ˆåˆ›å»ºå•†å“çš„ï¼š<br><a href="https://imgse.com/i/zXVPc8"><img src="https://s1.ax1x.com/2022/12/21/zXVPc8.jpg" alt="zXVPc8.jpg"></a><br>åœ¨è¿™ä¸ªç®€å•å·¥å‚é‡Œé¢ï¼Œå¦‚æœè¦åˆ›å»ºæ´»åŠ¨å•†å“1ä»¥åŠæ´»åŠ¨å•†å“2ï¼Œæˆ‘ä»¬è¦åˆ›å»ºå•†å“çš„æ—¶å€™åªè¦è°ƒç”¨ç®€å•å·¥å‚é‡Œé¢çš„åˆ›å»ºå•†å“æ–¹æ³•ï¼Œæ ¹æ®ç±»å‹åˆ›å»ºå‡ºä¸åŒçš„å•†å“ç„¶åå®ä¾‹åŒ–è¿”å›å°±å¯ä»¥äº†ã€‚</p>
<p>ç®€å•å·¥å‚å‡ ç§å®ç°æ–¹å¼ï¼š</p>
<h3 id="é™æ€å·¥å‚æ¨¡å¼"><a href="#é™æ€å·¥å‚æ¨¡å¼" class="headerlink" title="é™æ€å·¥å‚æ¨¡å¼"></a>é™æ€å·¥å‚æ¨¡å¼</h3><p>æˆ‘ä»¬è¿˜æ˜¯ä»¥åˆ›å»ºå•†å“ä¸ºä¾‹å­</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class SimpleFacttory &#123;</span><br><span class="line">	public static Share createProduct(EnumProdutType type) &#123;</span><br><span class="line">		if (EnumProductType.activityone.equals(type)) &#123;</span><br><span class="line">			return new ProductOne();</span><br><span class="line">		&#125; else if (EnumProductType.acctivityTwo.equals(type)) &#123;</span><br><span class="line">			return new ProductTwo();</span><br><span class="line">		&#125;</span><br><span class="line">		return null;</span><br><span class="line">	&#125;</span><br><span class="line">	public enum EnumProductType &#123;</span><br><span class="line">		activituOne, activityTwo;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼åˆ›å»ºçœ‹èµ·æ¥å…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ ¹æ®ç±»å‹åˆ›å»ºä¸åŒçš„å•†å“ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ä¸çŸ¥é“å¤§å®¶å‘ç°æ²¡æœ‰ï¼Ÿ</p>
<p>æ˜¯ä¸æ˜¯æˆ‘æ²¡å¢åŠ ä¸€ç§ç±»å‹è¿˜è¦å»createProductæ–¹æ³•ä¸Šä¿®æ”¹if elseï¼Ÿè¿™ä¸æ˜¯è¿èƒŒæˆ‘ä»¬çš„å¼€é—­åŸåˆ™å—ï¼Ÿ</p>
<p>æ‰€ä»¥è¿™ç§æ–¹å¼ä¸å¥½ï¼Œæˆ‘ä»¬è¿˜æœ‰æ¥ä¸‹æ¥çš„ä¸¤ç§ï¼š<br>ä½¿ç”¨åå°„æœºåˆ¶<br>ç›´æ¥æ³¨å†Œå•†å“å¯¹è±¡ï¼Œæ·»åŠ ä¸€ä¸ªTypeç±»å‹æ–¹æ³•ï¼Œæ ¹æ®typeç±»å‹è¿”å›è‡ªèº«ç›¸åŒç±»å‹çš„æ–¹æ³•ã€‚åŒæ ·çš„æˆ‘ä»¬è¿˜æ˜¯ä»¥åˆ›å»ºå•†å“ä¸ºä¾‹ï¼šåå°„å®ç°<br>åŒæ ·çš„æˆ‘ä»¬è¿˜æ˜¯ä»¥åˆ›å»ºå•†å“ä¸ºä¾‹ï¼šåå°„å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class SimpleFactoryReflection &#123;</span><br><span class="line"></span><br><span class="line">    private static final Map&lt;EnumProductType, Class&gt; activityIdMap = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public  static void addProductKey(EnumProductType EnumProduct, Class product) &#123;</span><br><span class="line">        activityIdMap.put(EnumProduct, product);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static activityOne product(EnumProductType type) throws IllegalAccessException, InstantiationException &#123;</span><br><span class="line">        Class productClass = activityIdMap.get(type);</span><br><span class="line">        return (activityOne) productClass.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        addProductKey(EnumProductType.activityOne, activityOne.class);</span><br><span class="line">        activityOne product = product(EnumProductType.activityOne);</span><br><span class="line">        System.out.println(product.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class Producet&#123;</span><br><span class="line">        private String name;</span><br><span class="line">        public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">        &#125;</span><br><span class="line">        public void setName(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class activityOne extends Producet &#123;</span><br><span class="line">        private String stock;</span><br><span class="line">        @Override</span><br><span class="line">        public String toString() &#123;</span><br><span class="line">            return &quot;activityOne&#123;&quot; +</span><br><span class="line">                    &quot;stock=&#x27;&quot; + stock + &#x27;\&#x27;&#x27; +</span><br><span class="line">                    &#x27;&#125;&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public class activityTwo extends Producet &#123;</span><br><span class="line">        private String stock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public enum EnumProductType &#123;</span><br><span class="line">        activityOne, activityTwo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘å‘ç°åå°„å…¶å®ä¹Ÿå¾ˆå®¹æ˜“å°±å®ç°äº†ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç‰¹å®šçš„æƒ…å†µä¸‹ï¼Œå¹¶ä¸é€‚ç”¨ï¼Œè€Œä¸”åœ¨æŸäº›ç‰¹å®šçš„æƒ…å†µä¸‹æ˜¯æ— æ³•å®ç°çš„ï¼Œè€Œä¸”åå°„æœºåˆ¶ä¹Ÿä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆæœï¼Œåœ¨å¯¹æƒ³èƒ½è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ä¸‹åº”è¯¥é¿å…è¿™ç§å®ç°ã€‚</p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ä½¿ç”¨åå°„ä¸å½“æ˜¯å¾ˆå®¹æ˜“å¯¼è‡´çº¿ä¸Šæœºå™¨å‡ºé—®é¢˜çš„ï¼Œå› ä¸ºæˆ‘ä»¬åå°„åˆ›å»ºçš„å¯¹è±¡å±æ€§æ˜¯è¢«SoftReferenceè½¯å¼•ç”¨çš„ï¼Œæ‰€ä»¥å½“**-XX:SoftRefLRUPolicyMSPerMB**æ²¡æœ‰è®¾ç½®å¥½çš„è¯ï¼Œä¼šè®©æœºå™¨çš„CPUä¸€ç›´å¾ˆé«˜ã€‚å½“ç„¶å®ƒçš„é»˜è®¤å€¼æ˜¯1000ï¼Œä¹Ÿå°±æ ¹æ®å¤§å®¶çš„æƒ…å†µè€Œå®šå§ã€‚</p>
<p>å‰©ä¸‹çš„ä¸€ç§å…¶å®è·Ÿåå°„å®ç°å¾ˆåƒï¼Œå°±æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨åå°„ï¼Œåœ¨Mapçš„å¯¹è±¡ä¸­ä¸æ˜¯å­˜çš„è¦æ·»åŠ çš„ç±»ï¼Œè€Œæ˜¯å°†è¦æ·»åŠ çš„æ¯ç§ç±»å¯¹è±¡å®ä¾‹ï¼Œè¿™ä¸ªå°±ä¸å†™demoäº†ã€‚</p>
<h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h3><p>å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯å¯¹é™æ€å·¥å‚æ¨¡å¼ä¸Šçš„ä¸€ç§æ”¹è¿›ï¼Œæˆ‘ä»¬å·¥å‚ç±»ç›´æ¥è¢«æŠ½è±¡åŒ–ï¼Œéœ€è¦å…·ä½“ç‰¹å®šåŒ–çš„é€»è¾‘ä»£ç è½¬ç§»åˆ°å®ç°æŠ½è±¡æ–¹æ³•çš„å­ç±»ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸è¦å†å»ä¿®æ”¹å·¥å‚ç±»ï¼ˆå³ï¼šä¸ç”¨å†å»åšä»€ä¹ˆif elseä¿®æ”¹ï¼‰è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å½“å‰æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§æ–¹å¼ã€‚<br>è¿˜æ˜¯ä»¥æˆ‘ä»¬åˆ›å»ºå•†å“ä¸ºä¾‹ï¼š<br><a href="https://imgse.com/i/zxHvsP"><img src="https://s1.ax1x.com/2022/12/26/zxHvsP.jpg" alt="zxHvsP.jpg"></a><br>çœ‹è¿™å¼ å›¾ï¼Œå…¶å®è¯´ç™½äº†å°±æ˜¯å†åˆ›å»ºä¸€ä¸ªå·¥å‚ï¼Œç”¨æ¥åˆ›å»ºå·¥å‚ç±»å¯¹è±¡<br>æ¥ä¸‹æ¥çœ‹ä»£ç å®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public abstract class FactoryMethod &#123;</span><br><span class="line"></span><br><span class="line">    protected abstract Product createProduct(String name);</span><br><span class="line"></span><br><span class="line">    public Product product(String activity, String name) &#123;</span><br><span class="line">        Product product = createProduct(activity);</span><br><span class="line">        product.setProductName(name);</span><br><span class="line">        return product;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class Product &#123;</span><br><span class="line">        public String productName;</span><br><span class="line"></span><br><span class="line">        public String getProductName() &#123;</span><br><span class="line">            return productName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setProductName(String productName) &#123;</span><br><span class="line">            this.productName = productName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public enum EnumProductType &#123;</span><br><span class="line">        activityOne(&quot;one&quot;),</span><br><span class="line">        activityTwo(&quot;two&quot;);</span><br><span class="line"></span><br><span class="line">        private String name;</span><br><span class="line"></span><br><span class="line">        EnumProductType(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setName(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå…ˆåˆ›å»ºä¸€ä¸ªæŠ½è±¡å·¥å‚æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class ProductFactory extends FactoryMethod&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected Product createProduct(String activityId) &#123;</span><br><span class="line">        if (EnumProductType.activityOne.getName().equals(activityId)) &#123;</span><br><span class="line">            //è¿™é‡Œå¯ä»¥å¤„ç†æˆ‘ä»¬è‡ªå·±çš„æƒ³è¦çš„ä¸šåŠ¡é€»è¾‘ä»£ç </span><br><span class="line">            return new OneProduct();</span><br><span class="line">        &#125; else if (EnumProductType.activityTwo.getName().equals(activityId)) &#123;</span><br><span class="line">            return new TwoProduct();</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class OneProduct extends Product &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class TwoProduct extends Product &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        FactoryMethod factoryMethod = new ProductFactory();</span><br><span class="line">        Product product = factoryMethod.product(&quot;one&quot;, &quot;one&quot;);</span><br><span class="line">        System.out.println(product.getProductName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†åˆ›å»ºä¸€ä¸ªå•†å“å·¥å‚å»ç»§æ‰¿æŠ½è±¡å·¥å‚æ–¹æ³•ã€‚</p>
<p>å½“è¿˜æœ‰å…¶ä»–ç±»å‹çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦å»ç»§æ‰¿æˆ‘ä»¬åˆ›å»ºçš„å·¥å‚æ–¹æ³•å°±å¯ä»¥äº†ã€‚<br>è¿™ä¸ªä»£ç å¤§å®¶è‚¯å®šéƒ½èƒ½å®ç°å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦å­¦ä¹ çš„æ˜¯å‰è¾ˆä»¬è¿™ç§å·¥å‚æ¨¡å¼çš„æ€æƒ³ã€‚æŠŠè¿™ç§æ€æƒ³è¿ç”¨åˆ°æˆ‘ä»¬çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå­¦ä»¥è‡´ç”¨æ‰èƒ½å¯¹æˆ‘ä»¬æœ‰çœŸæ­£çš„æå‡ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­</p>
<p>å‡è®¾ç°åœ¨éœ€è¦åšä¸€ä¸ªåˆ†äº«å•†å“å›¾ç‰‡ï¼Œæˆ‘ä»¬çŸ¥é“å•†å“çš„ç±»å‹æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æ— SKUå•†å“ï¼Œæœ‰SKUå•†å“ï¼Œä¸‹å•åˆ†äº«ï¼Œé‚€è¯·åˆ†äº«â€¦ç­‰ä¸€ä¸‹åˆ—çš„åœºæ™¯ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå»è®¾è®¡è¿™ä¸ªä»£ç åšåˆ°æ›´åŠ çš„æ˜“æ‡‚ï¼Œæ˜“è¯»ï¼Œä»Šåæ‰©å±•æ€§å¥½å‘¢ï¼Ÿ<br>æ³¨ï¼šskuå’Œspuæ˜¯ç”µå•†é‡Œé¢çš„åè¯ï¼Œspuå·®ä¸å¤šè·Ÿitemä¹Ÿå°±æ˜¯å•†å“æ˜¯ä¸€ä¸ªç»´åº¦ï¼Œä¸€ä¸ªå•†å“itemæœ‰å¾ˆå¤šskuï¼Œæ¯”å¦‚ï¼šiphoneæ˜¯ä¸€ä¸ªå•†å“æ˜¯itemä¹Ÿæ˜¯spuï¼Œç™½è‰²çš„iphone 12 64Gå°±æ˜¯ä¸€ä¸ªå…·ä½“çš„sku</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public interface Share &#123;</span><br><span class="line">    //è·å–åˆ†äº«ç±»å‹</span><br><span class="line"></span><br><span class="line">    String getShareFunctionType();</span><br><span class="line"></span><br><span class="line">    String mainProcess(String shareName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ­¥æˆ‘ä»¬åº”è¯¥éƒ½æ˜¯å®šä¹‰ä¸€ä¸ªåˆ›å»ºåˆ†äº«æ¨¡æ¿</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class ShareFactory &#123;</span><br><span class="line">    private List&lt;Share&gt; shareFunctionList;</span><br><span class="line"></span><br><span class="line">    //æ ¹æ®åˆ†äº«ç±»å‹è·å–å¯¹åº”çš„åˆ†äº«å¤„ç†æ–¹å¼</span><br><span class="line">    public Share getShareFunction(String type) &#123;</span><br><span class="line">        for(Share shareFunction : shareFunctionList) &#123;</span><br><span class="line">            if (shareFunction.getShareFunctionType().equals(type)) &#123;</span><br><span class="line">                return shareFunction;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public enum EnumShareType &#123;</span><br><span class="line">        SUCCESS_ORDER(&quot;successOrder&quot;);</span><br><span class="line">        private String name;</span><br><span class="line"></span><br><span class="line">        EnumShareType(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setName(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªåˆ†äº«å·¥å‚æ ¹æ®æˆ‘ä»¬çš„ç±»å‹è·å–æˆ‘ä»¬é¢„å…ˆåŠ è½½åœ¨Springå®¹å™¨ä¸­çš„beanå®ä¾‹<br>public class SuccessOrderShare implements Share {<br>    public String getShareFunctionType() {<br>        return ShareFactory.EnumShareType.SUCCESS_ORDER.getName();<br>    }</p>
<pre><code>public String mainProcess(String shareName) &#123;
    return shareNmae;
&#125;
</code></pre>
<p>}<br><a href="https://imgse.com/i/pSCBWPf"><img src="https://s1.ax1x.com/2023/01/01/pSCBWPf.jpg" alt="pSCBWPf.jpg"></a></p>
<p>æœ€åå°±æ˜¯å®šä¹‰æˆ‘ä»¬ä¸åŒçš„ç±»å‹æ¥å®ç°åˆ†äº«å›¾ç‰‡ã€‚<br>å…¶å®æˆ‘ä»¬å­¦ä¹ è®¾è®¡æ¨¡å¼å°±æ˜¯è¿™ç§æ€æƒ³ï¼Œæœ‰äº†è¿™ç§æ€æƒ³ä¸Šé¢æåˆ°çš„ä¸‰ç‚¹åˆæ˜¯æ‰èƒ½ä½“ç°å‡ºæ¥å¯¹æˆ‘ä»¬ä»Šåçš„æˆé•¿ï¼Œé¢å¯¹å¤æ‚ä¸šåŠ¡è®¾è®¡ä»¥åŠæ€è€ƒèƒ½åŠ›æ‰èƒ½æå‡ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ—¶å€™æ”¹ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œè€Œéç®€å•å·¥å‚æ¨¡å¼å‘¢ï¼Ÿ<br>è¿™é‡Œå¼•ç”¨è®¾è®¡æ¨¡å¼ä¹‹ç¾é‡Œé¢çš„ä¸€å¥è¯ï¼šå½“å¯¹è±¡çš„åˆ›å»ºé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œä¸åªæ˜¯ç®€å•çš„newä¸€ä¸‹å°±å¯ä»¥ï¼Œè€Œæ˜¯è¦ç»„åˆå…¶ä»–ç±»å¯¹è±¡ï¼Œåšå„ç§åˆå§‹åŒ–æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œå°†å¤æ‚çš„åˆ›å»ºé€»è¾‘æ‹†åˆ†åˆ°å¤šä¸ªå·¥å‚ç±»ä¸­ï¼Œè®©æ¯ä¸ªå·¥å‚ç±»éƒ½ä¸è‡³äºè¿‡äºå¤æ‚ã€‚<br>è€Œä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ï¼Œå°†æ‰€æœ‰çš„åˆ›å»ºé€»è¾‘éƒ½æ”¾åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œä¼šå¯¼è‡´è¿™ä¸ªå·¥å‚ç±»å˜å¾—å¾ˆå¤æ‚ã€‚</p>
<h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><p>çœ‹å®Œå·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œåœ¨ç†è§£æŠ½è±¡å·¥å‚æ¨¡å¼å°±æ›´åŠ ç®€å•ï¼Œå› ä¸ºå®ƒå…¶å®å°±æ˜¯å·¥å‚æ–¹æ³•çš„ä¸€ä¸ªå»¶ä¼¸ã€‚<br>å·¥å‚æ–¹æ³•ç±»ä¸­åªæœ‰ä¸€ä¸ªå”±å“æ–¹æ³•ï¼Œè¦æƒ³å®ç°å¤šç§ä¸åŒçš„ç±»å¯¹è±¡ï¼Œåªèƒ½å»åˆ›å»ºä¸åŒçš„å…·ä½“å·¥å‚æ–¹æ³•çš„å­ç±»æ¥å®ä¾‹åŒ–ï¼Œè€ŒæŠ½è±¡å·¥å‚åˆ™æ˜¯è®©ä¸€ä¸ªå·¥å‚è´Ÿè´£åˆ›å»ºå¤šä¸ªä¸åŒç±»å‹çš„å¯¹è±¡ã€‚<br><a href="https://imgse.com/i/pSCDpL9"><img src="https://s1.ax1x.com/2023/01/01/pSCDpL9.jpg" alt="pSCDpL9.jpg"></a><br>æ ·å­å¯èƒ½æœ‰ç‚¹ä¸‘ï¼Œä½†æ˜¯èƒ½è¯´æ˜é—®é¢˜ï¼Œå…¶å®çœ‹ä¸Šå»å¯ä»¥åˆ†ä¸ºä»¥ä¸Šå‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š<br>æŠ½è±¡å·¥å‚ç±»<br>å…·ä½“å·¥å‚ç±»<br>æŠ½è±¡ç±»<br>æŠ½è±¡å·¥å‚ç±»æˆ‘ä¸ªäººå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåˆšå‡ºå‚çš„æ‰‹æœºï¼Œå…·ä½“æŠ½è±¡å·¥å‚åˆ™æ˜¯è®¤ä¸ºæ˜¯æˆ‘ä»¬æ¯ä¸ªäººå¯¹è¿™ä¸ªæ‰‹æœºå£çº¸è‡ªå®šä¹‰è®¾ç½®ï¼Œæœ€åæŠ½è±¡ç±»æˆ‘ç†è§£å°±æ˜¯æ‰‹æœºå£çº¸ã€‚<br>æˆ‘ä»¬æ¯ä¸ªäººå¯ä»¥è‡ªå®šä¹‰ä¸åŒçš„å£çº¸ï¼šä¾‹å¦‚åŠ¨å›¾ï¼Œé™å›¾é£æ™¯ç­‰ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•è§£å†³hexoé¦–é¡µæ˜¾ç¤ºåšå®¢çš„å…¨éƒ¨æ–‡ç« </title>
    <url>/2022/09/25/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3hexo%E9%A6%96%E9%A1%B5%E6%98%BE%E7%A4%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E5%85%A8%E9%83%A8%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<p>åœ¨ç¬¬ä¸€æ¬¡ä¹¦å†™åšå®¢åï¼Œåº”è¯¥ä¼šå‘ç°è‡ªå·±æ•´ç¯‡åšå®¢çš„æ–‡ç« éƒ½åœ¨è¿™ä¸ªé¦–é¡µä¸­æ˜¾ç¤ºï¼Œå¯èƒ½ä¸€ä¸ªä¸¤ä¸ªè¿˜å¥½ï¼Œä½†æ˜¯è¶Šå¾€åï¼Œè‡ªå·±å†™çš„åšå®¢è¶Šå¤šï¼Œå…¨éƒ½æ”¾åœ¨é¦–é¡µå †ç§¯ï¼Œå°±ä¼šæ˜¾å¾—ååˆ†è‡ƒè‚¿</p>
<span id="more"></span>

<h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3><p><code>é¦–é¡µåœ¨ä¸»é¢˜çš„_config.ymlä¸­æŠŠè®¾ç½®æ‰“å¼€ï¼šï¼ˆå®‰è£…æ—¶é»˜è®¤å°±æ‰“å¼€äº†ï¼‰ excerpt_description: true</code></p>
<h3 id="æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°"><a href="#æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°"></a>æ–¹æ³•ä¸€ï¼šå†™æ¦‚è¿°</h3><p>åœ¨æ–‡ç« çš„front-matterä¸­ï¼ˆå³newä¸€ä¸ªåšå®¢æ—¶ç”Ÿæˆçš„å†…å®¹é‡Œï¼‰æ·»åŠ descriptionï¼Œå…¶ä¸­descriptionä¸­çš„å†…å®¹å°±ä¼šè¢«æ˜¾ç¤ºåˆ°é¦–é¡µä¸Šï¼Œå…¶ä½™ä¸€å¾‹ä¸æ˜¾ç¤ºã€‚<br><code>title: è®©é¦–é¡µæ˜¾ç¤ºéƒ¨åˆ†å†…å®¹ date: 2020-02-23 22:55:10 description: è¿™æ˜¯æ˜¾ç¤ºåœ¨é¦–é¡µçš„æ¦‚è¿°ï¼Œæ­£æ–‡å†…å®¹å‡ä¼šè¢«éšè—ã€‚</code><br>æ¯”è¾ƒä¸æ–¹ä¾¿çš„æ˜¯è¿˜éœ€è¦å†™ä¸€ä¸ªæ¦‚è¿°ï¼Œå¾ˆå¤šæ—¶å€™æ‡’å¾—å†™æ¦‚è¿°ï¼Œäºæ˜¯å°±éœ€è¦ç¬¬äºŒç§æ–¹æ³•äº†ã€‚</p>
<h3 id="æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­"><a href="#æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­" class="headerlink" title="æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­"></a>æ–¹æ³•äºŒï¼šæ–‡ç« æˆªæ–­</h3><p>åœ¨éœ€è¦æˆªæ–­çš„åœ°æ–¹åŠ å…¥ï¼š<br><code>&lt;!--more--&gt;</code><br>é¦–é¡µå°±ä¼šæ˜¾ç¤ºè¿™æ¡ä»¥ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œéšè—æ¥ä¸‹æ¥çš„å†…å®¹ã€‚æ¯”å¦‚æœ¬æ–‡å°±æ˜¯ä½¿ç”¨äº†è¿™ç§æ–¹æ³•<br>è¿™ä¸ªæ˜æ˜¾å°±æ–¹ä¾¿è®¸å¤šï¼Œå½“ç„¶æœ‰åˆ©æœ‰å¼Šï¼Œæ¯”å¦‚å¼€å¤´éƒ½æ˜¯åºŸè¯çš„é¦–é¡µå¼€ç€å°±ä¸æ˜¯å¾ˆçˆ½ï¼Œå› æ­¤æˆ‘ä¸€èˆ¬ä¼šå…ˆé€‰æ‹©æ–¹æ³•äºŒï¼Œå¦‚æœæ„Ÿè§‰æ–‡ç« å‰é¢å†™çš„ä¸å¥½å°±ç”¨æ–¹æ³•ä¸€ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>Rustä¸­çš„ Send å’Œ Sync trait è¯¦è§£</title>
    <url>/2025/11/26/Rust%E4%B8%AD%E7%9A%84-Send-%E5%92%8C-Sync-trait-%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<p>Rustä¸­çš„æ ‡è®° traitï¼ˆMarker Traitï¼‰<code>Send</code> å’Œ <code>Sync</code> æ˜¯å¹¶å‘å®‰å…¨çš„æ ¸å¿ƒåŸºçŸ³ã€‚ç”¨äºæ ‡è®°ç±»å‹çš„å¹¶å‘å®‰å…¨å±æ€§ï¼Œè®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥çº¿ç¨‹é—´æ•°æ®ä¼ é€’çš„åˆæ³•æ€§ï¼Œä»æ ¹æºä¸Šé¿å…æ•°æ®ç«äº‰ï¼ˆData Raceï¼‰ã€‚</p>
<h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><ul>
<li>**<code>Send</code>**ï¼šç±»å‹çš„å€¼èƒ½ä¸èƒ½åœ¨çº¿ç¨‹ä¹‹é—´â€ç§»åŠ¨æ‰€æœ‰æƒâ€ã€‚</li>
<li>**<code>Sync</code>**ï¼šç±»å‹çš„å€¼èƒ½ä¸èƒ½åœ¨å¤šä¸ªçº¿ç¨‹ä¸­â€å…±äº«å¼•ç”¨ &amp;Tâ€ã€‚</li>
</ul>
<h3 id="é‡è¦åŸåˆ™"><a href="#é‡è¦åŸåˆ™" class="headerlink" title="é‡è¦åŸåˆ™"></a>é‡è¦åŸåˆ™</h3><ul>
<li>å¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œ<strong>å¹¶å‘è®¿é—®ï¼ˆåªè¯»ï¼‰</strong>æ˜¯å†…å­˜å®‰å…¨çš„ã€‚</li>
<li><strong>å¹¶å‘ä¿®æ”¹</strong>ä»ç„¶è¦é é”&#x2F;åŸå­&#x2F;å…¶ä»–æœºåˆ¶ã€‚</li>
</ul>
<h2 id="1-Send-æ‰€æœ‰æƒåœ¨çº¿ç¨‹é—´çš„è½¬ç§»"><a href="#1-Send-æ‰€æœ‰æƒåœ¨çº¿ç¨‹é—´çš„è½¬ç§»" class="headerlink" title="1. Send - æ‰€æœ‰æƒåœ¨çº¿ç¨‹é—´çš„è½¬ç§»"></a>1. Send - æ‰€æœ‰æƒåœ¨çº¿ç¨‹é—´çš„è½¬ç§»</h2><p>ä¸€ä¸ªç±»å‹ <code>T</code> æ˜¯ <code>Send</code>ï¼Œè¡¨ç¤ºæŠŠ <code>T</code> çš„ä¸€ä¸ªå€¼ä»ä¸€ä¸ªçº¿ç¨‹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸ä¼šå¼•å‘æ•°æ®ç«äº‰æˆ–å†…å­˜å®‰å…¨é—®é¢˜ã€‚</p>
<h3 id="Send-çš„ç‰¹ç‚¹"><a href="#Send-çš„ç‰¹ç‚¹" class="headerlink" title="Send çš„ç‰¹ç‚¹"></a>Send çš„ç‰¹ç‚¹</h3><ul>
<li>ç§»åŠ¨çš„æ˜¯<strong>æ‰€æœ‰æƒ</strong>ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚</li>
<li>ç§»åŠ¨ä¹‹åï¼ŒåŸçº¿ç¨‹ä¸èƒ½å†ç”¨è¿™ä¸ªå€¼ï¼ˆæ‰€æœ‰æƒå·²ç»è¢« moveï¼‰ã€‚</li>
</ul>
<h3 id="ä¸æ˜¯-Send-çš„ç±»å‹ï¼ˆ-Sendï¼‰"><a href="#ä¸æ˜¯-Send-çš„ç±»å‹ï¼ˆ-Sendï¼‰" class="headerlink" title="ä¸æ˜¯ Send çš„ç±»å‹ï¼ˆ!Sendï¼‰"></a>ä¸æ˜¯ Send çš„ç±»å‹ï¼ˆ<code>!Send</code>ï¼‰</h3><p>ç»å¤§å¤šæ•°ç±»å‹è‡ªåŠ¨å®ç° <code>Send</code>ï¼Œä»¥ä¸‹ä¸€äº›ä¾‹å¤–ï¼š</p>
<ul>
<li>**<code>Rc&lt;T&gt;</code>**ï¼šå¼•ç”¨è®¡æ•°æ˜¯éåŸå­æ“ä½œï¼Œè·¨çº¿ç¨‹è½¬ç§»ä¼šå¯¼è‡´è®¡æ•°ç«äº‰ï¼ˆæ•°æ®ç«äº‰ï¼‰ã€‚</li>
<li>**<code>RefCell&lt;T&gt;</code> &#x2F; <code>Cell&lt;T&gt;</code>**ï¼šå†…éƒ¨å¯å˜æ€§æ— åŒæ­¥æœºåˆ¶ï¼Œè·¨çº¿ç¨‹è½¬ç§»åï¼Œå¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶ä¿®æ”¹æ•°æ®ã€‚</li>
<li>**è£¸æŒ‡é’ˆ <code>*const T</code> &#x2F; <code>*mut T</code>**ï¼šæ— å®‰å…¨ä¿è¯ï¼Œç›´æ¥è·¨çº¿ç¨‹è½¬ç§»å¯èƒ½å¯¼è‡´æ‚¬å‚æŒ‡é’ˆæˆ–æ•°æ®ç«äº‰ã€‚</li>
<li>**<code>UnsafeCell&lt;T&gt;</code>**ï¼šå†…éƒ¨å¯å˜æ€§çš„åº•å±‚å®ç°ï¼Œæœ¬èº« <code>!Send</code>ï¼ˆä½†åŸºäºå®ƒçš„çº¿ç¨‹å®‰å…¨ç±»å‹å¦‚ <code>Mutex</code> ä¼šæ‰‹åŠ¨å®ç° <code>Send</code>ï¼‰ã€‚</li>
</ul>
<h3 id="Send-ç¤ºä¾‹"><a href="#Send-ç¤ºä¾‹" class="headerlink" title="Send ç¤ºä¾‹"></a>Send ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">v</span> = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="comment">// Vec&lt;i32&gt; æ˜¯ Sendï¼Œé€šè¿‡moveæŠŠæ‰€æœ‰æƒç§»åˆ°çº¿ç¨‹ä¸­</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">handle</span> = thread::<span class="title function_ invoke__">spawn</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, v);</span><br><span class="line">    &#125;);</span><br><span class="line">    handle.<span class="title function_ invoke__">join</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-Sync-å¼•ç”¨åœ¨çº¿ç¨‹é—´çš„å…±äº«"><a href="#2-Sync-å¼•ç”¨åœ¨çº¿ç¨‹é—´çš„å…±äº«" class="headerlink" title="2. Sync - å¼•ç”¨åœ¨çº¿ç¨‹é—´çš„å…±äº«"></a>2. Sync - å¼•ç”¨åœ¨çº¿ç¨‹é—´çš„å…±äº«</h2><p>ä¸€ä¸ªç±»å‹ <code>T</code> æ˜¯ <code>Sync</code>ï¼Œè¡¨ç¤ºå¯ä»¥å®‰å…¨åœ°è¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼ˆå³ <code>&amp;T</code> æ˜¯ <code>Send</code>ï¼‰ã€‚å³ï¼Œå¦‚æœä¸€ä¸ªç±»å‹çš„å¼•ç”¨ <code>&amp;T</code> èƒ½å®‰å…¨è·¨çº¿ç¨‹ä¼ é€’ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹å°±æ˜¯ <code>Sync</code>ï¼ˆå¤šä¸ªçº¿ç¨‹æŒæœ‰ <code>&amp;T</code> ä¸ä¼šå¯¼è‡´æ•°æ®ç«äº‰ï¼‰ã€‚</p>
<h3 id="ä¸æ˜¯-Sync-çš„ç±»å‹ï¼ˆ-Syncï¼‰"><a href="#ä¸æ˜¯-Sync-çš„ç±»å‹ï¼ˆ-Syncï¼‰" class="headerlink" title="ä¸æ˜¯ Sync çš„ç±»å‹ï¼ˆ!Syncï¼‰"></a>ä¸æ˜¯ Sync çš„ç±»å‹ï¼ˆ<code>!Sync</code>ï¼‰</h3><p>ä»»ä½•å…è®¸é€šè¿‡å…±äº«å¼•ç”¨ <code>&amp;T</code> è·å¾—å¯å˜è®¿é—®ä¸”æ²¡æœ‰åŒæ­¥ä¿æŠ¤çš„ç±»å‹ï¼Œéƒ½ä¸æ˜¯ <code>Sync</code>ï¼š</p>
<ul>
<li>**<code>Cell&lt;T&gt;</code> &#x2F; <code>RefCell&lt;T&gt;</code>**ï¼šå…è®¸é€šè¿‡ <code>&amp;T</code> æ”¹å˜å†…éƒ¨æ•°æ®ï¼ˆâ€å†…éƒ¨å¯å˜æ€§â€ï¼‰ï¼Œä½†ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li>
<li>**<code>Rc&lt;T&gt;</code>**ï¼šé€šè¿‡å…±äº«å¼•ç”¨å¯ä»¥å…‹éš† <code>Rc</code> å¾—åˆ°æ›´å¤šå¼•ç”¨ï¼Œä»è€Œåœ¨å¤šçº¿ç¨‹ä¸‹å¯¼è‡´ç«äº‰ã€‚</li>
<li><strong>éçº¿ç¨‹å®‰å…¨çš„ FFI å¯¹è±¡</strong>ï¼Œå¦‚æœé€šè¿‡ <code>&amp;</code> èƒ½è°ƒç”¨ä¼šä¿®æ”¹å†…éƒ¨çŠ¶æ€çš„æ–¹æ³•ã€‚</li>
</ul>
<h3 id="Sync-ç¤ºä¾‹"><a href="#Sync-ç¤ºä¾‹" class="headerlink" title="Sync ç¤ºä¾‹"></a>Sync ç¤ºä¾‹</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::sync::&#123;Arc, Mutex&#125;;</span><br><span class="line"><span class="keyword">use</span> std::thread;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">data</span> = Arc::<span class="title function_ invoke__">new</span>(Mutex::<span class="title function_ invoke__">new</span>(<span class="number">5</span>)); <span class="comment">// Arc&lt;Mutex&lt;i32&gt;&gt;</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">data_clone</span> = data.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"></span><br><span class="line">    thread::<span class="title function_ invoke__">spawn</span>(<span class="keyword">move</span> || &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">guard</span> = data_clone.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>(); <span class="comment">// åŠ é”ï¼Œç‹¬å è®¿é—®</span></span><br><span class="line">        *guard += <span class="number">1</span>;</span><br><span class="line">    &#125;).<span class="title function_ invoke__">join</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, data.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>()); <span class="comment">// è¾“å‡º 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-Auto-Trait-è‡ªåŠ¨æ¨å¯¼"><a href="#3-Auto-Trait-è‡ªåŠ¨æ¨å¯¼" class="headerlink" title="3. Auto Trait - è‡ªåŠ¨æ¨å¯¼"></a>3. Auto Trait - è‡ªåŠ¨æ¨å¯¼</h2><p><code>Send</code> å’Œ <code>Sync</code> éƒ½æ˜¯ auto traitï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»å‹çš„ç»„æˆéƒ¨åˆ†è‡ªåŠ¨æ¨å¯¼å®ç°ã€‚</p>
<h3 id="Send-å’Œ-Sync-çš„å››ç§ç»„åˆ"><a href="#Send-å’Œ-Sync-çš„å››ç§ç»„åˆ" class="headerlink" title="Send å’Œ Sync çš„å››ç§ç»„åˆ"></a>Send å’Œ Sync çš„å››ç§ç»„åˆ</h3><table>
<thead>
<tr>
<th>ç»„åˆ</th>
<th>è¯´æ˜</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td><code>Send + Sync</code></td>
<td>å¯ä»¥åœ¨çº¿ç¨‹é—´ç§»åŠ¨ï¼Œä¹Ÿå¯ä»¥å¤šçº¿ç¨‹å…±äº«å¼•ç”¨</td>
<td><code>i32</code>ã€<code>Mutex&lt;T&gt;</code>ç­‰</td>
</tr>
<tr>
<td><code>Send + !Sync</code></td>
<td>å¯ä»¥åœ¨çº¿ç¨‹é—´ç§»åŠ¨ï¼Œä½†ä¸èƒ½å¤šçº¿ç¨‹å…±äº«å¼•ç”¨</td>
<td>ä¸€äº› <code>*mut T</code> å°è£…ã€<code>Sender&lt;T&gt;</code></td>
</tr>
<tr>
<td><code>!Send + Sync</code></td>
<td>ä¸èƒ½è·¨çº¿ç¨‹ç§»åŠ¨ï¼›ä¸ç§»åŠ¨ï¼Œåªè¯»å…±äº«æ˜¯å®‰å…¨çš„</td>
<td>å°‘æ•°ç‰¹æ®Š FFI å¯¹è±¡ï¼ˆè¾ƒå°‘è§ï¼‰</td>
</tr>
<tr>
<td><code>!Send + !Sync</code></td>
<td>æ—¢ä¸èƒ½è·¨çº¿ç¨‹ç§»åŠ¨ï¼Œä¹Ÿä¸èƒ½å¤šçº¿ç¨‹å…±äº«å¼•ç”¨</td>
<td><code>Rc&lt;RefCell&lt;T&gt;&gt;</code> ç­‰</td>
</tr>
</tbody></table>
<h2 id="4-æ‰‹åŠ¨å®ç°-Send-å’Œ-Sync"><a href="#4-æ‰‹åŠ¨å®ç°-Send-å’Œ-Sync" class="headerlink" title="4. æ‰‹åŠ¨å®ç° Send å’Œ Sync"></a>4. æ‰‹åŠ¨å®ç° Send å’Œ Sync</h2><p>åªæœ‰åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼ˆå†™åº•å±‚åº“ &#x2F; FFI å°è£… &#x2F; è‡ªå·±çš„é”å’ŒåŸå­æ•°æ®ç»“æ„æ—¶ï¼‰æ‰ä¼šéœ€è¦æ‰‹åŠ¨å®ç° <code>Send</code> å’Œ <code>Sync</code>ï¼š</p>
<ul>
<li><code>unsafe impl Send</code> &#x2F; <code>unsafe impl Sync</code> æ˜¯éå¸¸ä¸¥è‚ƒçš„æ‰¿è¯º</li>
<li>è¦è‡ªå·±ä¿è¯æ‰€æœ‰å¯èƒ½çš„å¹¶å‘è®¿é—®è·¯å¾„éƒ½ä¸ä¼šäº§ç”Ÿæ•°æ®ç«äº‰ã€æ‚¬å‚æŒ‡é’ˆç­‰ã€‚</li>
</ul>
<h3 id="æ‰‹åŠ¨å®ç°ç¤ºä¾‹ï¼šç”¨-Mutex-ä¿æŠ¤è£¸æŒ‡é’ˆ"><a href="#æ‰‹åŠ¨å®ç°ç¤ºä¾‹ï¼šç”¨-Mutex-ä¿æŠ¤è£¸æŒ‡é’ˆ" class="headerlink" title="æ‰‹åŠ¨å®ç°ç¤ºä¾‹ï¼šç”¨ Mutex ä¿æŠ¤è£¸æŒ‡é’ˆ"></a>æ‰‹åŠ¨å®ç°ç¤ºä¾‹ï¼šç”¨ Mutex ä¿æŠ¤è£¸æŒ‡é’ˆ</h3><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::sync::Mutex;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ç±»å‹ï¼šç”¨ Mutex ä¿æŠ¤è£¸æŒ‡é’ˆï¼ˆè£¸æŒ‡é’ˆæœ¬èº« !Send/!Syncï¼‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SafePtr</span>&lt;T&gt;(Mutex&lt;*<span class="keyword">mut</span> T&gt;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;T&gt; SafePtr&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(value: T) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">ptr</span> = <span class="type">Box</span>::<span class="title function_ invoke__">into_raw</span>(<span class="type">Box</span>::<span class="title function_ invoke__">new</span>(value)); <span class="comment">// è£¸æŒ‡é’ˆæŒ‡å‘å †å†…å­˜</span></span><br><span class="line">        <span class="title function_ invoke__">SafePtr</span>(Mutex::<span class="title function_ invoke__">new</span>(ptr))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®‰å…¨è®¿é—®ï¼šé€šè¿‡ Mutex åŠ é”ï¼Œä¿è¯ç‹¬å è®¿é—®</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">get</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;&amp;T&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">guard</span> = <span class="keyword">self</span>.<span class="number">0</span>.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">        <span class="keyword">unsafe</span> &#123; <span class="title function_ invoke__">Some</span>(&amp;**guard) &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">set</span>(&amp;<span class="keyword">self</span>, new_value: T) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">guard</span> = <span class="keyword">self</span>.<span class="number">0</span>.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">        <span class="keyword">unsafe</span> &#123;</span><br><span class="line">            std::ptr::<span class="title function_ invoke__">drop_in_place</span>(*guard);</span><br><span class="line">            *guard = <span class="type">Box</span>::<span class="title function_ invoke__">into_raw</span>(<span class="type">Box</span>::<span class="title function_ invoke__">new</span>(new_value));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰‹åŠ¨å®ç° Send å’Œ Syncï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡ Mutex ç¡®ä¿äº†çº¿ç¨‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">unsafe</span> <span class="keyword">impl</span>&lt;T: <span class="built_in">Send</span>&gt; <span class="built_in">Send</span> <span class="keyword">for</span> <span class="title class_">SafePtr</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">unsafe</span> <span class="keyword">impl</span>&lt;T: <span class="built_in">Send</span>&gt; <span class="built_in">Sync</span> <span class="keyword">for</span> <span class="title class_">SafePtr</span>&lt;T&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li><strong><code>Send</code></strong> ä¿è¯æ‰€æœ‰æƒå¯ä»¥å®‰å…¨åœ°åœ¨çº¿ç¨‹é—´è½¬ç§»</li>
<li><strong><code>Sync</code></strong> ä¿è¯å¼•ç”¨å¯ä»¥å®‰å…¨åœ°åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«</li>
<li>å¤§å¤šæ•°ç±»å‹ä¼šè‡ªåŠ¨å®ç°è¿™äº› trait</li>
<li>åªæœ‰åœ¨å¤„ç†ç‰¹æ®Šæƒ…å†µï¼ˆè£¸æŒ‡é’ˆã€FFIã€è‡ªå®šä¹‰åŒæ­¥åŸè¯­ï¼‰æ—¶æ‰éœ€è¦æ‰‹åŠ¨å®ç°</li>
<li>æ‰‹åŠ¨å®ç° <code>unsafe impl Send/Sync</code> æ—¶è¦ç‰¹åˆ«è°¨æ…ï¼Œç¡®ä¿ç¡®å®æ»¡è¶³å¹¶å‘å®‰å…¨æ¡ä»¶</li>
</ul>
]]></content>
      <tags>
        <tag>Rust</tag>
      </tags>
  </entry>
  <entry>
    <title>Rustæ™ºèƒ½æŒ‡é’ˆ</title>
    <url>/2025/11/26/Rust%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<p>Rustçš„æ™ºèƒ½æŒ‡é’ˆï¼šå†…å­˜ç®¡ç†çš„åˆ©å™¨</p>
<p>Rustä»¥å…¶å†…å­˜å®‰å…¨å’Œæ— åƒåœ¾å›æ”¶çš„è®¾è®¡è€Œé—»åï¼Œè€Œæ™ºèƒ½æŒ‡é’ˆåˆ™æ˜¯Rustå†…å­˜ç®¡ç†çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡æ™ºèƒ½æŒ‡é’ˆï¼ŒRustèƒ½åœ¨ä¿è¯å†…å­˜å®‰å…¨çš„åŒæ—¶ï¼Œæä¾›çµæ´»ä¸”é«˜æ•ˆçš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»Rustä¸­çš„å‡ ç§å¸¸è§æ™ºèƒ½æŒ‡é’ˆï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£Rustå¦‚ä½•ç®¡ç†å†…å­˜ä»¥åŠæ™ºèƒ½æŒ‡é’ˆå¦‚ä½•æå‡ä»£ç çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿ</h2><p>æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ä¸ªåŒ…è£…ç±»å‹ï¼Œå®ƒæ¨¡æ‹Ÿäº†ä¼ ç»ŸæŒ‡é’ˆçš„è¡Œä¸ºï¼Œå¹¶ä¸”æä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯ä¸å†…å­˜ç®¡ç†ç›¸å…³çš„åŠŸèƒ½ã€‚åœ¨Rustä¸­ï¼Œæ™ºèƒ½æŒ‡é’ˆé€šå¸¸å®ç°äº†Drop traitï¼Œè¿™æ„å‘³ç€å®ƒä»¬èƒ½å¤Ÿåœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨æ¸…ç†èµ„æºã€‚</p>
<p>Rustä¸­çš„æ™ºèƒ½æŒ‡é’ˆå¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><strong>Box<T></T></strong></li>
<li><strong>Rc<T></T></strong> å’Œ <strong>Arc<T></T></strong></li>
<li><strong>RefCell<T></T></strong> å’Œ <strong>Mutex<T></T></strong></li>
</ul>
<ol>
<li>Box<T> â€” åœ¨å †ä¸Šåˆ†é…å†…å­˜</T></li>
</ol>
<p>Box<T>æ˜¯Rustæœ€åŸºæœ¬çš„æ™ºèƒ½æŒ‡é’ˆä¹‹ä¸€ï¼Œå®ƒç”¨äºåœ¨å †ä¸Šåˆ†é…å†…å­˜å¹¶å­˜å‚¨æ•°æ®ã€‚Boxé€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿç®¡ç†å †ä¸Šçš„æ•°æ®ï¼Œç¡®ä¿åœ¨Boxç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨æ¸…ç†å†…å­˜ã€‚</T></p>
<p><strong>ç¤ºä¾‹</strong></p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(<span class="number">5</span>); <span class="comment">// åœ¨å †ä¸Šåˆ†é…æ•´æ•° 5</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;b = &#123;&#125;&quot;</span>, b);</span><br><span class="line">&#125; <span class="comment">// å½“ b ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå †ä¸Šçš„å†…å­˜ä¼šè‡ªåŠ¨è¢«é‡Šæ”¾</span></span><br></pre></td></tr></table></figure>


<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒBox::new(5)ä¼šåœ¨å †ä¸Šä¸ºæ•´æ•°5åˆ†é…å†…å­˜ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å†…å­˜çš„Boxã€‚å½“bç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼ŒBoxä¼šè‡ªåŠ¨é‡Šæ”¾å †ä¸Šçš„å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p>ä½¿ç”¨åœºæ™¯</p>
<ul>
<li>å½“ä½ æƒ³è¦åœ¨å †ä¸Šå­˜å‚¨å¤§å¯¹è±¡ï¼ˆä¾‹å¦‚å¤§å‹æ•°ç»„æˆ–ç»“æ„ä½“ï¼‰æ—¶ï¼Œ<code>Box&lt;T&gt;</code> æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li>
<li>å½“ä½ éœ€è¦æ‹¥æœ‰æ•°æ®çš„å”¯ä¸€æ‰€æœ‰æƒæ—¶ï¼ŒBox æ˜¯ä¸€ä¸ªç®€æ´çš„è§£å†³æ–¹æ¡ˆã€‚</li>
</ul>
<h3 id="2-Rc-lt-T-gt-å’Œ-Arc-lt-T-gt-â€”-å¼•ç”¨è®¡æ•°"><a href="#2-Rc-lt-T-gt-å’Œ-Arc-lt-T-gt-â€”-å¼•ç”¨è®¡æ•°" class="headerlink" title="2. Rc&lt;T&gt; å’Œ Arc&lt;T&gt; â€” å¼•ç”¨è®¡æ•°"></a>2. Rc&lt;T&gt; å’Œ Arc&lt;T&gt; â€” å¼•ç”¨è®¡æ•°</h3><p>Rc<T>ï¼ˆReference Countedï¼‰å’ŒArc<T>ï¼ˆAtomic Reference Countedï¼‰éƒ½å®ç°äº†å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆï¼Œç”¨äºå…±äº«å†…å­˜ã€‚ä¸Box<T>ä¸åŒï¼ŒRc<T>å’ŒArc<T>å…è®¸å¤šä¸ªæ‰€æœ‰è€…å…±äº«å¯¹æ•°æ®çš„å¼•ç”¨ã€‚</T></T></T></T></T></p>
<ul>
<li><code>Rc&lt;T&gt;</code>ï¼šåœ¨å•çº¿ç¨‹ä¸­ä½¿ç”¨ï¼Œæ€§èƒ½è¾ƒé«˜ã€‚</li>
<li><code>Arc&lt;T&gt;</code>ï¼šçº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒã€‚</li>
</ul>
<h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨Rc-lt-T-gt"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨Rc-lt-T-gt" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨Rc&lt;T&gt;"></a>ç¤ºä¾‹ï¼šä½¿ç”¨Rc&lt;T&gt;</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::rc::Rc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = Rc::<span class="title function_ invoke__">new</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello, world!&quot;</span>));</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s2</span> = Rc::<span class="title function_ invoke__">clone</span>(&amp;s); <span class="comment">// å…‹éš† Rcï¼Œå¢åŠ å¼•ç”¨è®¡æ•°</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;s = &#123;&#125;, s2 = &#123;&#125;&quot;</span>, s, s2);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Reference count: &#123;&#125;&quot;</span>, Rc::<span class="title function_ invoke__">strong_count</span>(&amp;s)); <span class="comment">// æ‰“å°å¼•ç”¨è®¡æ•°</span></span><br><span class="line">&#125; <span class="comment">// å½“æ‰€æœ‰ Rc æŒ‡é’ˆç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå†…å­˜ä¼šè¢«é‡Šæ”¾</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åœºæ™¯</p>
<ul>
<li><code>Rc&lt;T&gt;</code> é€‚åˆç”¨äºéœ€è¦å¤šä¸ªæ‰€æœ‰è€…å…±äº«æ•°æ®çš„åœºæ™¯ï¼Œä¸”åªåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</li>
<li><code>Arc&lt;T&gt;</code> é€‚ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹å…±äº«æ•°æ®ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</li>
</ul>
<h3 id="3-RefCell-lt-T-gt-å’Œ-Mutex-lt-T-gt-â€”-å¯å˜æ€§ä¸å†…éƒ¨å¯å˜æ€§"><a href="#3-RefCell-lt-T-gt-å’Œ-Mutex-lt-T-gt-â€”-å¯å˜æ€§ä¸å†…éƒ¨å¯å˜æ€§" class="headerlink" title="3. RefCell&lt;T&gt; å’Œ Mutex&lt;T&gt; â€” å¯å˜æ€§ä¸å†…éƒ¨å¯å˜æ€§"></a>3. RefCell&lt;T&gt; å’Œ Mutex&lt;T&gt; â€” å¯å˜æ€§ä¸å†…éƒ¨å¯å˜æ€§</h3><p>è™½ç„¶Rustçš„æ‰€æœ‰æƒå’Œå€Ÿç”¨ç³»ç»Ÿé€šå¸¸ä¸å…è®¸åŒæ—¶å­˜åœ¨å¤šä¸ªå¯å˜å¼•ç”¨ï¼Œä½†é€šè¿‡æ™ºèƒ½æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥ç»•è¿‡è¿™ä¸€é™åˆ¶ï¼Œæä¾›å†…éƒ¨å¯å˜æ€§ã€‚</p>
<ul>
<li><code>RefCell&lt;T&gt;</code>ï¼šå…è®¸åœ¨å•çº¿ç¨‹ä¸­è¿›è¡Œå¯å˜å€Ÿç”¨ï¼Œæä¾›è¿è¡Œæ—¶çš„å€Ÿç”¨æ£€æŸ¥ã€‚</li>
<li><code>Mutex&lt;T&gt;</code>ï¼šæä¾›å¤šçº¿ç¨‹ä¸­çš„å†…éƒ¨å¯å˜æ€§ï¼Œç¡®ä¿æ•°æ®åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å®‰å…¨å…±äº«ã€‚</li>
</ul>
<h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨RefCell-lt-T-gt"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨RefCell-lt-T-gt" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨RefCell&lt;T&gt;"></a>ç¤ºä¾‹ï¼šä½¿ç”¨RefCell&lt;T&gt;</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::cell::RefCell;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = RefCell::<span class="title function_ invoke__">new</span>(<span class="number">5</span>);</span><br><span class="line">    *x.<span class="title function_ invoke__">borrow_mut</span>() = <span class="number">10</span>; <span class="comment">// å¯å˜å€Ÿç”¨</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;x = &#123;&#125;&quot;</span>, x.<span class="title function_ invoke__">borrow</span>()); <span class="comment">// ä¸å¯å˜å€Ÿç”¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒRefCellå…è®¸æˆ‘ä»¬é€šè¿‡borrow_mut()æ–¹æ³•è¿›è¡Œå¯å˜å€Ÿç”¨ï¼Œå¹¶åœ¨è¿è¡Œæ—¶æ£€æŸ¥å€Ÿç”¨è§„åˆ™ã€‚</p>
<h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨Mutex-lt-T-gt"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨Mutex-lt-T-gt" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨Mutex&lt;T&gt;"></a>ç¤ºä¾‹ï¼šä½¿ç”¨Mutex&lt;T&gt;</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::sync::Mutex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">m</span> = Mutex::<span class="title function_ invoke__">new</span>(<span class="number">5</span>);</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">num</span> = m.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>(); <span class="comment">// è·å–é”</span></span><br><span class="line">        *num = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;m = &#123;&#125;&quot;</span>, m.<span class="title function_ invoke__">lock</span>().<span class="title function_ invoke__">unwrap</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mutex<T>ç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—®æ•°æ®ï¼Œé¿å…æ•°æ®ç«äº‰ã€‚</T></p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>
<ul>
<li><code>RefCell&lt;T&gt;</code> é€‚åˆç”¨äºéœ€è¦åŠ¨æ€æ£€æŸ¥å’Œç®¡ç†å¯å˜å€Ÿç”¨çš„å•çº¿ç¨‹åº”ç”¨ã€‚</li>
<li><code>Mutex&lt;T&gt;</code> ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç¡®ä¿æ•°æ®çš„çº¿ç¨‹å®‰å…¨è®¿é—®ã€‚</li>
</ul>
<h3 id="4-Cell-lt-T-gt-â€”-ç®€å•çš„å†…éƒ¨å¯å˜æ€§"><a href="#4-Cell-lt-T-gt-â€”-ç®€å•çš„å†…éƒ¨å¯å˜æ€§" class="headerlink" title="4. Cell&lt;T&gt; â€” ç®€å•çš„å†…éƒ¨å¯å˜æ€§"></a>4. Cell&lt;T&gt; â€” ç®€å•çš„å†…éƒ¨å¯å˜æ€§</h3><p>Cell<T>æä¾›äº†ä¸€ç§éå¸¸è½»é‡çº§çš„æ–¹å¼æ¥å®ç°å†…éƒ¨å¯å˜æ€§ï¼Œé€‚ç”¨äºæ— éœ€å¼•ç”¨çš„æƒ…å†µä¸‹å­˜å‚¨æ•°æ®ã€‚å®ƒé€šå¸¸ç”¨äºå­˜å‚¨åŸºæœ¬ç±»å‹æ•°æ®ï¼Œå¦‚æ•´æ•°ã€å¸ƒå°”å€¼ç­‰ã€‚</T></p>
<h4 id="ç¤ºä¾‹ï¼šä½¿ç”¨Cell-lt-T-gt"><a href="#ç¤ºä¾‹ï¼šä½¿ç”¨Cell-lt-T-gt" class="headerlink" title="ç¤ºä¾‹ï¼šä½¿ç”¨Cell&lt;T&gt;"></a>ç¤ºä¾‹ï¼šä½¿ç”¨Cell&lt;T&gt;</h4><figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> std::cell::Cell;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = Cell::<span class="title function_ invoke__">new</span>(<span class="number">5</span>);</span><br><span class="line">    x.<span class="title function_ invoke__">set</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;x = &#123;&#125;&quot;</span>, x.<span class="title function_ invoke__">get</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åœºæ™¯</p>
<p><code>Cell&lt;T&gt;</code> é€‚åˆåœ¨å•çº¿ç¨‹ä¸­æä¾›ç®€å•çš„å¯å˜æ•°æ®å­˜å‚¨ï¼Œå°¤å…¶æ˜¯å¯¹äºåŸºç¡€æ•°æ®ç±»å‹ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Rustçš„æ™ºèƒ½æŒ‡é’ˆæä¾›äº†å¼ºå¤§çš„å†…å­˜ç®¡ç†èƒ½åŠ›ï¼Œå®ƒä»¬åœ¨ç¡®ä¿å†…å­˜å®‰å…¨çš„åŒæ—¶ï¼Œä¹Ÿä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ›´çµæ´»åœ°æ“ä½œæ•°æ®ã€‚åœ¨Rustä¸­ï¼Œæ™ºèƒ½æŒ‡é’ˆä¸ä»…ä»…æ˜¯å†…å­˜ç®¡ç†çš„å·¥å…·ï¼Œæ›´æ˜¯å€Ÿç”¨å’Œæ‰€æœ‰æƒç³»ç»Ÿçš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œå®ƒä»¬å¸®åŠ©å¼€å‘è€…é¿å…å†…å­˜æ³„æ¼å’Œæ•°æ®ç«äº‰çš„é—®é¢˜ã€‚</p>
<ul>
<li>**Box<T>**ï¼šé€‚ç”¨äºå †åˆ†é…æ•°æ®ï¼Œæ‹¥æœ‰å”¯ä¸€æ‰€æœ‰æƒã€‚</T></li>
<li><strong>Rc<T></T></strong> å’Œ **Arc<T>**ï¼šé€‚ç”¨äºå…±äº«æ•°æ®ï¼Œæä¾›å¼•ç”¨è®¡æ•°ã€‚</T></li>
<li><strong>RefCell<T></T></strong> å’Œ **Mutex<T>**ï¼šæä¾›å†…éƒ¨å¯å˜æ€§ï¼Œæ”¯æŒå•çº¿ç¨‹å’Œå¤šçº¿ç¨‹åœºæ™¯ã€‚</T></li>
<li>**Cell<T>**ï¼šé€‚ç”¨äºç®€å•ç±»å‹çš„æ•°æ®å­˜å‚¨ï¼Œæ”¯æŒå†…éƒ¨å¯å˜æ€§ã€‚</T></li>
</ul>
<p>é€šè¿‡åˆç†é€‰æ‹©åˆé€‚çš„æ™ºèƒ½æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºæ—¢é«˜æ•ˆåˆå®‰å…¨çš„Rustç¨‹åºã€‚</p>
]]></content>
      <tags>
        <tag>Rust</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub+Hexoæ­å»ºä¸ªäººåšå®¢ç½‘ç«™</title>
    <url>/2022/09/18/GitHub-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯hexoï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯hexoï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯hexoï¼Ÿ"></a>ä»€ä¹ˆæ˜¯hexoï¼Ÿ</h2><p>Hexoæ˜¯ä¸€æ¬¾åŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œç‰¹ç‚¹æ˜¯å¿«é€Ÿï¼Œç®€ä»‹å¹¶ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼ŒHexoä½¿ç”¨Markdownè§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚å®ƒå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨GitHubå’Œå…¶ä»–æ‰˜ç®¡å¹³å°ä¸Šï¼Œæ˜¯æ­å»ºåšå®¢çš„é¦–é€‰æ¡†æ¶ã€‚</p>
<span id="more"></span>
<h2 id="ä»€ä¹ˆæ˜¯githubï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯githubï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯githubï¼Ÿ"></a>ä»€ä¹ˆæ˜¯githubï¼Ÿ</h2><p>GitHubæ˜¯ä¸€ä¸ªåœ¨çº¿è½¯ä»¶æºä»£ç æ‰˜ç®¡æœåŠ¡å¹³å°ï¼Œä½¿ç”¨Gitä½œä¸ºç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„ä»£ç æ‰˜ç®¡ç½‘ç«™å’Œå¼€æºç¤¾åŒºã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯githubä¸Šçš„ä¸€ä¸ªæœåŠ¡ï¼ŒGitHub Pagesï¼Œå®ƒæ˜¯ç”±GitHubæä¾›çš„ä¸€ä¸ªç½‘é¡µå¯„å­˜æœåŠ¡ï¼Œå¯ä»¥ç”¨äºå­˜æ”¾é™æ€ç½‘é¡µï¼ŒåŒ…æ‹¬åšå®¢ï¼Œé¡¹ç›®æ–‡æ¡£ç”šè‡³æ•´æœ¬ä¹¦ã€‚ä¸€èˆ¬GitHub Pagesä½¿ç”¨github.ioçš„å­åŸŸåï¼Œä½†æ˜¯ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åŸŸåã€‚</p>
<h2 id="æ­å»ºæ­¥éª¤ï¼š"><a href="#æ­å»ºæ­¥éª¤ï¼š" class="headerlink" title="æ­å»ºæ­¥éª¤ï¼š"></a>æ­å»ºæ­¥éª¤ï¼š</h2><h3 id="1-GitHubåˆ›å»ºä¸ªäººä»“åº“"><a href="#1-GitHubåˆ›å»ºä¸ªäººä»“åº“" class="headerlink" title="1.GitHubåˆ›å»ºä¸ªäººä»“åº“"></a>1.GitHubåˆ›å»ºä¸ªäººä»“åº“</h3><p>ç™»å½•åˆ°GitHubï¼Œå¦‚æœæ²¡æœ‰GitHubè´¦å·ï¼Œä½¿ç”¨ä½ çš„é‚®ç®±æ³¨å†ŒGitHubè´¦å·ï¼Œç‚¹å‡»GitHubä¸­çš„New repositoryåˆ›å»ºæ–°ä»“åº“ï¼Œä»“åº“ååº”è¯¥ä¸ºï¼šâ€œç”¨æˆ·å.github.ioâ€è¿™ä¸ªç”¨æˆ·åä½¿ç”¨ä½ çš„githubè´¦å·åç§°ä»£æ›¿ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å¯¹å›ºå®šçš„å†™æ³•ã€‚</p>
<h3 id="2-å®‰è£…git"><a href="#2-å®‰è£…git" class="headerlink" title="2.å®‰è£…git"></a>2.å®‰è£…git</h3><p>ä»€ä¹ˆæ˜¯gitï¼Ÿç®€å•æ¥è¯´Gitæ˜¯å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆçš„å¤„ç†é¡¹ç›®ã€‚æˆ‘ä»¬ç½‘ç«™åœ¨æœ¬åœ°æ­å»ºå¥½äº†ï¼Œéœ€è¦ä½¿ç”¨GitåŒæ­¥åˆ°GitHubä¸Šï¼Œæ¨èä¸€ä¸ªå·¨å¥½çš„<a href="http://git.oschina.net/progit/index.html">gitæ•™ç¨‹</a>ã€‚<br>å®‰è£…æˆåŠŸåï¼Œå°†ä½ çš„Gitä¸GitHubè´¦å·ç»‘å®šï¼Œé¼ æ ‡å³å‡»æ‰“å¼€Git Bashï¼Œè®¾ç½®user.nameå’Œuser.eamilé…ç½®ä¿¡æ¯ï¼š<br>git config â€“global user.name â€œä½ çš„GitHubç”¨æˆ·åâ€<br>git config â€“global user.email â€œä½ çš„GitHubæ³¨å†Œé‚®ç®±â€<br>ç”Ÿæˆsshå¯†é’¥æ–‡ä»¶ï¼š<br>ssh-keygen -t rsa -C â€œä½ çš„GitHubæ³¨å†Œé‚®ç®±â€<br>ç„¶åç›´æ¥ä¸‰ä¸ªå›è½¦å³å¯ï¼Œé»˜è®¤ä¸éœ€è¦è®¾ç½®å¯†ç <br>ç„¶åæ‰¾åˆ°ç”Ÿæˆçš„.sshæ–‡ä»¶å¤¹ä¸­çš„id_rsa.pubå¯†é’¥ï¼Œå°†å†…å®¹å…¨éƒ¨å¤åˆ¶<br>æ‰“å¼€GitHub_Settings_keysé¡µé¢ï¼Œæ–°å»ºnew SSH Key<br>Titleä¸ºæ ‡é¢˜ï¼Œä»»æ„å¡«å†™å³å¯ï¼Œå°†åˆšåˆšå¤åˆ¶çš„id_rsa.pubå†…å®¹ç²˜è´´è¿›å»ï¼Œæœ€åç‚¹å‡»Add SSH Keyã€‚<br>åœ¨git bashä¸­æ£€æµ‹GitHubå…¬é’¥æ˜¯å¦æˆåŠŸï¼Œè¾“å…¥ssh <a href="mailto:&#x67;&#x69;&#x74;&#x40;&#x67;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#111;&#109;">&#x67;&#x69;&#x74;&#x40;&#x67;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#111;&#109;</a><br>è¿™é‡Œä¹‹æ‰€ä»¥è®¾ç½®GitHubå¯†é’¥çš„åŸå› æ˜¯ï¼Œé€šè¿‡éå¯¹ç§°åŠ å¯†çš„å…¬é’¥ä¸ç§é’¥æ¥å®ŒæˆåŠ å¯†ï¼Œå…¬é’¥æ”¾ç½®åœ¨githubä¸Šï¼Œç§é’¥æ”¾ç½®åœ¨è‡ªå·±çš„ç”µè„‘é‡Œã€‚githubè¦æ±‚æ¯æ¬¡æ¨é€ä»£ç éƒ½æ˜¯åˆæ³•ç”¨æˆ·ï¼Œæ‰€ä»¥æ¯æ¬¡æ¨é€éƒ½è¦è¾“å…¥è´¦å·å¯†ç éªŒè¯æ¨é€ç”¨æˆ·æ˜¯å¦åˆæ³•ç”¨æˆ·ï¼Œä¸ºäº†çœå»æ¯æ¬¡è¾“å…¥å¯†ç çš„æ­¥éª¤ï¼Œé‡‡ç”¨sshï¼Œå½“ä½ æ¨é€çš„æ—¶å€™ï¼Œgitå°±ä¼šåŒ¹é…ä½ çš„ç§é’¥è·Ÿgithubä¸Šé¢çš„å…¬é’¥æ˜¯å¦æ˜¯é…å¯¹çš„ï¼Œè‹¥æ˜¯åŒ¹é…å°±è®¤ä¸ºä½ æ˜¯åˆæ³•ç”¨æˆ·ï¼Œåˆ™å…è®¸æ¨é€ã€‚</p>
<h3 id="3-å®‰è£…Node-js"><a href="#3-å®‰è£…Node-js" class="headerlink" title="3.å®‰è£…Node.js"></a>3.å®‰è£…Node.js</h3><p>HexoåŸºäºNode.jsï¼Œ<a href="https://nodejs.org/en/download/">Node.jsä¸‹è½½åœ°å€</a>ï¼Œæ³¨æ„å®‰è£…node.jsä¼šåŒ…å«ç¯å¢ƒå˜é‡åŠnpmçš„å®‰è£…ï¼Œå®‰è£…åï¼Œæ£€æµ‹node.jsæ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥node -vï¼Œæ£€æµ‹npmæ˜¯å¦å®‰è£…æˆåŠŸï¼Œnpm -v<br>åˆ°è¿™å„¿ï¼Œå®‰è£…Hexoçš„ç¯å¢ƒå·²ç»å…¨éƒ¨æ­å»ºå®Œæˆã€‚</p>
<h3 id="4-å®‰è£…Hexo"><a href="#4-å®‰è£…Hexo" class="headerlink" title="4.å®‰è£…Hexo"></a>4.å®‰è£…Hexo</h3><p>hexoå°±æ˜¯æˆ‘ä»¬çš„ä¸ªäººåšå®¢ç½‘ç«™çš„æ¡†æ¶ï¼Œè¿™é‡Œéœ€è¦è‡ªå·±åœ¨ç”µè„‘é‡Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¯ä»¥å‘½åä¸ºBlogï¼ŒHexoæ¡†æ¶ä¸ä»¥åä½ è‡ªå·±å‘å¸ƒçš„ç½‘é¡µéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºå¥½åï¼Œè¿›å…¥æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰“å¼€å‘½ä»¤è¡Œçª—å£ã€‚<br>ä½¿ç”¨npmå‘½ä»¤å®‰è£…Hexoï¼Œè¾“å…¥ï¼š<br>npm install -g hexo-cli<br>è¿™ä¸ªå®‰è£…æ—¶é—´è¾ƒé•¿è€å¿ƒç­‰å¾…ï¼Œå®‰è£…å®Œæˆåï¼Œåˆå§‹åŒ–æˆ‘ä»¬çš„åšå®¢ï¼Œè¾“å…¥ï¼š<br>hexo init blog<br>æ³¨æ„ï¼šè¿™é‡Œçš„å‘½ä»¤éƒ½æ˜¯ä½œç”¨åœ¨åˆšåˆšåˆ›å»ºçš„blogæ–‡ä»¶å¤¹ä¸­ã€‚<br>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å¯åŠ¨å‘½ä»¤ï¼š<br>hexo server<br>æ‰“å¼€æµè§ˆå™¨å“¦ç½‘å€å¯ä»¥çœ‹åˆ°ç½‘ç«™çš„æ ·å¼</p>
<h3 id="5-æ¨é€ç½‘ç«™"><a href="#5-æ¨é€ç½‘ç«™" class="headerlink" title="5.æ¨é€ç½‘ç«™"></a>5.æ¨é€ç½‘ç«™</h3><p>ä¸Šé¢åªæ˜¯åœ¨æœ¬åœ°é¢„è§ˆï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æ¨é€ç½‘ç«™ï¼Œä¹Ÿå°±æ˜¯å‘å¸ƒç½‘ç«™ï¼Œè®©æˆ‘ä»¬çš„ç½‘ç«™å¯ä»¥è¢«æ›´å¤šäººè®¿é—®åˆ°ã€‚åœ¨è®¾ç½®ä¹‹å‰ï¼Œéœ€è¦è§£é‡Šä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨blogæ ¹ç›®å½•é‡Œçš„_config.ymlæ–‡ä»¶ç§°ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶<br>è¿›å…¥themesæ–‡ä»¶å¤¹ï¼Œé‡Œé¢ä¹Ÿæœ‰ä¸ª_config.ymlæ–‡ä»¶ï¼Œè¿™ä¸ªç§°ä¸ºä¸»é¢˜é…ç½®æ–‡ä»¶<br>ç°åœ¨éœ€è¦åšçš„æ˜¯å°†æˆ‘ä»¬çš„Hexoå’ŒGitHubå…³è”èµ·æ¥ï¼Œæ‰“å¼€ç«™ç‚¹çš„é…ç½®æ–‡ä»¶_config.ymlï¼Œç¿»åˆ°æœ€åä¿®æ”¹ä¸ºï¼š<br>deploy:<br>type: git<br>repo: è¿™é‡Œå¡«å…¥ä½ ä¹‹å‰åœ¨GitHubä¸Šåˆ›å»ºä»“åº“çš„å®Œæ•´å†ç»ï¼Œè®°å¾—åŠ ä¸Š.git<br>branch: master<br>ä¿å­˜ç«™ç‚¹é…ç½®æ–‡ä»¶ã€‚<br>å…¶å®å°±æ˜¯ç»™hexo dè¿™ä¸ªå‘½ä»¤åšç›¸åº”çš„é…ç½®ï¼Œè®©hexoçŸ¥é“ä½ è¦æŠŠblogéƒ¨ç½²åœ¨å“ªä¸ªä½ç½®ï¼Œå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éƒ¨ç½²åœ¨æˆ‘ä»¬GitHubçš„ä»“åº“é‡Œï¼Œæœ€åå®‰è£…gitéƒ¨ç½²æ’ä»¶ï¼Œè¾“å…¥å‘½ä»¤ï¼š<br>npm install hexo-deployer-git â€“save<br>è¿™æ—¶ï¼Œæˆ‘ä»¬åˆ†åˆ«è¾“å…¥ä¸‰æ¡å‘½ä»¤ï¼š<br>hexo clean<br>hexo g<br>hexo d<br>å…¶å®ç¬¬ä¸‰æ¡hexo då°±æ˜¯éƒ¨ç½²ç½‘ç«™çš„å‘½ä»¤ï¼Œdæ˜¯deployçš„ç¼©å†™ï¼Œå®Œæˆåï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥ä½ çš„æ”¾ç½®ä¸ªäººç½‘ç«™çš„ä»“åº“è·¯å¾„ï¼Œä½ å°±å¯ä»¥å‘ç°ä½ çš„åšå®¢å·²ç»ä¸Šçº¿äº†ï¼Œå¯ä»¥åœ¨ç½‘ç»œä¸Šè¢«è®¿é—®åˆ°ã€‚</p>
<h2 id="å¸¸ç”¨hexoå‘½ä»¤åŠè§£é‡Š"><a href="#å¸¸ç”¨hexoå‘½ä»¤åŠè§£é‡Š" class="headerlink" title="å¸¸ç”¨hexoå‘½ä»¤åŠè§£é‡Š"></a>å¸¸ç”¨hexoå‘½ä»¤åŠè§£é‡Š</h2><p>hexo init [folder]<br>æ–°å»ºä¸€ä¸ªç½‘ç«™ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®folderï¼ŒHexoé»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™ã€‚<br>æœ¬å‘½ä»¤ç›¸å½“äºæ‰§è¡Œäº†ä»¥ä¸‹å‡ æ­¥ï¼š<br>1.Git clone <a href="https://github.com/hexojs/hexo-starter">hexo-starter</a>å’Œ<a href="https://github.com/hexojs/hexo-theme-landscape">hexo-theme-landscape</a>ä¸»é¢˜åˆ°å½“å‰ç›®å½•æˆ–è€…æŒ‡å®šç›®å½•<br>2.ä½¿ç”¨<a href="https://classic.yarnpkg.com/lang/en/">Yarn 1</a>ã€<a href="https://pnpm.js.org/">pnpm</a>æˆ–è€…<a href="https://docs.npmjs.com/cli/install">npm</a>åŒ…ç®¡ç†å™¨ä¸‹è½½ä¾èµ–ï¼ˆå¦‚æœ‰å·²å®‰è£…å¤šä¸ªï¼Œåˆ™åˆ—åœ¨å‰é¢çš„ä¼˜å…ˆï¼‰ã€‚npmé»˜è®¤éš<a href="https://hexo.io/docs/#Install-Node-js">Node.js</a>å®‰è£…ã€‚</p>
<p>hexo new [layout] &lt;title&gt;<br>æ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®layoutçš„è¯ï¼Œé»˜è®¤ä½¿ç”¨_config.ymlä¸­çš„default_layoutå‚æ•°ä»£æ›¿ï¼Œå¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHexoä¼šä½¿ç”¨æ–‡ç« çš„æ ‡é¢˜æ¥å†³å®šæ–‡ç« æ–‡ä»¶çš„è·¯å¾„ã€‚å¯¹äºç‹¬ç«‹é¡µé¢æ¥è¯´ï¼ŒHexoä¼šåˆ›å»ºä¸€ä¸ªä»¥æ ‡é¢˜ä¸ºåå­—çš„ç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªindex.mdæ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨â€“pathå‚æ•°è¦†ç›–ä¸Šè¿°è¡Œä¸ºã€è‡ªè¡Œå†³å®šæ–‡ä»¶çš„ç›®å½•ï¼š<br>hexo new page â€“path about&#x2F;me â€œAbout meâ€<br>ä»¥ä¸Šå‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªsource&#x2F;about&#x2F;me.mdï¼ŒåŒæ—¶me.mdçš„Front Matterä¸­çš„titleä¸ºâ€œpageâ€ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œhexo-cliå°†pageè§†ä¸ºæŒ‡å®šæ–‡ç« çš„æ ‡é¢˜ï¼Œå¹¶é‡‡ç”¨é»˜è®¤çš„layout</p>
<p>hexo generate<br>ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚</p>
<p>hexo publish [layout] &lt;filename&gt;<br>å‘è¡¨è‰ç¨¿</p>
<p>hexo server<br>å¯åŠ¨æœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®åœ°å€ä¸ºï¼š<br><a href="http://localhost:4000/%E3%80%82">http://localhost:4000/ã€‚</a></p>
<p>hexo deploy<br>éƒ¨ç½²ç½‘ç«™ã€‚</p>
<p>hexo clean<br>æ¸…æ¥šç¼“å­˜æ–‡ä»¶ï¼ˆdb.jsonï¼‰å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼ˆpublic)ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰,å¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚</p>
<p>hexo list &lt;type&gt;<br>åˆ—å‡ºç½‘ç«™èµ„æ–™</p>
<h3 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h3><p>hexo â€“safe<br>åœ¨å®‰å…¨æ¨¡å¼ä¸‹ï¼Œä¸ä¼šè½½å…¥æ’ä»¶å’Œè„šæœ¬ã€‚å½“æ‚¨åœ¨å®‰è£…æ–°æ’ä»¶é­é‡é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ä»¥å®‰å…¨æ¨¡å¼é‡æ–°æ‰§è¡Œã€‚</p>
<p>hexo â€“debug<br>åœ¨ç»ˆç«¯ä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯å¹¶è®°å½•åˆ°debug.logã€‚å½“æ‚¨ç¢°åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å°è¯•ç”¨è°ƒè¯•æ¨¡å¼é‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶<a href="https://github.com/hexojs/hexo/issues/new">æäº¤è°ƒå¼ä¿¡æ¯åˆ°GitHub</a>.</p>
<p>hexo â€“silent<br>éšè—ç»ˆç«¯ä¿¡æ¯ã€‚</p>
<p>æ›´å¤šè¯¦æƒ…å¯ä»¥æŸ¥çœ‹<a href="https://zhuanlan.zhihu.com/p/26625249">æ­¤ç¯‡æ–‡æ¡£</a></p>
]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
